<!DOCTYPE html>
<html lang="en">
    <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="theme-color" content="#00aeef" />
  <meta http-equiv="Content-Language" content="en" />

  <!-- Enable responsiveness on mobile devices-->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     Integration Manual - v2 &middot; Documentações e tutoriais 
  </title>

  <link rel="shortcut icon" href="https://developercielo.github.io/en/assets/favicon.ico" />

  <!-- CSS -->
  <link
    href="https://fonts.googleapis.com/css?family=Fira+Sans:300,400,500"
    rel="stylesheet"
    media="none"
    onload="if(media!='all')media='all'"
  />
  <script async src="https://use.fontawesome.com/3ae06f1030.js"></script>

  <link
    rel="stylesheet"
    href="https://developercielo.github.io/en/assets/bundles/css/bundle.min.css"
  />

   
  <link
    rel="alternate"
    hreflang="pt"
    href="https://developercielo.github.io/en/manual/qrcode-v2"
  />
    
  <link
    rel="alternate"
    hreflang="en"
    href="https://developercielo.github.io/en/en/manual/qrcode-v2"
  />
   

  <!-- RSS -->
  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="https://developercielo.github.io/en/atom.xml"
  />
</head>

    <body>
        
        <div class="content-container no-dark-box">
        
            <div id="submenu">
                <div class="submenu-container">
                    <div class="submenu-row sub-items">
                        <div class="submenu-itens">
                            <a href="https://devcielo.zendesk.com/hc/pt-br#suporte" class="help">Help</a>

                            
                            <div class="lang">
                                <span>Languages</span>

                                
                                    
                                    <a href="https://developercielo.github.io/manual/qrcode-v2">
                                    

                                        <img alt="Português" src="https://developercielo.github.io/en/assets/images/pt.png"/>
                                    </a>
                                
                                    
                                    <a href="https://developercielo.github.io/en/manual/qrcode-v2">
                                    

                                        <img alt="English" src="https://developercielo.github.io/en/assets/images/en.png"/>
                                    </a>
                                
                            </div>
                            
                        </div>

                        
                        <div class="search">
                            <input type="text" class="search" id="input-search">
                        </div>
                    </div>
                    <div class="submenu-row results">
                        <div class="search-results-container">
                            <ul class="search-results"></ul>
                        </div>
                    </div>
                        

                    <div class="submenu-row breads">
                        <ol class="breadcrumb">
                            
                            <li><a href="https://developercielo.github.io/en/">Home</a></li>
                            
                            
                            
                            
                                
                                    
                                    
                                    
                                    
                                    
                                        
                                    
                                        
                                    
                                        
                                    
                                
                            
                                
                                    
                                    <li class="active">&gt; <a href="https://developercielo.github.io/en/manual/qrcode-v2">Integration Manual - v2</a></li>
                                    
                                
                            
                        </ol>
                    </div>
                </div>
            </div>

            <div class="post"><h1 id="access-requirements">Access requirements</h1>

<p>To access the APIs, it’s necessary to open a ticket via <a href="https://devcielo.zendesk.com/hc/pt-br/requests/new?ticket_form_id=360000330511">Zendesk</a>, informing the name of the responsible technician, e-mail, name, function and which application will perform the integration.</p>

<h1 id="macro-flow-integration">Macro flow integration</h1>

<p>Currently within the payments API there’re three resources used for integration, being them:</p>

<ul>
  <li><strong>POST</strong> /v2/oauth/access-token</li>
  <li><strong>GET</strong> /padraoq/v1/publicKey</li>
  <li><strong>POST</strong> /padraoq/v1/payment/card</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/images/fluxoIntegracao.png" alt="QR Code Integration Flow" /></p>

<h3 id="environments">Environments</h3>

<table>
  <thead>
    <tr>
      <th>Environment</th>
      <th>Address</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Homologation</td>
      <td>api2.cielo.com.br/sandbox</td>
      <td>It should be used as the partner development/testing environment.</td>
    </tr>
    <tr>
      <td>Production</td>
      <td>api2.cielo.com.br</td>
      <td>It must be used when carrying the production credentials and a good level of maturity with the approval environment.</td>
    </tr>
  </tbody>
</table>

<h3 id="access-token">Access Token</h3>

<p>The <strong>access_token</strong> resource is responsible for authentication using the OAuth 2.0 protocol. With client_id and client_secret in hand the request to <strong>POST / access_token</strong> must be done by carrying <strong>authorization</strong> in <strong>Header</strong> and <strong>grant_type</strong> in the body of the request, following example below.</p>

<p><strong>Note: The authorization value must be composed of the word Basic with Base64 generated from the client_id concatenation: client_secret</strong></p>

<h4 id="contract">Contract</h4>

<blockquote>
  <p><strong>POST</strong> /v2/oauth/token (url encoded format)</p>

  <p><strong>POST</strong> /v2/oauth/access-token (json format)</p>

  <p><strong>Headers</strong></p>

  <table>
    <thead>
      <tr>
        <th>Key</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Authorization</strong></td>
        <td>Basic + Base64</td>
      </tr>
      <tr>
        <td><strong>Content-Type</strong></td>
        <td>application-json</td>
      </tr>
    </tbody>
  </table>

  <p><strong>Body</strong></p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"grant_type": "client_credentials"
}
</code></pre></div>  </div>
</blockquote>

<h4 id="request-example">Request Example</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl --location --request POST 'https://api2.cielo.com.br/v2/oauth/access-token' \
--header 'Authorization: Basic
dERxQUs000FoSDg5dFdpUWM1ejY0REJKc2lJTFpLbzh4TG0zV0p3eHkwRkQ0Y2dZVm46ZVZUVVZJZjFZWDJkOU40M0p4MVZwNGlWVXEzTzluTTR0TGF1UzhZYWo0V1JPcTJFSXU=' \
--header 'Content-Type: application/json' \
--data-raw '{
 "grant_type": "client_credentials",
"scopes": "qrcode_write,qrcode_read"
}
</code></pre></div></div>

<h4 id="response-example">Response Example</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "access_token": "5eb50e6b-2bfc-3a44-b9ba-b9ba75256e7e",
  "token_type": "bearer",
  "expires_in": 86400
}
</code></pre></div></div>

<h3 id="public-keys">Public Keys</h3>

<p>Public keys is the resource responsible for returning the public encryption key used to encrypt the card number, which will be sent in the body of the resource request <strong>payment/card</strong> in the future. The encryption algorithm used is <strong>RSA 2048 bits and cipher RSA / ECB / PKCS1Padding</strong>. To request the <strong>GET / publicKeys</strong> resource, the <strong>access_token</strong> that was generated in the previous step is required.</p>

<h4 id="contract-1">Contract</h4>

<blockquote>
  <p><strong>GET</strong> /padraoq/v1/publicKey</p>

  <p><strong>Headers</strong></p>

  <table>
    <thead>
      <tr>
        <th>Key</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Authorization</strong></td>
        <td>Bearer = access_token (generated by the Access Token API)</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<h4 id="request-example-1">Request Example</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl --location --request GET 'https://api2.cielo.com.br/sandbox/padraoq/v1/publicKey' \
--header 'Authorization: Bearer 83247803-585d-379d-8ea4-19dfcf4c3f75'
</code></pre></div></div>

<h4 id="response-example-1">Response Example</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "public_key": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmH7eS0n6yQSylMDZnY3c/mbDUUEJfyslrilslJKpDRG3m2YaCZdtwo5LahEUWshhBc8jckRkCyqDVVfBJ7WQN1Z1hN0ifCK8mfnh/2SAYGc4e8qydcWT64AVQo+Kay201cRuHeCt1Iyuhi5tOxTF2satd40+8eMkqiVJdhJ0Sjc1ZRezFSo96XReiT8eYz/4Rhubq1BPISlNXqqls3NuPMCxY6IFOLmjTi3xEIdcYtUT5MCfXBG4Rz6rMNrQ7JRAfEOIdvcAt++ygV9ilUxtETn+OKKNDcEUKzXM3Taop8vFXD8HWKzfmlA/usxeKxiI6eTrcWCmrVMQ2Yvf4RSU4wIDAQAB",
    "key_id": "1b59934a-7eaa-4f90-a391-585de0ffc550",
    "expires_in": 35853
}
</code></pre></div></div>

<h3 id="cryptography">Cryptography</h3>

<p>Example Java code to encrypt the card number using a public key:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import java.security.PublicKey;
import java.util.Base64;
import javax.crypto.Cipher;
public class EncriptCard {
    public String encript(PublicKey key, String cardNumber) {
        try {
            Cipher cipher = Cipher.getInstance("RSA");
            cipher.init(Cipher.ENCRYPT_MODE, key);
            byte[] encryptedBytes =
                cipher.doFinal(cardNumber.getBytes());
            String encryptedCard =
                Base64.getEncoder().encodeToString(encryptedBytes);
            return encryptedCard;
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}
</code></pre></div></div>

<h3 id="payments">Payments</h3>

<p>The <strong>POST /payment/card</strong> resource is responsible for making the payment based on the data contained in the requisition payload. In the request header it’s required to inform <strong>Authorization</strong>.</p>

<p>The request body consists of data from the application and the QR Code.</p>

<blockquote>
  <p>Note: it’s possible to generate test cards using the tool (https://namso-gen.com/), for this it’s only required to inform the first 6 digits of a valid card. Through the tool (https://8gwifi.org/RSAFunctionality?keysize=2048), it’s possible to simulate the encryption of the <code class="language-plaintext highlighter-rouge">"card_data"</code> made using the return obtained from <strong>GET / publicKeys</strong>.</p>
</blockquote>

<h4 id="contract-2">Contract</h4>

<blockquote>
  <p><strong>POST</strong> /cielo-payment/v1/payments</p>

  <p><strong>Headers</strong></p>

  <table>
    <thead>
      <tr>
        <th>Key</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Authorization</strong></td>
        <td>Bearer = access_token (generated by the Access Token API)</td>
      </tr>
      <tr>
        <td><strong>Content-Type</strong></td>
        <td>application/json</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "key_id": "1b59934a-7eaa-4f90-a391-585de0ffc550",
    "card_data": "liRNW6uKAbB95ht2gmLg+LdYRZuAzredVeJkKpJsVSUABak2828xennWNjySFJlvNL9LXBv7adGddr7oM6rqoTGo+NLt/rpyosT9Gl4mvPmSFyNe+bMd7bPht2PKfnyWH4skP6lSuxqusq5bcPbapO8i9Fe8rSY+msNBTTywu02hYym6FD6MVgZe2dewpH39DfjTTtF9ck5rJlCYje3Jqfh3gUnLU6+6s7kliuKrbb5Z66y5BwQ9HFyF92mJYWilCYSEc5aqB9zcs7ij+B4yo8uMo8uBscJ+e15M2ESURdn/HMkehNggvqQBydtF+IJZqGo5jT/DI8LbhAG9WuyeAA==",
    "payee_document": "10771410093",
    "payee_name": "Maria Aparecida",
    "authorization_token": null,
    "qr_code": "00020101021226580014br.com.padraoq0116002006784913920002080004351503040001520400005303986540518.005802BR5918MASSA DADOS AFIL. 6012SAO PAULO SP6220051638021736126C351181600014br.com.padraoq01121702201614140204100003020104020105020382006304C7FE"
}
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">key_id</code></td>
      <td>Identifier of the encryption key used to encrypt the card. Returned by the GET /publicKey resource</td>
      <td>Alphanumeric text</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">card_data</code></td>
      <td>Card data encrypted by the public key, <a href="https://developercielo.github.io/manual/qrcode-v2#layout-card-data">See layout</a></td>
      <td>Alphanumeric text</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">payee_document</code></td>
      <td>CPF or CNPJ of the payer (user logged in the wallet)</td>
      <td>Text</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">payee_name</code></td>
      <td>Payer name (user logged into the wallet)</td>
      <td>Text</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">authorization_token</code></td>
      <td>User authorization token generated by the issuer (support debit payment) * for future use</td>
      <td>Alphanumeric text</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">qrcode</code></td>
      <td>QR Code string captured by the wallet</td>
      <td>Alphanumeric text</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<h4 id="request-example-2">Request Example</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl --location --request POST 'https://api2.cielo.com.br/sandbox/padraoq/v1/payment/card' \
--header 'Authorization: Bearer 83247803-585d-379d-8ea4-19dfcf4c3f75' \
--header 'Content-Type: application/json' \
--header 'Content-Type: application/json' \
--data-raw '{
    "key_id": "1b59934a-7eaa-4f90-a391-585de0ffc550",
    "card_data": "liRNW6uKAbB95ht2gmLg+LdYRZuAzredVeJkKpJsVSUABak2828xennWNjySFJlvNL9LXBv7adGddr7oM6rqoTGo+NLt/rpyosT9Gl4mvPmSFyNe+bMd7bPht2PKfnyWH4skP6lSuxqusq5bcPbapO8i9Fe8rSY+msNBTTywu02hYym6FD6MVgZe2dewpH39DfjTTtF9ck5rJlCYje3Jqfh3gUnLU6+6s7kliuKrbb5Z66y5BwQ9HFyF92mJYWilCYSEc5aqB9zcs7ij+B4yo8uMo8uBscJ+e15M2ESURdn/HMkehNggvqQBydtF+IJZqGo5jT/DI8LbhAG9WuyeAA==",
    "payee_document": "10771410093",
    "payee_name": "Maria Aparecida",
    "authorization_token": null,
    "qr_code": "00020101021226580014br.com.padraoq0116002006784913920002080004351503040001520400005303986540518.005802BR5918MASSA DADOS AFIL. 6012SAO PAULO SP6220051638021736126C351181600014br.com.padraoq01121702201614140204100003020104020105020382006304C7FE"
}'
</code></pre></div></div>

<h4 id="response-example-2">Response Example</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "reference_label": "30012036995B2230",
  "merchant_id": "0020060049139200",
  "terminal_id": "00090233",
  "authorization_code": "900735",
  "authentication_code": "",
  "host_nsu": "",
  "terminal_nsu": "997482",
  "timestamp": "208720164223",
  "card_scheme": ""
}
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Size</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">reference_label</code></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">merchant_id</code></td>
      <td>Establishment number</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">terminal_id</code></td>
      <td>POS logical number</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">authorization_code</code></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">authentication_code</code></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">host_nsu</code></td>
      <td>Unique Sequential Number</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">terminal_nsu</code></td>
      <td>Unique Sequential Number</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">timestamp</code></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">card_scheme</code></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="layout---card-data">Layout - Card Data</h1>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/layout_carddata_qrcode.jpg" alt="Layout Card Data" /></p>

<h1 id="parsed---qr-code">Parsed - QR Code</h1>

<p>Optional use</p>

<h2 id="request">Request</h2>

<blockquote>
  <p><strong>GET</strong> /padraoq/v1/parsedQRCode</p>

  <p><strong>Headers</strong></p>

  <table>
    <thead>
      <tr>
        <th>Key</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Authorization</strong></td>
        <td>Bearer = access_token (generated by the Access Token API)</td>
      </tr>
      <tr>
        <td><strong>Content-Type</strong></td>
        <td>application/json</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Parameter:

qrcode:"00020101021226580014br.com.padraoq011600100002444700010208620000920304000152040
30053039865406123.995802BR5909POSTO_ABC6010Barueri_SP622005161000230716416292816000
14br.com.padraoq0112230120171643020400040302020402010502038204010063041213"

</code></pre></div></div>

<h2 id="response">Response</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
{
  "qrcode_data": {
    "payload_format_indicator": "01",
    "point_of_initiation_method": "12",
    "merchant_account_information": {
      "gui": "br.com.padraoq",
      "id_merchant": "0020128328439200",
      "id_terminal": "21832843",
      "id_credenciador": "0001"
    },
    "merchant_category_code": "0000",
    "transaction_currency": "986",
    "transaction_amount": "6.00",
    "country_code": "BR",
    "merchant_name": "MASSA DADOS AFIL. ",
    "merchant_city": "SAO PAULO SP",
    "additional_data_field": {
      "reference_label": "12050C0415690978"
    },
    "crc16": "B8B0",
    "payment_information": {
      "gui": "br.com.padraoq",
      "timestamp": "120520162558",
      "modalidade": "1000",
      "parcelas": "01",
      "tipo_de_transacao": "01",
      "fonte_de_dados_do_pagamento": "03"
    }
  }
}

</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Size</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">payload_format_indicator</code></td>
      <td>Version of the QR Code data used to generate the code. Fixed “01”.</td>
      <td>Number</td>
      <td>02</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">point_of_initiation_method</code></td>
      <td>Identifier of the generated QR Code method: Fixed “12” - Dynamic QR Code.</td>
      <td>Number</td>
      <td>02</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">gui</code></td>
      <td>Global identifier: use a fixed “br.com.padraoq”.</td>
      <td>Alphanumeric text</td>
      <td>14</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">id_merchant</code></td>
      <td>Commercial Establishment Number.</td>
      <td>Number</td>
      <td>16</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">id_terminal</code></td>
      <td>Logical Terminal Number</td>
      <td>Number</td>
      <td>08</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">id_credenciador</code></td>
      <td>Identification of the creditor. Fixed “0001”.</td>
      <td>Number</td>
      <td>04</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">merchant_category_code</code></td>
      <td>Branch of activity of the Establishment (MCC).</td>
      <td>Number</td>
      <td>04</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transaction_currency</code></td>
      <td>Currency source code.</td>
      <td>Number</td>
      <td>03</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transaction_amount</code></td>
      <td>Transaction amount. Ex: “123.99”</td>
      <td>Text</td>
      <td>13</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">merchant_name</code></td>
      <td>Established Trade Name.</td>
      <td>Text</td>
      <td>25</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">merchant_city</code></td>
      <td>Establishment City.</td>
      <td>Text</td>
      <td>15</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">reference_label</code></td>
      <td>QR Code identification. Unique transaction code, extracted from BIT31.</td>
      <td>Text</td>
      <td>25</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">crc16</code></td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">gui</code></td>
      <td>Global identifier: use a fixed “br.com.padraoq”.</td>
      <td>Text</td>
      <td>14</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">timestamp</code></td>
      <td>Transaction date and time (DDMMAAHHmmss).</td>
      <td>Number</td>
      <td>12</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">modalidade</code></td>
      <td>Matrix product code.</td>
      <td>Number</td>
      <td>04</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">parcelas</code></td>
      <td>Number of parcels.</td>
      <td>Number</td>
      <td>02</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tipo_de_transacao</code></td>
      <td>Transaction type: Example - “01” - Sale; “02” - Cancellation.</td>
      <td>Number</td>
      <td>02</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">fonte_de_dados_do_pagamento</code></td>
      <td>Fixed: “03” - QR Code</td>
      <td>Number</td>
      <td>02</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="how-to-obtain-the-homologation-pos">How to obtain the homologation POS.</h1>

<p>To obtain the homologation POS, it is necessary to open a new request on [Zendesk] (https://devcielo.zendesk.com/hc/pt-br/requests/new?ticket_form_id=360000324432).</p>

<h1 id="callback-api">Callback API</h1>

<p>There is a callback API to send information about undo transactions, which can occur in the transaction flow between the POS and the authorization system platform.</p>

<p>It will be necessary for the partner to develop a callback API to receive information about the undo transactions and forward the URL (endpoint) to our team through Zendesk. Remembering that the Callback API must be generated in the restfull format.</p>

<h2 id="request-1">Request</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
   "transactionDate": "2018-10-29T14:35:12.000+0000",
   "terminalLogicalNumber": "78257509",
   "authorizationCode": "019387",
   "nsu": "572061",
   "merchantId": 1000000000,
   "amount": 82.90,
   "originalTransactionType": 1,
   "statusCode": 3
}
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Size</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transactionDate</code></td>
      <td>Transaction date (extracted from QRCode)</td>
      <td>Text</td>
      <td>36</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">terminalLogicalNumber</code></td>
      <td>POS logical number</td>
      <td>Text</td>
      <td>40</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">authorizationCode</code></td>
      <td>Transaction authorization code</td>
      <td>Alphanumeric</td>
      <td>6</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">nsu</code></td>
      <td>Unique Sequential Number</td>
      <td>Text</td>
      <td>50</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">merchantId</code></td>
      <td>Cielo store identifier (extracted from QRCode)</td>
      <td>String</td>
      <td>36</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">amount</code></td>
      <td>Transaction Amount</td>
      <td>Number</td>
      <td>15</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">originalTransactionType</code></td>
      <td>Originating transaction. Reports the undo of an /payments transaction.</td>
      <td>Number</td>
      <td>1</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">statusCode</code></td>
      <td>1 - Payment / 2 - Cancellation / 3 - Undo - When Undo - statusCode = 3</td>
      <td>Número</td>
      <td>1</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<h1 id="brands-and-payment-type">Brands and Payment Type</h1>

<p>The current version of the QRCode API supports the following flags and installment forms:</p>

<table>
  <thead>
    <tr>
      <th>Bandeira</th>
      <th>À vista</th>
      <th>Parcelado Loja</th>
      <th>Parcelado Emissor</th>
      <th>Parcelado Cliente</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Visa</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>Mastercard</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>Elo</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>American Express</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td><em>No</em></td>
    </tr>
    <tr>
      <td>Diners Club</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td><em>No</em></td>
    </tr>
    <tr>
      <td>JCB</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td><em>No</em></td>
    </tr>
    <tr>
      <td>Banescard</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td><em>No</em></td>
    </tr>
    <tr>
      <td>Hipercard</td>
      <td>Yes</td>
      <td>Yes</td>
      <td>Yes</td>
      <td><em>No</em></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Cards issued abroad are not allowed in installments.
The QR Code Cielo payment solution does not currently accept debit payments.</p>
</blockquote>

<h1 id="api-codes">API codes</h1>

<h2 id="api-errors">API errors</h2>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Description</th>
      <th>Model</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>201</td>
      <td>Created</td>
      <td> </td>
    </tr>
    <tr>
      <td>400</td>
      <td>Bad Request.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>401</td>
      <td>Unauthorized.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>403</td>
      <td>Forbidden.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>404</td>
      <td>Not Found.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>412</td>
      <td>Precondition Failed.</td>
      <td>{“properties”:{“code”:{“type”:”string”,”description”:”Error code.”},”description”:{“type”:”string”,”description”:”Error full description.”}}}</td>
    </tr>
    <tr>
      <td>413</td>
      <td>Request Entity Too Large.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>415</td>
      <td>Unsupported Media Type.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>422</td>
      <td>Unprocessable Entity.</td>
      <td>{“properties”:{“code”:{“type”:”string”,”description”:”Error code.”},”description”:{“type”:”string”,”description”:”Error full description.”}}}</td>
    </tr>
    <tr>
      <td>429</td>
      <td>Too Many Requests.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>500</td>
      <td>Internal Server Error.</td>
      <td>{“properties”:{“code”:{“type”:”string”,”description”:”Error code.”},”description”:{“type”:”string”,”description”:”Error full description.”}}}</td>
    </tr>
    <tr>
      <td>502</td>
      <td>Bad Gateway.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
    <tr>
      <td>504</td>
      <td>Gateway Timeout.</td>
      <td>{“description”:”Error full description.”,”type”:”string”}</td>
    </tr>
  </tbody>
</table>

<h2 id="payment-errors">Payment Errors</h2>

<table>
  <tbody>
    <tr>
      <td>Code</td>
      <td>Message</td>
      <td>Full description</td>
    </tr>
    <tr>
      <td>412.001</td>
      <td>The product was not found</td>
      <td>Business error regarding problems with the reported product.</td>
    </tr>
    <tr>
      <td>412.002</td>
      <td>Invalid QR Code</td>
      <td>Business error regarding problems in the sent QR Code data.</td>
    </tr>
    <tr>
      <td>412.003</td>
      <td>Expired QR Code</td>
      <td>Business error regarding the expiration of the QR Code validity time.</td>
    </tr>
    <tr>
      <td>412.004</td>
      <td>Invalid card data</td>
      <td>Business error referring to problems with the informed card data.</td>
    </tr>
    <tr>
      <td>412.005</td>
      <td>We do not accept payment with the registered card</td>
      <td>Business error regarding acceptance of the registered card.</td>
    </tr>
    <tr>
      <td>412.006</td>
      <td>Authorizer/issuing error</td>
      <td>Problems with card encryption. Remember that the sandbox environment verifies the validity of the cards, then, a valid card must be informed.</td>
    </tr>
    <tr>
      <td>412.007</td>
      <td>Generic error</td>
      <td>Problems with card encryption. Remember that the sandbox environment verifies the validity of the cards, then, a valid card must be informed.</td>
    </tr>
  </tbody>
</table>

<h1 id="questions-and-support-channel">Questions and Support Channel</h1>

<p>If you still have any questions, you can open a request on [Zendesk] (https://devcielo.zendesk.com/hc/pt-br/requests/new?ticket_form_id=360000316152).</p>
</div>


            <div class="footer-conteudo">
  <div id="footer-conteudo-img" class="col-lg-1 col-md-1">
    <img
      src="https://developercielo.github.io/en/assets/images/icon-doubt.svg"
      width="55px"
      height="53px"
      alt="Need Help?"
    />
  </div>

  <div id="footer-conteudo-texto" class="col-lg-11 col-md-11">
    <h2>Need Help?</h2>
    <p>If you didn't find your answer, <a href="https://devcielo.zendesk.com/hc/pt-br#suporte">send us a message</a>.</p>
  </div>
</div>

        </div>

        <div class="sidebar">
  <div class="sidebar-sticky">
    <div class="sidebar-about">
      <a
        title="Toggle left column"
        class="hamburger"
      >
        <i class="fa fa-bars hamb-menu" aria-hidden="true"></i>
      </a>
      <a href="https://desenvolvedores.cielo.com.br" target="_blank">
        <img
          src="https://developercielo.github.io/en/assets/images/logo.png"
          alt="Documentações e tutoriais"
          style="width: 60%; margin-left: 20%"
        />
      </a>
      <div></div>
    </div>

    <div id="toc"></div>

    <div class="fixed-footer">
      

      <div class="toc-contact">
        <div class="contact">
          <a
            title="Contact"
            href="https://devcielo.zendesk.com/"
          >
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
            <span>Contact</span>
          </a>
        </div>
        <div class="github">
          <a title="GitHub" href="https://github.com/developercielo">
            <i class="fa fa-github" aria-hidden="true"></i>
            <span>GitHub</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


        <script src="https://developercielo.github.io/en/assets/bundles/js/bundle.min.js"></script>
        <script>
            
            var selectors = 'h1,h2,h3,h4,h5,h6';
            
        </script>

        
        <script src="https://developercielo.github.io/en/assets/bundles/js/search.min.js"></script>
        

        

        <!-- Hotjar Tracking Code for https://developercielo.github.io/ -->
<script>
  (function (h, o, t, j, a, r) {
    h.hj =
      h.hj ||
      function () {
        (h.hj.q = h.hj.q || []).push(arguments);
      };
    h._hjSettings = { hjid: 674586, hjsv: 6 };
    a = o.getElementsByTagName("head")[0];
    r = o.createElement("script");
    r.async = 1;
    r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
    a.appendChild(r);
  })(window, document, "https://static.hotjar.com/c/hotjar-", ".js?sv=");
</script>

    </body>
</html>
