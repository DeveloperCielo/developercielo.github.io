<!DOCTYPE html>
<html lang="pt">
    <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="theme-color" content="#00aeef" />
  <meta http-equiv="Content-Language" content="pt" />

  <!-- Enable responsiveness on mobile devices-->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     Manual de integração &middot; Documentações e tutoriais 
  </title>

  <link rel="shortcut icon" href="https://developercielo.github.io/assets/favicon.ico" />

  <!-- CSS -->
  <link
    href="https://fonts.googleapis.com/css?family=Fira+Sans:300,400,500"
    rel="stylesheet"
    media="none"
    onload="if(media!='all')media='all'"
  />
  <script async src="https://use.fontawesome.com/3ae06f1030.js"></script>

  <link
    rel="stylesheet"
    href="https://developercielo.github.io/assets/bundles/css/bundle.min.css"
  />

   
  <link
    rel="alternate"
    hreflang="pt"
    href="https://developercielo.github.io/manual/cielo-lio"
  />
    
  <link
    rel="alternate"
    hreflang="en"
    href="https://developercielo.github.io/en/manual/cielo-lio"
  />
   

  <!-- RSS -->
  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="https://developercielo.github.io/atom.xml"
  />
</head>

    <body>
        
        <div class="content-container no-dark-box">
        
            <div id="submenu">
                <div class="submenu-container">
                    <div class="submenu-row sub-items">
                        <div class="submenu-itens">
                            <a href="https://devcielo.zendesk.com/hc/pt-br#suporte" class="help">Ajuda</a>

                            
                            <div class="lang">
                                <span>Idiomas</span>

                                
                                    
                                    <a href="https://developercielo.github.io/manual/cielo-lio">
                                    

                                        <img alt="Português" src="https://developercielo.github.io/assets/images/pt.png"/>
                                    </a>
                                
                                    
                                    <a href="https://developercielo.github.io/en/manual/cielo-lio">
                                    

                                        <img alt="English" src="https://developercielo.github.io/assets/images/en.png"/>
                                    </a>
                                
                            </div>
                            
                        </div>

                        
                        <div class="search">
                            <input type="text" class="search" id="input-search">
                        </div>
                    </div>
                    <div class="submenu-row results">
                        <div class="search-results-container">
                            <ul class="search-results"></ul>
                        </div>
                    </div>
                        

                    <div class="submenu-row breads">
                        <ol class="breadcrumb">
                            
                            <li><a href="/">Início</a></li>
                            
                            
                            
                            
                                
                                    
                                    
                                    
                                    
                                    
                                        
                                    
                                        
                                    
                                        
                                    
                                
                            
                                
                                    
                                    <li class="active">&gt; <a href="https://developercielo.github.io/manual/cielo-lio">Manual de integração</a></li>
                                    
                                
                            
                        </ol>
                    </div>
                </div>
            </div>

            <div class="post"><h1 id="importante">Importante</h1>

<h2 id="novo-cielo-smart">Novo Cielo Smart</h2>

<p>Chegou a Cielo Smart, a solução que é a evolução da LIO On e que traz mais eficiência e praticidade para o desenvolvimento dos aplicativos!</p>

<p>Com a Cielo Smart você aproveita:</p>

<ol>
  <li><strong>Compatibilidade ampliada</strong> – use seu app em novos terminais sem desenvolvimento adicional</li>
  <li><strong>Mais robustez e velocidade</strong> – melhor tempo de aprovação nos pagamentos</li>
  <li><strong>Smart First</strong> – todas as melhorias e novas funcionalidades serão implementadas somente na Cielo Smart</li>
</ol>

<p>Adapte seus apps com a integração via Deeplink e aproveite novas funcionalidades sem a necessidade de atualizar bibliotecas externas e simplifique suas implementações. Caso já utilize a integração via Deeplink, segue abaixo como se adaptar para o novo Cielo Smart:</p>

<p><strong>Integração via Deeplink</strong></p>

<ul>
  <li>Incluir uma nova tag no arquivo AndroidManifest.xml para que o App possa ser distribuído corretamente para os terminais no processo de publicação</li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;meta-data</span>
    <span class="na">android:name=</span><span class="s">"cs_integration_type"</span>
    <span class="na">android:value=</span><span class="s">"uri"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<ul>
  <li>Garantir a compatibilidade com o Android 10 (permissões, notificações, criação de intents, etc)</li>
</ul>

<aside class="warning">Gostaríamos de informar que o SDK foi descontinuado e, a partir de agora, enviaremos apenas patches com correções pontuais.</aside>

<h2 id="beneficios-da-integração-via-deeplink">Beneficios da Integração via Deeplink</h2>

<p>Recomendamos nossa integração via deeplink, por oferecer vários benefícios como:</p>

<ol>
  <li>Independência de Atualizações: Não é necessário aguardar atualizações do SDK do fabricante para corrigir bugs ou adicionar novas funcionalidades.</li>
  <li>Menor Tamanho do Aplicativo: Evita adicionar bibliotecas externas, reduzindo o tamanho do aplicativo.</li>
  <li>Facilidade de Implementação: Integrações via deeplink geralmente são mais simples e rápidas de implementar.</li>
  <li>Flexibilidade: Permite maior flexibilidade para personalizar a integração conforme as necessidades específicas do aplicativo.</li>
  <li>Compatibilidade: Reduz problemas de compatibilidade com diferentes versões de SDKs e dispositivos.</li>
  <li>Compatibilidade de bibliotecas terceiras: Caso o projeto de integração utilize uma biblioteca de terceiro e o SDK também, dependendo das diferentes versões, podemos ter problema de compatibilidade.</li>
  <li>Manutenção Simplificada: Facilita a manutenção do código, pois não depende de atualizações e mudanças no SDK do fabricante.</li>
  <li>Desempenho: Pode melhorar o desempenho do aplicativo, evitando a sobrecarga de um SDK adicional.</li>
  <li>Segurança: Reduz a superfície de ataque, pois não incorpora código de terceiros diretamente no aplicativo.</li>
</ol>

<p>Para saber mais, acesse <a href="https://developercielo.github.io/manual/cielo-lio#credenciais">AQUI</a> a documentação de Integração via Deeplink</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/comunicado_lio_on.jpg" alt="Comunicado LIO ON" /></p>

<h2 id="pix-na-lio-on">Pix na LIO ON</h2>

<p>Viemos informar que uma nova versão do SDK está disponível no Portal do desenvolvedor. Para acessá-la, basta efetuar o login e realizar o download da versão mais recente.</p>

<p>Essa atualização foi projetada para aprimorar a experiência do cliente, incorporando o PIX, melhorias na contagem de linhas impressas nos comprovantes, o que resulta na oferta de bobinas gratuitas aos clientes. Estamos comprometidos em aprimorar constantemente a experiência do usuário final.</p>

<p>Para garantir a compatibilidade com a nova versão do SDK e oferecer uma melhor experiência aos usuários finais, solicitamos que você faça a atualização. Este processo é simples e pode ser realizado através do nosso Portal do Desenvolvedor.</p>

<p>Acesse o <a href="https://desenvolvedores.cielo.com.br/api-portal/pt-br/user">Portal do Desenvolvedor</a> para iniciar a atualização dos seus aplicativos.</p>

<p>Agradecemos antecipadamente pela sua colaboração na atualização dos seus aplicativos. Esta iniciativa reflete nosso compromisso contínuo em fornecer soluções inovadoras e de alta qualidade para nossos usuários.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/images/Pix_Cielo_LIO.png" alt="Pix Cielo LIO" /></p>

<p><strong>Para saber mais clique na <a href="https://developercielo.github.io/manual/cielo-lio#pix">ABA PIX</a>.</strong></p>

<h1 id="documentação-cielo-lio">Documentação Cielo LIO</h1>

<p>Nessa documentação você tem acesso a todas as informações sobre a plataforma Cielo LIO e boas práticas para o desenvolvimento e modelos de integração disponíveis para complementar o negócio de seu cliente.</p>

<p>O objetivo dessa documentação é facilitar o processo de desenvolvimento fornecendo os materiais necessários para realizar a integração com a Cielo LIO e todos os conceitos sobre a Cielo Store, a loja de aplicativos da Cielo disponível na Cielo LIO</p>

<h1 id="visão-geral-da-plataforma">Visão Geral da Plataforma</h1>

<h2 id="cielo-lio">Cielo LIO</h2>

<p>É uma plataforma aberta que fornece controle e gestão de negócios indo além de um sistema de pagamentos tradicional. Essa solução suporta aplicativos desenvolvidos para sistema Android, possibilitando que desenvolvedores parceiros possam criar aplicativos especializados para diversos segmentos e qualquer porte de cliente.</p>

<h3 id="l300---positivo">L300 - Positivo</h3>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/l300.png" alt="NOVA LIO ON" /></p>

<h3 id="dx8000---ingenico">DX8000 - Ingenico</h3>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/ingenico-doc.png" alt="DX8000" /></p>

<h3 id="caracteristicas-dos-terminais">Caracteristicas dos terminais</h3>

<p>A LIO ON possui algumas funcionalidades exclusivas como por exemplo:</p>

<p><strong>Impressora térmica</strong>: o cliente poderá ter a 1ª e 2ª via impressa após o pagamento realizado. Além disso, as aplicações parceiras poderão utilizar os métodos disponíveis da impressora para imprimir dados importantes ou necessários para o negócio do cliente.</p>

<p>Especificação da Bobina:
Papel Azul 48 gramas, Comprimento: 12 metros, Diâmetro máximo: 30 milímetros, Largura: 57 milímetros.</p>

<p><strong>NFC</strong>: tecnologia presente permitindo o pagamento utilizando cartões com tecnologia contactless.</p>

<h2 id="arquitetura">Arquitetura</h2>

<h3 id="sobre">Sobre</h3>

<p>A plataforma Cielo LIO é baseada em Android que consiste em:</p>

<ul>
  <li>Uma loja de aplicativos <a href="https://developercielo.github.io/manual/cielo-lio#cielo-store">Cielo Store</a> para os desenvolvedores publicarem seus aplicativos e os disponibilizarem para os estabelecimentos comerciais (lojistas).</li>
  <li>Uma plataforma com arquitetura em nuvem e APIs REST que permite a integração com sistemas de automação comercial de parceiros.
Acesse Documentação da <a href="https://developercielo.github.io/manual/cielo-lio#integra%C3%A7%C3%A3o-remota">Integração Remota</a></li>
  <li>Chamadas via intenet, de forma que aplicativos de parceiros possam se integrar com as funcionalidades de pagamento da Cielo LIO.
Acesse Documentação da <a href="https://developercielo.github.io/manual/cielo-lio#integra%C3%A7%C3%A3o-via-deeplink7">Integração via Deeplink</a></li>
</ul>

<h3 id="modelos-de-integração-com-a-plataforma-cielo-lio">Modelos de integração com a plataforma Cielo LIO</h3>

<h4 id="integração-remota--cielo-lio-order-manager">Integração Remota | Cielo LIO Order Manager</h4>

<p>Conjunto de APIs que permitem que o cliente continue utilizando sua solução de PDV / Automação Comercial com todas as funcionalidades. No momento de realizar o pagamento, ocorre a integração com o gerenciador de pedidos (Order Manager) da Cielo LIO, de forma rápida, simples e segura.
<a href="https://developercielo.github.io/manual/cielo-lio#integração-remota">Ir para integração remota</a></p>

<h4 id="integração-via-deeplink">Integração via Deeplink</h4>

<p>A Cielo oferece integração via intents para comunicação por meio de deep links, permitindo que aplicativos Android se integrem a recursos como pagamento, impressão e cancelamento
<a href="https://developercielo.github.io/manual/cielo-lio#integra%C3%A7%C3%A3o-via-deeplink7">Ir para integração via Deeplink</a></p>

<h3 id="serviços-periféricos">Serviços periféricos</h3>

<p>A Cielo LIO também se integra com os seguintes periféricos de hardware:</p>

<p><strong>Impressoras Bluetooth</strong></p>

<p>É possível conectar a Cielo com impressoras bluetooth para realizar a impressão de recibos e outras informações importantes.</p>

<p>Já existem parceiros que estão utilizando impressoras Bluetooth das marcas Zebra, Datex, Leopardo integradas com a Cielo LIO</p>

<p>Todos os protocolos de comunicação e pareamento ficam sob responsabilidade do aplicativo do parceiro.</p>

<p><strong>Leitores de RFID</strong></p>

<p>Já existem parceiros que estão utilizando leitores RFID em suas soluções.</p>

<p>Todos os protocolos de comunicação e pareamento ficam sob responsabilidade do aplicativo do parceiro.</p>

<h2 id="especificações-técnicas-do-hardware-da-cielo-lio">Especificações técnicas do hardware da Cielo LIO</h2>

<p>A plataforma Cielo LIO teve seu sistema operacional próprio baseado em Android para os terminais LIO V2 e V3. Para os novos terminais utilizamos o Android Security OS.
Confira abaixo a tabela com as especificações técnicas da Cielo LIO:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/lio_v2_small.png" alt="LIO V2" /></th>
      <th><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/images/cielo-lio-on_reduce.png" alt="LIO V3" /></th>
      <th><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/dx-pequeno1.png" alt="DX8000" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Versão</td>
      <td><strong>LIO V2</strong></td>
      <td><strong>LIO V3</strong></td>
      <td><strong>DX8000</strong></td>
    </tr>
    <tr>
      <td>Sistema operacional</td>
      <td>Android OS Cielo 6.0 (Marshmallow)</td>
      <td>Android 7.1 (Nougat)</td>
      <td>Android 10 Security OS</td>
    </tr>
    <tr>
      <td>Memória</td>
      <td>2GB RAM</td>
      <td>1GB RAM</td>
      <td>1GB RAM</td>
    </tr>
    <tr>
      <td>Armazenamento</td>
      <td>16 GB</td>
      <td>8 GB</td>
      <td>8 GB</td>
    </tr>
    <tr>
      <td>Dual Chip</td>
      <td>-</td>
      <td>-</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>Frequência</td>
      <td>2.4 GHz</td>
      <td>2.4GHz + 5.0 GHz</td>
      <td>2.4GHz + 5.0 GHz</td>
    </tr>
    <tr>
      <td>Tipo do SIM Card</td>
      <td>micro SIM (3FF)</td>
      <td>1 SIM card (2FF) + ESIM</td>
      <td>2 SIM card (2FF) + ESIM</td>
    </tr>
    <tr>
      <td>Frequência GSM Mhz</td>
      <td>Quad-Band 850/900/1800/1900</td>
      <td>Quad-Band</td>
      <td>Quad-Band</td>
    </tr>
    <tr>
      <td>Tamanho em polegadas</td>
      <td>5.5”</td>
      <td>5”</td>
      <td>5.5”</td>
    </tr>
    <tr>
      <td>Tipo de tela</td>
      <td>AMOLED</td>
      <td>AMOLED</td>
      <td>AMOLED</td>
    </tr>
    <tr>
      <td>Resolução da tela</td>
      <td>720 x 1280</td>
      <td>720 x 1280</td>
      <td>720 x 1280</td>
    </tr>
    <tr>
      <td>Densidade de pixels</td>
      <td>267 ppi</td>
      <td>267 ppi</td>
      <td>1080p</td>
    </tr>
    <tr>
      <td>Câmera</td>
      <td>8 Mega Pixels</td>
      <td>5 Mega Pixels</td>
      <td>5 Mega Pixels</td>
    </tr>
    <tr>
      <td>Resolução da câmera</td>
      <td>4160 x 3120 pixels</td>
      <td>4160 x 3120 pixels</td>
      <td>4160 x 3120 pixels</td>
    </tr>
    <tr>
      <td>Flash</td>
      <td>Flash LED</td>
      <td>Flash LED</td>
      <td>Flash LED</td>
    </tr>
    <tr>
      <td>USB</td>
      <td>USB 2.0 Micro-B (Micro-USB) Somente Energia</td>
      <td>USB Tipo C</td>
      <td>USB Tipo C</td>
    </tr>
    <tr>
      <td>Bluetooth</td>
      <td>Versão 4.0 com A2DP/LE</td>
      <td>Versão 4.2</td>
      <td>Versão 4.2</td>
    </tr>
    <tr>
      <td>WiFi</td>
      <td>802.11 b/g/n (2.4GHz)</td>
      <td>802.11a/b/g/n(2.4GH+5.0GHz)</td>
      <td>802.11a/b/g/n(2.4GH+5.0GHz)</td>
    </tr>
    <tr>
      <td>GPS</td>
      <td>A-GPS</td>
      <td>GPS + A-GPS, Glonass</td>
      <td>GPS + A-GPS, Glonass</td>
    </tr>
    <tr>
      <td>Sensores</td>
      <td>Acelerômetro, Proximidade e Luminosidade</td>
      <td>Acelerômetro, Prox. e Lumin</td>
      <td>Acelerômetro, Prox. e Lumin</td>
    </tr>
    <tr>
      <td>Saída de áudio</td>
      <td>Audio Jack 3.5mm</td>
      <td>Audio Jack 3.5mm</td>
      <td>-</td>
    </tr>
    <tr>
      <td>Peso</td>
      <td>507 g</td>
      <td>417 g</td>
      <td>450 g</td>
    </tr>
    <tr>
      <td>Altura</td>
      <td>46mm</td>
      <td>70mm</td>
      <td>198mm</td>
    </tr>
    <tr>
      <td>Largura</td>
      <td>81mm</td>
      <td>82mm</td>
      <td>83mm</td>
    </tr>
    <tr>
      <td>Comprimento</td>
      <td>228mm</td>
      <td>205mm</td>
      <td>62.5mm</td>
    </tr>
  </tbody>
</table>

<h2 id="rotação-de-tela-na-cielo-lio">Rotação de tela na Cielo LIO</h2>

<p>Na LIO é possível controlar a orientação da tela. Por padrão, a orientação da tela exibida é livre e definida de acordo com o acelerômetro do equipamento.</p>

<p>Caso o desenvolvedor deseje controlar e usar de forma personalizada a orientação de tela da Cielo LIO, este deverá utilizar de acordo com a documentação do Android.</p>

<p>Acesse o item: android:screenOrientation para obter maiores informações.:</p>

<p><strong>Atenção</strong>: <a href="https://developer.android.com/guide/topics/manifest/activity-element.html">Documentação Oficial do Android</a></p>

<h2 id="dados-móveis-na-cielo-lio">Dados Móveis na Cielo LIO</h2>

<p>A Cielo LIO já vem configurada com um SIM Card. A operadora do SIM Card é definida de acordo com o endereço de cadastro do estabelecimento comercial.</p>

<p>A Cielo envia o SIM Card da melhor operadora de acordo com o endereço de cadastro da LIO solicitada.</p>

<p>Esse SIM Card permite a conexão com a tecnologia 3G/4G da Cielo LIO e possui um pacote de dados ilimitado.</p>

<h1 id="dicas-para-desenvolvedores">Dicas para desenvolvedores</h1>

<p>O guia abaixo fornece as informações necessárias para ajudar os desenvolvedores a integrar ou desenvolver seus aplicativos na plataforma Cielo LIO da melhor maneira possível, de modo a oferecer uma experiência excelente para os estabelecimentos comerciais.</p>

<p>Recomenda-se a leitura detalhada na documentação da Cielo LIO presente no Portal de Desenvolvedores. Essa documentação reúne informações importantes para questões de simplicidade moderada.</p>

<h2 id="melhores-práticas-com-a-plataforma-cielo-lio">Melhores práticas com a plataforma Cielo LIO</h2>

<h3 id="segurança-de-dados-e-privacidade">Segurança de dados e Privacidade</h3>

<ul>
  <li>Proteja os dados confidenciais de clientes e funcionários. Não exponha publicamente nomes, endereços ou números de telefone.</li>
  <li>Nunca exponha tokens de autenticação ou senhas de qualquer tipo.</li>
  <li>O parceiro deve fornecer os seus dados de suporte para que os estabelecimentos comerciais (lojistas) entrem em contato no caso de problemas e/ou dúvidas.</li>
</ul>

<h3 id="rate-limiting">Rate Limiting</h3>

<ul>
  <li>As solicitações da Automação Comercial ou PDV devem ser escalonadas o máximo possível para evitar rajadas de alto volume de tráfego.</li>
  <li>“Cache” seus próprios dados quando você precisar armazenar valores especializados ou revisar rapidamente conjuntos de dados muito grandes.</li>
  <li>Não crie multi-thread com chamadas POST, pois esse comportamento pode criar atrasos sistêmicos devido a deadlocks.</li>
  <li>Minimize o uso de dados. Os estabelecimentos comerciais (lojistas) podem estar utilizando conexão com dados móveis limitados.</li>
</ul>

<h3 id="código-de-qualidade">Código de Qualidade</h3>

<p>Seu aplicativo deve estar em conformidade com as práticas de programação Java e Android convencionais de acordo com as diretrizes para desenvolvedores do Android.</p>

<ul>
  <li>Princípios de Design Orientado a Objetos (S.O.L.I.D.).</li>
  <li>Diretrizes de estilo Java.</li>
  <li>Entenda a diferença entre <code class="language-plaintext highlighter-rouge">compileSdkVersion</code>, <code class="language-plaintext highlighter-rouge">targetSdkVersion</code>, e <code class="language-plaintext highlighter-rouge">minSdkVersion</code>.</li>
  <li>Aproveite os botões nativos do Android, como os botões “Voltar” e “Início”.</li>
  <li>Otimize as operações visando o baixo consumo da bateria.</li>
  <li>O aplicativo deve atender às necessidades dos estabelecimentos comerciais (lojistas) da Cielo.</li>
  <li>Seu aplicativo deve ter uma boa experiência de ponta a ponta, garantindo a comunicação correta entre todos os fluxos, principalmente os retornos de pagamento da Cielo LIO.</li>
</ul>

<h3 id="recursos-de-imagem">Recursos de imagem</h3>

<ul>
  <li>Os ícones devem estar em conformidade com o dimensionamento padrão do Android</li>
  <li>Seguir o <a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design">Guideline do Android</a></li>
</ul>

<h3 id="utilização-e-usabilidade">Utilização e Usabilidade</h3>

<ul>
  <li>Recomendamos aos desenvolvedores que integrem algum tipo de utilitário de relatório de falhas em seus produtos Android. Isso ajudará você a manter a consciência operacional do seu produto. Sugerimos a utilização do <a href="http://try.crashlytics.com">Crashlytics</a></li>
  <li>Os desenvolvedores podem coletar métricas sobre o uso do seu aplicativo. Isso irá ajudá-los a construir melhores produtos e aumentar a conscientização a respeito de quaisquer questões impactantes.</li>
  <li>Garantir que o aplicativo funcione de forma otimizada, evitando que ocorram crash e demora na resposta por processamento da aplicação. Seu aplicativo será usado em condições de trabalho de ritmo rápido e dinâmico, portanto esforce-se para obter fluxos de trabalho claros, fáceis de usar e robustos, com o mínimo de passos possível.</li>
  <li>O design deve enfatizar clareza e acessibilidade – alto contraste, fontes legíveis, texto grande e entradas.</li>
  <li>Deixar claro os termos de aceite da aplicação e prover o suporte necessário ao usuário no que tange o serviço disponibilizado.</li>
  <li>Se você estiver adaptando um aplicativo desenvolvido para outra plataforma, verifique se ele só inclui recursos e botões relevantes para o usuário da Cielo LIO.</li>
  <li>Se o seu aplicativo incluir um componente voltado para o cliente, seu projeto refletirá sobre o negócio usando seu aplicativo. Essas interfaces devem ser agradáveis e profissionais.</li>
  <li>Recomenda-se a utilização do <a href="https://material.io">Material Design</a> para desenvolvimento das aplicações para a Cielo LIO. Esta recomendação tem como objetivo facilitar o uso de boas práticas de design para o desenvolvimento de aplicações móveis.</li>
  <li>Seu aplicativo será usado em condições de trabalho de ritmo rápido e dinâmico. Esforce-se para obter fluxos de trabalho claros, fáceis de usar e robustos, com o mínimo de passos possível.</li>
</ul>

<h1 id="desenvolva-seu-aplicativo-para-cielo-lio">Desenvolva seu aplicativo para Cielo LIO</h1>

<h2 id="introdução">Introdução</h2>

<p>Com a Cielo LIO é possível que empresas e parceiros tenham seu aplicativo rodando na plataforma da Cielo. Esses aplicativos podem ou não estar integrados com o pagamento, tudo vai depender da finalidade da empresa ou parceiro.</p>

<p>Abaixo, você encontra todas as informações necessárias para desenvolver um aplicativo para a Cielo LIO.</p>

<h2 id="ambiente-de-desenvolvimento">Ambiente de Desenvolvimento</h2>

<p>A Cielo recomenda que seja utilizada a IDE do Android Studio (versão 2.2.2 ou superior), visando garantir o funcionamento do
aplicativo na plataforma Cielo LIO.</p>

<p>Para mais detalhes sobre a instalação e configuração do Android Studio, <a href="https://developer.android.com/index.html">clique aqui</a></p>

<p>Para a criação de um novo projeto no Android Studio, <a href="https://developer.android.com/training/basics/firstapp/creating-project.html">clique aqui</a></p>

<h2 id="linguagem-de-programação">Linguagem de Programação</h2>

<p>A Cielo LIO aceita aplicativos desenvolvidos em Java ou Kotlin, como linguagens oficiais. As demais linguagens são permitidas, porém é de responsabilidade do desenvolvedor.</p>

<p>Recomendamos que essas linguagens sejam utilizadas para garantir o funcionamento e facilidade de integração com a Cielo LIO.</p>

<h2 id="cielo-os">Cielo OS</h2>

<p>O sistema operacional da plataforma Cielo LIO foi personalizado e, com isso, surgiu o Cielo OS, que é baseado em Android.</p>

<h2 id="versão-target-da-aplicação">Versão target da aplicação</h2>

<p>Recomenda-se que o desenvolvedor utilize as versões de sdk mínima 24 e target 29, para garantir compatibilidade com os modelos e versões do Android da LIO. <strong>Se o target estiver menor do que a versão 29, não estará apto para ser distribuído para os nossos terminais.</strong></p>

<blockquote>
  <p>Para que o seu aplicativo funcione corretamente em todos os terminais, deve-se garantir que o aplicativo esteja de acordo com as definições de uso do Android 10 (Ex: permissões, notificações, uso de serviço em foreground).</p>
</blockquote>

<h2 id="bloqueando-pagamento-fora-do-aplicativo">Bloqueando pagamento fora do Aplicativo</h2>

<p>Você poderá configurar seu App na Cielo LIO como um aplicativo padrão, ou seja, você pode deixar o pagamento disponível apenas para o seu aplicativo, bloqueando pagamentos via interface da Cielo LIO. Para isso você deve abrir um ticket no portal do desenvolvedor informando o package name do aplicativo e solicitando que o mesmo seja definido como frente de caixa.</p>

<p>Após a aprovado/certificado, o App estará disponível para ser selecionado com App Padrão de venda e com isso você consegue deixar o pagamento disponível apenas pelo seu aplicativo</p>

<h3 id="intent-para-receber-o-valor-da-venda">Intent para receber o valor da venda</h3>

<p>A Intent informada ao submeter o App, deve ser a tela inicial de venda do seu App.</p>

<p>O parâmetro de valor citado no item anterior, serve para receber o valor da venda, caso o usuário inicie uma transação usando o App padrão da Cielo, ao invés de usar o App Padrão selecionado.</p>

<p>Esse valor é passado no formato de centavos, sem separação dos decimais. Por exemplo, o valor 152,25 é passado como 15225, ficando por conta do App fazer o tratamento e formatação.</p>

<p>Essa Intent será chamada em dois momentos:</p>

<ul>
  <li>
    <p>Quando o seu app estiver marcado como padrão, e o snap do Pinpad for conectado.</p>
  </li>
  <li>
    <p>Quando o seu app estiver marcado como padrão, e uma transação for iniciada usando o App Cielo Vender (App padrão vendas da Cielo). Neste cenário o valor digitado no App Cielo Vender será passado como Intent Extra para o seu App.</p>
  </li>
</ul>

<p>Caso possua algúma dúvida na configuração desse recurso, você pode abrir um ticket em nosso suporte: <a href="https://devcielo.zendesk.com/hc/pt-br/requests/new?ticket_form_id=360000614392">Clique aqui</a></p>

<h2 id="recursos-indisponíveis">Recursos Indisponíveis</h2>

<p>Ao personalizar o Android da Cielo LIO, foram removidos alguns recursos para garantir o desempenho e a segurança da plataforma.</p>

<p>Seguem abaixo os recursos removidos da Cielo LIO:</p>

<p><strong>Google Play Services</strong>: Todos os serviços, APIs e apps do Google foram removidos do sistema operacional. Consequentemente, não será possível utilizar as bibliotecas que dependem desses recursos do Google.</p>

<p><strong>Componente Webview</strong>: Este recurso visual foi removido com o objetivo de garantir a segurança na plataforma e evitar que, a partir dos aplicativos instalados na Cielo LIO, seja possível acessar links e conteúdos externos.</p>

<blockquote>
  <p><strong>Atenção</strong>: A Cielo não permite que o aplicativo do cliente/parceiro seja desenvolvido utilizando o recurso WebView. Esse recurso visual deixa a plataforma da Cielo LIO vulnerável. Caso a aplicação esteja utilizando o WebView, esta não atenderá aos parâmetros de certificação e não será disponibilizada na Cielo Store.</p>
</blockquote>

<h2 id="sugestões-de-substitutos">Sugestões de substitutos</h2>

<h3 id="push-notifications">Push-Notifications</h3>

<p>Recurso exclusivo do Google Services, portanto não está presente na Cielo LIO.</p>

<p><strong>Alternativa</strong>: JobScheduler</p>

<p><strong>Descrição</strong>: É uma API para agendar vários tipos de trabalhos contra a estrutura que será executada no próprio processo da sua aplicação. Permitindo a cada ciclo de tempo que o aplicativo realize uma busca em nossos serviços de Backend.</p>

<p>O JobScheduler é o mais indicado devido a performance em relação ao uso de bateria, fora as muitas outras opções que ele disponibiliza (Ex: Job rodar somente quando o smartphone estiver carregando).</p>

<p>Referência: <a href="https://developer.android.com/reference/android/app/job/JobScheduler.html">Clique aqui</a></p>

<h3 id="serviços-de-localização-gps">Serviços de Localização (GPS)</h3>

<p>Recurso exclusivo do Google Services, portanto não está presente na Cielo LIO.</p>

<p><strong>Alternativa</strong>: Location Manager</p>

<p><strong>Descrição</strong>: Essa classe fornece acesso aos serviços de localização do sistema. Esses serviços permitem que os aplicativos obtenham atualizações periódicas da localização geográfica do dispositivo ou que iniciem uma Intenção especificada pela aplicação quando o dispositivo entra na proximidade de uma determinada localização geográfica.</p>

<p>Referência: <a href="https://developer.android.com/reference/android/location/LocationManager.html">Clique aqui</a></p>

<h3 id="serviços-de-mapas">Serviços de Mapas</h3>

<p>Recurso exclusivo do Google Services, portanto não está presente na Cielo LIO.</p>

<p><strong>Alternativa</strong>: MapBox</p>

<p><strong>Descrição</strong>: Uma plataforma de mapeamento de código aberto para mapas personalizados. Nossas APIs e SDKs são os blocos de construção para integrar a localização em qualquer aplicativo móvel ou web.</p>

<p>Referência: <a href="https://www.mapbox.com">Clique aqui</a></p>

<h2 id="apks-removidas-do-cielo-os">APKs Removidas do Cielo OS</h2>

<p>Abaixo, segue uma tabela com todas as APKs que foram removidas do Cielo OS e que, consequentemente, não estão disponíveis para a Cielo LIO:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BasicSmsReceiver</td>
      <td>FileManager</td>
      <td>PhaseBeam</td>
    </tr>
    <tr>
      <td>Browser</td>
      <td>Galaxy4</td>
      <td>QuickSearchBox</td>
    </tr>
    <tr>
      <td>Calculator</td>
      <td>Gallery</td>
      <td>SoundRecorder</td>
    </tr>
    <tr>
      <td>Calendar</td>
      <td>HoloSpiralWallpaper</td>
      <td>SpeechRecorder</td>
    </tr>
    <tr>
      <td>CalendarProvider</td>
      <td>LiveWallpapers</td>
      <td>Todos</td>
    </tr>
    <tr>
      <td>CBMessageWidget</td>
      <td>LiveWallpaperPicker</td>
      <td>Videos</td>
    </tr>
    <tr>
      <td>Contacts</td>
      <td>MagicSmokeWallpapers</td>
      <td>VisualizationWallpapers</td>
    </tr>
    <tr>
      <td>ContactsCommon</td>
      <td>MtkWeatherProvider</td>
      <td>VoiceCommand</td>
    </tr>
    <tr>
      <td>DataTransfer</td>
      <td>Mms</td>
      <td>VoiceDialer</td>
    </tr>
    <tr>
      <td>Dialer</td>
      <td>Music</td>
      <td>VoiceExtension</td>
    </tr>
    <tr>
      <td>Email</td>
      <td>MusicFX</td>
      <td>VoiceUnlock</td>
    </tr>
    <tr>
      <td>Exchange2</td>
      <td>NlpService</td>
      <td>WallpaperCropper</td>
    </tr>
    <tr>
      <td>FMRadio</td>
      <td>NoiseField</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="cielo-store-dev-console">Cielo Store Dev Console</h1>

<h2 id="sobre-a-plataforma">Sobre a plataforma</h2>

<p>A plataforma conhecida como Dev Console, é o ambiente exclusivo para o desenvolvedor realizar o upload e gestão dos aplicativos desenvolvidos para as maquininhas Cielo.</p>

<p>No Dev Console você consegue visualizar todos os seus aplicativos publicados sejam eles aplicativos privados ou públicos, realizar a gestão e distribuição dos aplicativos.</p>

<p>Todo aplicativo passa pela certificação de um time especializado antes de ser disponibilizado na Cielo Store (loja pública) ou distribuído para os estabelecimentos comerciais associados (loja privada).</p>

<p><a href="https://www.cieloliostore.com.br/sign-in">Clique aqui</a> para fazer seu cadastro no Dev Console.</p>

<p>Após cadastrar sua conta e fazer o login, exibirá um tutorial com os primeiros passos para integração do seu aplicativo. Esse tutorial irá te ajudar ao longo da sua jornada e está disponível para consulta a qualquer momento através do ícone (ajuda).</p>

<h2 id="solicitação-de-máquina-e-credenciamento">Solicitação de máquina e credenciamento</h2>

<p>Para solicitar uma LIO, acesse o <em>Portal de Desenvolvedores &gt; Suporte &gt; Cielo LIO &gt; Envie sua pergunta &gt; Solicitação LIO DEV / Credenciamento EC Cielo</em>. Nessa mesma solicitação, será realizado o credenciamento EC Cielo. Esse credenciamento é necessário para: a solicitação da LIO; a publicação e distribuição do aplicativo em produção; e o recebimento de pagamentos referente aos aplicativos publicados em loja pública.</p>

<h2 id="loja-pública">Loja Pública</h2>

<p>Os aplicativos públicos ficam disponíveis na Cielo Store para download. Todos os clientes que utilizam a Cielo Store podem instalar o aplicativo.</p>

<h3 id="upload-de-novos-aplicativos-públicos">Upload de novos aplicativos públicos</h3>

<p>Para realizar o upload de um novo aplicativo público, siga os passos abaixo:</p>

<ul>
  <li>Acesse a plataforma Dev Console;</li>
  <li>No topo superior direito, clique em <em>“+ Aplicativo”</em>;</li>
  <li>Para fazer o upload em loja pública, clique no botão <em>“Subir na Cielo Store”</em>, onde apresenta uma descrição sobre a loja:</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/DevConsole1.png" alt="DevConsole 1" /></p>

<ul>
  <li>Após a seleção, será exibido o modal: <em>“Organize estas informações”</em>, clique em <em>“Continuar”</em> e realize o upload do arquivo do aplicativo com o formato .apk com o tamanho de até 200MB. <strong>ATENÇÃO: Após o upload do arquivo não é possível trocar de loja pública para privada.</strong></li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/DevConsole2.png" alt="DevConsole 2" /></p>

<h3 id="preenchendo-os-formulários">Preenchendo os formulários</h3>

<p>Para o aplicativo seguir para etapa de Certificação, é necessário o preenchimento dos formulários. Assim que realizar o upload do arquivo do aplicativo, você será direcionado para o primeiro formulário. Caso não queira iniciar o preenchimento neste momento, basta clicar na seta <em>“Voltar”</em>.</p>

<p>Quando quiser retomar o preenchimento dos formulários, acesse a home <em>Meus aplicativos</em>, na aba <em>Apps públicos</em>, clique em <em>“Ver detalhes”</em> do aplicativo, e entre na aba <em>Dados do App</em>.</p>

<p>No formulário <em>Sobre o aplicativo</em> estão as informações que irá compor a vitrine do seu aplicativo na Cielo Store.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/DevConsole3.png" alt="DevConsole 3" /></p>

<p>No formulário <em>Modelo de Cobrança</em>, você escolhe a modalidade de cobrança do seu aplicativo, o nome do plano e a descrição, são 3 tipos de modalidade:</p>

<ul>
  <li>Gratuito: não é cobrado nenhum valor.</li>
  <li>Fixo: valor cobrado uma única vez, sendo gratuito por um mês na primeira compra.</li>
  <li>Mensal: valor cobrado mensalmente, sendo gratuito por um mês na primeira compra.</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/DevConsole4.png" alt="DevConsole 4" /></p>

<p>No formulário <em>Suporte</em>, você informa os canais de comunicação que o cliente pode entrar em contato, e o termo de uso do seu aplicativo que deve ser disponibilizado.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/DevConsole5.png" alt="DevConsole 5" /></p>

<p>No formulário <em>Certificação</em>, você informa os dados para o time especializado da Cielo realizar os testes do aplicativo, garantindo que o app esteja de <strong>acordo com as regras e critérios estabelecidos pela Cielo. Após o aplicativo ser aprovado e promovido para produção, o app ficará disponível na Cielo Store.</strong></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/DevConsole6.png" alt="DevConsole 6" /></p>

<h3 id="nova-versão-de-aplicativos-públicos">Nova versão de aplicativos públicos</h3>

<p>Caso realize alguma alteração ou atualização no aplicativo público, você deverá fazer o upload de uma nova versão do aplicativo e utilizar a mesma assinatura da versão anterior. Para isso, acesse a home <em>Meus aplicativos</em>, na aba <em>Apps públicos</em>, clique em <em>“Ver detalhes”</em> do aplicativo e depois no botão <em>“+ Nova versão”</em> para fazer o upload de uma nova versão. É obrigatório:</p>

<ul>
  <li>Garantir que a versão mais recente do aplicativo tenha o mesmo package name da versão anterior;</li>
  <li>Alterar o <em>“version code”</em> e o <em>“version name”</em> dentro do arquivo manifest do aplicativo;</li>
  <li>Conferir ou atualizar as informações dos formulários e preencher os dados para certificação.</li>
</ul>

<h3 id="critérios-de-certificação-de-aplicativos-da-loja-pública">Critérios de certificação de aplicativos da loja pública</h3>

<p>O objetivo da certificação de aplicativos é garantir que todos os aplicativos presentes nas maquininhas Cielo sejam públicos ou privados, <strong>estejam de acordo com as regras e critérios estabelecidos pela Cielo.</strong></p>

<p><strong>Critérios para aprovação da certificação de aplicativo público:</strong></p>

<ul>
  <li>Realizar testes em desenvolvimento antes de nos encaminhar a versão. <a href="https://developercielo.github.io/manual/cielo-lio#ambiente-sandbox-%E2%80%93-emulador">Veja como baixar o Emulador</a>.</li>
  <li>O cadastro do aplicativo deve ser de fácil acesso para o cliente.</li>
  <li>Não pode ter um sistema ERP conectado.</li>
  <li>Preencher os termos de uso corretamente, mostrando as normas do serviço que está sendo oferecido.</li>
  <li>Preencher corretamente todos os formulários: <em>Sobre o aplicativo, Modelo de Cobrança, Suporte e Certificação.</em></li>
  <li>O vídeo que irá compor a vitrine do seu aplicativo na Cielo Store, deve ser com a URL do YouTube, e de visibilidade <em>“Público”</em> ou <em>“Não listado”</em>, não é permitido vídeo privado.</li>
  <li>A versão que será certificada deve maior do que a versão anterior. Exemplo: versão anterior 1.0 e a versão atual 1.1.</li>
  <li>Caso o aplicativo tenha webview, não ficar disponível a URL para a troca de URL dentro do aplicativo. A URL não deverá aparecer.</li>
  <li>Garantir que o fluxo de pagamento funcione corretamente.</li>
  <li>Gerar valores para teste até R$ 0,05 centavos.</li>
  <li><strong>IMPORTANTE: Qualquer valor transacionado maior do que R$ 0,05 devem ser cancelados para que não haja efetivação da transação.</strong></li>
  <li>100% das transações dever ser via Cielo.</li>
  <li>Deve ficar disponível para todos Clientes da Cielo Store.</li>
  <li>Imagem, ícones e screenshot devem estar formato correto e elegível</li>
  <li>Manter seu app sempre nas versões mais atuais do SDK. Confira as versões atuais através do <a href="https://desenvolvedores.cielo.com.br/api-portal/pt-br/content/sdk-cielo-lio">Portal do Dev na área logada</a>.</li>
</ul>

<p><strong>O que o app não pode ter?</strong></p>

<ul>
  <li>Não conter palavras Cielo ou Lio.</li>
  <li>Não conter palavrão.</li>
  <li>Não exibir de imagens inapropriadas.</li>
  <li>Não exibir imagens ou nomes de concorrentes.</li>
  <li>Não conter sistema ERP conectado.</li>
  <li>Não conter acesso restrito e personalizado para um cliente.</li>
  <li>Não usar o logo da Cielo.</li>
</ul>

<blockquote>
  <p><strong>ATENÇÃO: Qualquer informação necessária que esteja faltando, resultará na reprovação automática do aplicativo. O SLA de certificação são de 48h úteis.</strong></p>
</blockquote>

<p><strong>Após o aplicativo ser certificado. Quais são os próximos passos?</strong></p>

<ul>
  <li>O desenvolvedor deverá promover seu aplicativo para produção, acesse a home <em>Meus aplicativos</em>, na aba <em>Apps públicos</em>, clique em <em>“Ver detalhes”</em> do aplicativo, depois dentro da aba Versões clique no botão <em>“Enviar para produção”</em>.</li>
  <li>Após enviado para produção, o aplicativo será disponibilizado na vitrine da Cielo Store para os clientes realizarem a compra (download) do aplicativo.</li>
</ul>

<blockquote>
  <p><strong>IMPORTANTE: Somente aplicativos de loja pública são disponibilizados na Cielo Store.</strong></p>
</blockquote>

<h3 id="compra-de-aplicativo-públicos-na-cielo-lio">Compra de Aplicativo Públicos na Cielo LIO</h3>

<p>Todos os aplicativos públicos certificados e promovidos para produção pelo desenvolvedor, ficam disponíveis no marketplace Cielo Store dentro das maquininhas Cielo.</p>

<p>Os estabelecimentos comerciais (lojistas) que desejam adquirir o aplicativo, precisam clicar no botão <em>“Instalar”</em> ou <em>“Comprar”</em> para baixar aplicativo escolhido na Cielo Store, em seguida, é necessário digitar as credenciais utilizadas no site Cielo para autenticação e débito do valor do aplicativo. Após a conclusão da compra, o app estará disponível para ser utilizado nas maquininhas Cielo.</p>

<p>A desinstalação do app deverá ser realizada também através da Cielo Store, e após a desinstalação será realizado o cancelamento da cobrança, caso o aplicativo seja pago e tiver ultrapassado o mês de gratuidade.</p>

<blockquote>
  <p><strong>IMPORTANTE: Todos os aplicativos são gratuitos por um mês na primeira compra.</strong></p>
</blockquote>

<h3 id="download-de-aplicativo-públicos-nas-maquininhas-cielo">Download de aplicativo públicos nas maquininhas Cielo</h3>

<p>Para realizar o download de aplicativos públicos na Cielo LIO, clique na aba <em>Apps</em>, entre no app <em>Cielo Store</em> e escolha o aplicativo que deseja, clique no botão <em>“Instalar”</em> ou <em>“Comprar”</em> para baixar aplicativo escolhido.</p>

<p>Para consultar os pagamentos referente aos aplicativos publicados em loja pública (Cielo Store), crie uma conta no site <a href="https://www.cielo.com.br/contrate/">Cielo</a>. Para fazer o cadastro, clique em <em>“Acessar minha conta”</em>, depois em <em>“Primeiro acesso”</em> e informe os dados requisitados.</p>

<blockquote>
  <p><strong>Importante:</strong> É necessário realizar o <strong>credenciamento EC Cielo</strong> antes de criar o cadastro no site Cielo. Veja o passo a passo na seção Solicitação de máquina e credenciamento deste manual.</p>
</blockquote>

<h2 id="loja-privada">Loja Privada</h2>

<p>Os aplicativos privados são indicados para desenvolvedores que querem permitir a distribuição de soluções personalizadas para um cliente específico e de acesso restrito. Pode ter um sistema ERP (Sistema de Gestão Empresarial) conectado.</p>

<p>Se você optou pela loja privada, é necessário criar uma loja para o envio do app. Para isso, acesse a plataforma Dev Console, clique em <em>Lojas privadas</em>, depois no botão + <em>Criar loja privada</em>, digite o nome da loja e clique em <em>Concluir</em>.</p>

<p>Sem loja criada:</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/LojaPrivada1.png" alt="LojaPrivada1" /></p>

<p>Com loja criada:</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/LojaPrivada2.png" alt="LojaPrivada2" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem3.png" alt="Imagem3" /></p>

<p>Com a loja privada criada, você poderá publicar seu aplicativo no Dev Console selecionando sua loja, esta ação é essencial para realizar a distribuição de aplicativos privados.</p>

<h3 id="upload-de-novos-aplicativos-privados">Upload de novos Aplicativos Privados</h3>

<p>Para realizar o upload de um novo aplicativo privado, siga os passos a seguir:</p>

<ul>
  <li>Acesse a plataforma Dev Console;</li>
  <li>No topo superior direito, clique em <em>“+ Aplicativo”</em>;</li>
  <li>Para fazer o upload em loja privada, clique no botão <em>“Subir na Loja Privada”</em>, onde apresenta uma descrição sobre a loja:</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/NovoAPPNovaLoja.png" alt="NovoAPPNovaLoja" /></p>

<ul>
  <li>Após a seleção, será exibido um modal: <em>“Organize estas informações”</em>, clique em <em>“Continuar”</em> e selecione a loja privada, também é possível criar a loja privada no <em>Clique aqui</em> abaixo do select. Basta digitar o nome da loja e clicar em <em>Concluir</em>.</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/NovoAPPNovaLoja3.png" alt="NovoAPPNovaLoja3" /></p>

<ul>
  <li>Depois realize o upload do arquivo do aplicativo com o formato .apk com o tamanho de até 200MB. <strong>ATENÇÃO: Após o upload do arquivo não é possível trocar de loja privada para pública.</strong></li>
</ul>

<h3 id="preenchendo-os-formulários-1">Preenchendo os formulários</h3>

<p>Assim como na loja pública, para o aplicativo privado seguir para etapa de Certificação, é necessário o preenchimento dos formulários. Ao realizar o upload do arquivo do aplicativo, você será direcionado para o primeiro formulário. Caso não queira iniciar o preenchimento neste momento, basta clicar na seta <em>“Voltar”</em>.</p>

<p>Quando quiser retomar o preenchimento dos formulários, acesse a home <em>Meus aplicativos</em>, na aba Apps privados, clique em <em>“Ver detalhes”</em> do aplicativo, e entre na aba <em>Dados do App</em>.</p>

<p>No formulário <em>Sobre o aplicativo</em> estão as informações que serão exibidas no Portal do Desenvolvedor.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/NovoAplicativo3.png" alt="NovoAplicativo3" /></p>

<p>No formulário <em>Suporte</em>, você informa os canais de comunicação que o cliente pode entrar em contato, e dá o aceite referente a negociação dos valores. <strong>IMPORTANTE: O recebimento dos valores do aplicativo privado é negociado entre parceiro e cliente.</strong></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/NovoAplicativo4.png" alt="NovoAplicativo4" /></p>

<p>No formulário <em>Certificação</em>, você informa os dados para o time especializado da Cielo realizar os testes do aplicativo, garantindo que o app esteja de <strong>acordo com as regras e critérios estabelecidos pela Cielo. Após o aplicativo ser aprovado e promovido para produção, o app ficará disponível para todos os clientes associados à loja privada selecionada.</strong></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/NovoAplicativo5.png" alt="NovoAplicativo5" /></p>

<h3 id="nova-versão-de-aplicativos-privados">Nova versão de aplicativos privados</h3>

<p>Caso realize uma alteração ou atualização no aplicativo privado, você deverá fazer o upload de uma nova versão do aplicativo e utilizar a mesma assinatura da versão anterior. Para isso, acesse a home Meus aplicativos, na aba Apps privados, clique em <em>“Ver detalhes”</em> do aplicativo e depois clique no botão <em>“+ Nova versão”</em> para fazer o upload de uma nova versão. É obrigatório:</p>

<ul>
  <li>Garantir que a versão mais recente do aplicativo tenha o mesmo package name da versão anterior;</li>
  <li>Alterar o <em>“version code”</em> e o <em>“version name”</em> dentro do arquivo manifest do aplicativo;</li>
  <li>Conferir ou atualizar as informações dos formulários e preencher os dados para certificação.</li>
</ul>

<p>Lembre-se, após o vínculo do aplicativo, não é possível alterar a loja.</p>

<p><strong>IMPORTANTE: Somente aplicativos de loja pública são disponibilizados na Cielo Store. Aplicativos privados são distribuídos pelo desenvolvedor aos estabelecimentos específicos.</strong></p>

<h3 id="critérios-de-certificação-de-aplicativos-da-loja-privada">Critérios de certificação de aplicativos da loja privada</h3>

<p>O objetivo da certificação de aplicativos é garantir que todos os aplicativos presentes nas maquininhas Cielo sejam públicos ou privados, <strong>estejam de acordo com as regras e critérios estabelecidos pela Cielo.</strong></p>

<p><strong>Critérios para aprovação da certificação de aplicativo privado:</strong></p>

<ul>
  <li>
    <p><strong>Realizar testes em desenvolvimento antes de nos encaminhar a versão para atualização. Veja como baixar o <a href="https://developercielo.github.io/manual/cielo-lio#ambiente-sandbox-%E2%80%93-emulador">Emulador</a></strong></p>
  </li>
  <li>A solução pode ser customizada para cliente específico.</li>
  <li>Acesso restrito e personalizado a um cliente.</li>
  <li>Pode ter um sistema ERP conectado.</li>
  <li>Preencher corretamente todos os formulários: <em>Sobre o aplicativo, Suporte e Certificação</em>.</li>
  <li>Caso o app tenha login, preencher os dados de acesso no formulário <em>Certificação</em>.</li>
  <li>A versão a ser certificada deve ser maior do que a versão anterior. Exemplo: versão anterior 1.0 e a versão atual 1.1.</li>
  <li>Caso o app tenha webview, não ficar disponível a URL para a troca de URL dentro do app. A URL não deverá aparecer.</li>
  <li>Caso o app rode em um servidor local, enviar um vídeo mostrando o fluxo do app. Os vídeos deverão ser atualizados conforme o envio de uma nova versão para certificação. Após gravar o vídeo do app, mostrar a versão e data do vídeo. Todo vídeo deve ser com a URL do YouTube, e de visibilidade “Público” ou “Não listado”, não é permitido vídeo privado.</li>
  <li>Garantir que o fluxo de pagamento funcione corretamente.</li>
  <li>Gerar valores para teste até R$ 0,05 centavos.</li>
  <li><strong>IMPORTANTE: Qualquer valor transacionado maior do que R$ 0,05 devem ser cancelados para que não haja efetivação da transação.</strong></li>
  <li>100% das transações dever ser via Cielo.</li>
  <li>Manter seu app sempre nas versões mais atuais do SDK. Confira as versões atuais através do <a href="https://desenvolvedores.cielo.com.br/api-portal/pt-br/content/sdk-cielo-lio">Portal do Dev</a> na área logada.</li>
  <li>Garantir que o aplicativo seja seguro para todos os públicos.</li>
</ul>

<p><strong>O que o app não pode ter?</strong></p>

<ul>
  <li>Não conter palavras Cielo ou Lio.</li>
  <li>Não conter palavrão.</li>
  <li>Não exibir de imagens inapropriadas.</li>
  <li>Não exibir imagens ou nomes de concorrentes.</li>
  <li>Não usar o logo da Cielo.</li>
</ul>

<blockquote>
  <p><strong>ATENÇÃO: Qualquer informação necessária que esteja faltando, resultará na reprovação automática do aplicativo. O SLA de certificação são de 48h úteis.</strong></p>
</blockquote>

<h3 id="distribuição-de-aplicativos-na-loja-privada">Distribuição de Aplicativos na loja privada</h3>

<p>Caso opte por desenvolver aplicativos privados e distribuir apenas para clientes específicos, você deve associar o EC do cliente a sua loja privada através do Dev Console. Somente o desenvolvedor que realizou a publicação do aplicativo poderá gerenciar a distribuição dos aplicativos da loja aos ECs do cliente.</p>

<p><strong>Para associar o EC a uma loja:</strong></p>

<p>Acesse no menu <strong>Lojas Privadas</strong>, clique em <strong>Todas as lojas</strong>, selecione a loja que deseja associar os ECs, em seguida clique no botão <strong>“+ Associar ECs”</strong>, e digite todos os ECs que serão associados àquela loja, depois clique no botão <strong>“Concluir”</strong> para finalizar.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/NovoAplicativo6.png" alt="NovoAplicativo6" /></p>

<h3 id="download-de-aplicativo-da-loja-privada-na-lio">Download de Aplicativo da loja privada na LIO</h3>

<p>Existe uma rotina automática que ocorre a cada 1 hora no terminal e verifica todos os apps que precisam ser disponibilizados ou atualizados em cada terminal. Caso o download não seja imediato, observar e orientar o cliente das seguintes situações:</p>

<p>1.A Cielo LIO deverá estar com a bateria acima de 50% e conectada a internet seja WI-FI ou 3G para realizar o download. 
2.Com os critérios acima, siga o passo a passo para forçar a atualização:</p>
<ul>
  <li>Clique na aba <em>“Ajuda”</em> &gt; <em>“Minha LIO”</em>, depois em <em>“Buscar atualizações”</em>.</li>
</ul>

<h2 id="status-de-um-aplicativo">Status de um aplicativo</h2>

<p>Todos os aplicativos publicados no Dev Console possuem os seguintes status:</p>

<p><strong>1 - Assinatura</strong></p>

<p>Após realizar o upload de um novo aplicativo ou nova versão, o aplicativo fica automaticamente com o status <em>“Aguardando assinatura”</em>, neste estágio o aplicativo será assinado para atender regra de segurança/PCI para que possa ser executado nos terminais.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/StatusDeAPlicativo.png" alt="StatusDeAPlicativo" /></p>

<p><strong>2 - Desenvolvimento</strong></p>

<p>Após ser assinado, o aplicativo fica automaticamente com o status <em>“Em desenvolvimento”</em>. Nesse estágio o desenvolvedor consegue realizar testes do seu aplicativo nas maquininhas Cielo, e caso precise fazer alguma correção, basta publicar uma nova versão do aplicativo pelo Dev Console e atualizar na maquininha.</p>

<p>Se não tiver LIO durante o desenvolvimento, solicite uma <strong>LIO para Desenvolvedores</strong>, veja o passo a passo na seção <strong>Solicitação de máquina e credenciamento</strong> deste manual.</p>

<p>Para testar um aplicativo nas maquininhas Cielo, acesse no Dev Console a home Meus aplicativos, clique em <em>“Ver detalhes”</em> do aplicativo, depois em <em>“Testar app”</em>, escolha o tipo de maquininha que o QR Code será gerado.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/StatusDeAplicativo2.png" alt="StatusDeAPlicativo2" /></p>

<p>Neste momento, basta abrir o aplicativo <em>Test Your App</em> na maquininha e escanear o QR Code. Após a leitura do QR Code, o download do app será realizado.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/StatusDeAplicativo3.png" alt="StatusDeAPlicativo3" /></p>

<p><strong>IMPORTANTE: Para a instalação de um app nas maquininhas Cielo, o terminal deverá estar com a bateria acima de 50% ou conectado no cabo de energia, e com internet WI-FI ou 3G.</strong></p>

<p><strong>3 - Certificação</strong></p>

<p>Concluído os testes, você pode enviar o aplicativo para certificação. Nessa etapa o time especializado da Cielo entra em ação para validar o funcionamento do aplicativo de acordo com a seção <strong>Critérios de certificação de aplicativos da loja pública e Critérios de certificação de aplicativos da loja privada</strong> deste manual.</p>

<p>Após o envio para certificação, o aplicativo fica automaticamente com o status <em>“Aguardando certificação”</em>. A certificação pode levar 48h úteis. Fique atento, você será avisado por e-mail quando a certificação for concluída.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/StatusDeAplicativo4.png" alt="StatusDeAPlicativo4" /></p>

<p><strong>4 - Produção</strong></p>

<p>Assim que o aplicativo for aprovado na certificação, o desenvolvedor poderá promover para produção. Para isso, é necessário clicar no botão <em>“Enviar para produção”</em>, se for:</p>

<ul>
  <li>Aplicativo público: fica disponível para download na Cielo Store. A instalação é manual, será realizada pelo cliente.</li>
  <li>Aplicativo privado: fica disponível para os clientes associados à loja privada. Sua instalação pode ser manual ou automática. A manual será realizada pelo cliente, por meio da maquininha no menu <em>Ajuda</em> &gt; <em>Minha LIO</em> &gt; <em>Buscar atualizações</em>. O app estará disponível somente na maquininha atualizada. Já a instalação automática, será realizada sem ação do cliente. O aplicativo será disponibilizado automaticamente para todos os ECs associados.</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/StatusDeAplicativo5.png" alt="StatusDeAplicativo5" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/StatusDeAplicativo6.png" alt="StatusDeAplicativo6" /></p>

<h2 id="mensagens-de-erro-dev-console">Mensagens de Erro Dev Console</h2>

<p>Segue os possíveis erros que o desenvolvedor pode encontrar durante a utilização do Dev Console:</p>

<table>
  <thead>
    <tr>
      <th>REFERÊNCIA</th>
      <th>MENSAGEM</th>
      <th>CENÁRIO</th>
      <th>O QUE FAZER?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>APP CREATED_ERROR</td>
      <td>Package name já existente</td>
      <td>Desenvolvedor tentou enviar uma aplicação com package name já existente na loja.</td>
      <td>Alterar no arquivo manifest o <code class="language-plaintext highlighter-rouge">packageName</code> da aplicação.</td>
    </tr>
    <tr>
      <td>APP APK_PARSER_ERROR</td>
      <td>Não foi possível salvar o arquivo</td>
      <td>Desenvolvedor tentou executar o upload de uma aplicação onde o arquivo manifest ou o apk está corrompido ou com problemas na configuração do arquivo manifest</td>
      <td>Rebuildar o apk e verificar se não existem erros no arquivo manifest do Android.</td>
    </tr>
  </tbody>
</table>

<p>Caso você desenvolvedor não encontre o erro nesta tabela, <a href="https://desenvolvedores.cielo.com.br/api-portal/pt-br/content/suporte">abra um ticket</a> para a equipe de suporte reportando o problema encontrado e lembre-se de listar as evidências do erro como prints de tela e mensagens de erro recebidas.</p>

<h1 id="ambiente-sandbox--emulador">Ambiente Sandbox – Emulador</h1>

<p>Oferecemos um aplicativo para facilitar a validação da sua integração com a LIO On</p>

<p>Esta solução elimina a necessidade de um hardware físico da LIO On em modo debug, que não é fornecido pela Cielo por razões de segurança.</p>

<p>O aplicativo processa as solicitações e simula as respostas para o software de integração, permitindo que os desenvolvedores realizem testes integrados e depurem suas aplicações durante o desenvolvimento, sem a necessidade de possuir uma Cielo LIO On.</p>

<p><strong>Como faço para validar minha solução a partir do aplicativo que simula a LIO?</strong></p>

<p>Primeiro baixe e instale o aplicativo, download <a href="https://s3-sa-east-1.amazonaws.com/cielo-lio-store/apps/lio-emulator/1.60.4/lio-emulator.apk">aqui no link</a></p>

<p>Caso tenha dificuldade com a instalação:</p>

<ol>
  <li>Acesse as configurações do seu aparelho e vá até o menu “Segurança”;</li>
  <li>Localize o item “Fontes desconhecidas”, na seção “Administração do dispositivo”</li>
  <li>Toque na chave ao lado e confirme sua escolha para passar a permitir a instalação de arquivos APK baixados por fontes alternativas.</li>
</ol>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/emuladorLIO1.png" alt="emuladorLIO" /></p>

<p>Depois de instalado, inicie o aplicativo, será aberta a tela de boas-vindas, nesta tela temos uma mensagem e um botão para limpar os dados (esta opção limpa os pedidos criados pelo integrador). <strong>Se achar necessário, pode minimizar o aplicativo, esta ação não muda sua experiência.</strong></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/imagemlioemualdor.png" alt="emuladorlio2" /></p>

<p>O próximo passo é instalar o aplicativo de integração, para fins didático sutilizamos nosso <a href="https://github.com/DeveloperCielo/LIO-SDK-Sample-Integracao-Local">aplicativo Sample</a>, disponibilizado no github da Cielo. Na imagem abaixo temos o seguinte cenário: Pedido criado, item adicionado, pedidoliberado para pagamento (os passos descritos utilizam da integração com emulador).</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/LioEmuladorPagamento1.png" alt="emuladorlio3" /></p>

<p>Ao clicar no botão pagar, o emulador vem para foreground e exibe os dados do pagamento, dando sequência, temos uma tela com as opções de resposta para o integrador, imagens abaixo:</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/liosucessoerro2.png" alt="emuladorlio4" /></p>

<p><strong>Sucesso:</strong> Retorna os dados do pagamento simulando uma operação realizada com sucesso na Lio On.</p>

<p><strong>Cancelado:</strong> Aborta a operação de pagamento.</p>

<p><strong>Erro:</strong> Retorna um erro genérico de falha na operação de pagamento.</p>

<p>Ao selecionar uma das opções de resposta, retornamos o resultado para o sistema integrado e movemos nossa aplicação para o background. Além da operação de pagamento, oferecemos suporte a uma variedade de funcionalidades, incluindo o cancelamento de um pedido, a consulta de produtos disponíveis para pagamento (como Crédito, Débito, Pix, entre outros) e a consulta de pedidos criados, seja de forma individual ou em lista.</p>

<h2 id="lio-para-desenvolvedores">LIO para Desenvolvedores</h2>

<p>Os desenvolvedores que desejam obter uma Cielo LIO, deverão seguir os passos abaixo:</p>

<ul>
  <li>Criar uma conta no Portal dos Desenvolvedores;</li>
  <li>Fazer a solicitação do equipamento dentro da aba Suporte &gt; Cielo LIO &gt; Envie sua pergunta &gt; Solicitação de LIO Dev / Credenciamento EC Cielo;</li>
  <li>Aguardar o recebimento da Cielo LIO;</li>
  <li>Em posse do equipamento, o desenvolvedor deve abrir uma nova solicitação no portal dos desenvolvedores para requisitar a habilitação de sua LIO de Dev.</li>
</ul>

<p><strong>Com a LIO irá conseguir fazer testes e mexer em seu app em tempo real. A LIO de DEV é isenta de cobrança de aluguel.</strong></p>

<blockquote>
  <p>Obs: Todos os aplicativos publicados pelo desenvolvedor no Dev Console que estejam com status diferente de bloqueado poderão ser baixados em sua LIO de Dev.</p>
</blockquote>

<p><a href="https://devcielo.zendesk.com/hc/pt-br">Clique Aqui</a> para solicitar sua LIO.</p>

<h1 id="integração-via-deeplink-1">Integração via Deeplink</h1>

<p>A Cielo oferece integração via intents para comunicação por meio de deep links, permitindo que aplicativos Android se integrem a recursos como pagamento, impressão e cancelamento</p>

<h2 id="credenciais">Credenciais</h2>

<p>Você pode solicitar as credenciais (client-id/access-token) diretamente via <a href="https://desenvolvedores.cielo.com.br/api-portal/pt-br/myapps/new">PORTAL DE DESENVOLVEDORES</a>.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/apis.png" alt="fluxo" /></p>

<h2 id="pagamento">Pagamento</h2>

<p>É necessário definir um contrato de resposta com a LIO para que a mesma possa responder após o fluxo de pagamento/cancelamento/impressão. Esse contrato deve ser definido no manifest.xml da aplicação conforme o exemplo abaixo:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">".ResponseActivity"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;intent-filter&gt;</span>
    <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.VIEW"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.DEFAULT"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;data</span> <span class="na">android:host=</span><span class="s">"response"</span> <span class="na">android:scheme=</span><span class="s">"order"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/activity&gt;</span>
</code></pre></div></div>

<p>Os nomes “response” e “order” podem ser substituídos pelo que fizer sentido no seu aplicativo. Lembrando que na hora de fazer a chamada de pagamento, você deve informar os mesmos nomes para receber o callback da LIO. Para realizar o pedido de pagamento é preciso criar um json seguindo o formato definido abaixo e converte-lo para BASE64:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"accessToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seu Access-token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"clientID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seu Client-id"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"emaildocliente@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Geral"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unitOfMeasure"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unidade"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"unitPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"paymentCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBITO_AVISTA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Lista de paymentCode</strong></p>

<p>Disponibilizamos também a lista do campo “paymentCode”:</p>

<table>
  <thead>
    <tr>
      <th>PaymentCode</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>DEBITO_AVISTA</td>
    </tr>
    <tr>
      <td>DEBITO_PAGTO_FATURA_DEBITO</td>
    </tr>
    <tr>
      <td>CREDITO_AVISTA</td>
    </tr>
    <tr>
      <td>CREDITO_PARCELADO_LOJA</td>
    </tr>
    <tr>
      <td>CREDITO_PARCELADO_ADM</td>
    </tr>
    <tr>
      <td>CREDITO_PARCELADO_BNCO</td>
    </tr>
    <tr>
      <td>PRE_AUTORIZACAO</td>
    </tr>
    <tr>
      <td>CREDITO_PARCELADO_CLIENTE</td>
    </tr>
    <tr>
      <td>CREDITO_CREDIARIO_CREDITO</td>
    </tr>
    <tr>
      <td>VOUCHER_ALIMENTACAO</td>
    </tr>
    <tr>
      <td>VOUCHER_REFEICAO</td>
    </tr>
    <tr>
      <td>VOUCHER_AUTOMOTIVO</td>
    </tr>
    <tr>
      <td>VOUCHER_CULTURA</td>
    </tr>
    <tr>
      <td>VOUCHER_PEDAGIO</td>
    </tr>
    <tr>
      <td>VOUCHER_BENEFICIOS</td>
    </tr>
    <tr>
      <td>VOUCHER_AUTO</td>
    </tr>
    <tr>
      <td>VOUCHER_CONSULTA_SALDO</td>
    </tr>
    <tr>
      <td>VOUCHER_VALE_PEDAGIO</td>
    </tr>
    <tr>
      <td>CREDIARIO_VENDA</td>
    </tr>
    <tr>
      <td>CREDIARIO_SIMULACAO</td>
    </tr>
    <tr>
      <td>CARTAO_LOJA_AVISTA</td>
    </tr>
    <tr>
      <td>CARTAO_LOJA_PARCELADO_LOJA</td>
    </tr>
    <tr>
      <td>CARTAO_LOJA_PARCELADO</td>
    </tr>
    <tr>
      <td>CARTAO_LOJA_PARCELADO_BANCO</td>
    </tr>
    <tr>
      <td>CARTAO_LOJA_PAGTO_FATURA_CHEQUE</td>
    </tr>
    <tr>
      <td>CARTAO_LOJA_PAGTO_FATURA_DINHEIRO</td>
    </tr>
    <tr>
      <td>FROTAS</td>
    </tr>
    <tr>
      <td>PIX</td>
    </tr>
  </tbody>
</table>

<p>Como explicado anteriormente, é preciso definir o contrato de resposta <strong>(host</strong> e <strong>scheme</strong>), aqui será utilizado essa configuração no parâmetro <strong>urlCallback</strong>. A chamada de pagamento deve ser feita da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">base64</span> <span class="o">=</span> <span class="n">getBase64</span><span class="o">(</span><span class="n">jsonString</span><span class="o">)</span>
<span class="kt">var</span> <span class="n">checkoutUri</span> <span class="o">=</span> <span class="s">"lio://payment?request=$base64&amp;urlCallback=order://response"</span>
</code></pre></div></div>

<p>Após preparar a URI basta realizar a chamada de <strong>intent</strong> do android utilizando o comando específico da linguagem híbrida.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">intent</span> <span class="o">=</span> <span class="nc">Intent</span><span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span><span class="o">,</span> <span class="nc">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">checkoutUri</span><span class="o">))</span>
<span class="n">intent</span><span class="o">.</span><span class="na">addFlags</span><span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">FLAG_ACTIVITY_CLEAR_TOP</span><span class="o">)</span>
<span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">)</span>
</code></pre></div></div>

<h2 id="recuperando-dados-do-pagamento">Recuperando dados do pagamento</h2>

<p>Para recuperar os dados de pagamento basta acessar a intent na activity de resposta e no parâmetro data, acessar a uri, da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">val</span> <span class="n">responseIntent</span> <span class="o">=</span> <span class="n">intent</span>
<span class="nf">if</span> <span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span> <span class="o">==</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">action</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">val</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">data</span>
   <span class="n">val</span> <span class="n">response</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">getQueryParameter</span><span class="o">(</span><span class="s">"response"</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">json</span> <span class="o">=</span> <span class="nc">String</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Lembrando que o parâmetro “<strong>response</strong>” é o mesmo que foi configurado como resposta na chamada de pagamento.</p>

<p>Com o pagamento finalizado a LIO retornará para a uri configurada inicialmente um JSON seguindo o formato exemplificado abaixo:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"Jun 8, 2018 1:51:58 PM"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"ba583f85-9252-48b5-8fed-12719ff058b9"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"898e7f40-fa21-42d0-94d4-b4e95c4fd615"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"cocacola"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"quantity"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
         </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"sku"</span><span class="p">:</span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"unitOfMeasure"</span><span class="p">:</span><span class="s2">"unidade"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"unitPrice"</span><span class="p">:</span><span class="mi">250</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"details"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"4baea4c2-5499-4783-accc-0f8904970861"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"pepsi"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"quantity"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
         </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"sku"</span><span class="p">:</span><span class="s2">"4321"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"unitOfMeasure"</span><span class="p">:</span><span class="s2">"unidade"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"unitPrice"</span><span class="p">:</span><span class="mi">280</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="nl">"number"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="nl">"paidAmount"</span><span class="p">:</span><span class="mi">1450</span><span class="p">,</span><span class="w">
   </span><span class="nl">"payments"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"accessKey"</span><span class="p">:</span><span class="s2">"XXXXXXXXXXXXXXX"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"amount"</span><span class="p">:</span><span class="mi">1450</span><span class="p">,</span><span class="w">
         </span><span class="nl">"applicationName"</span><span class="p">:</span><span class="s2">"com.ads.lio.uriappclient"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"authCode"</span><span class="p">:</span><span class="s2">"140126"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"brand"</span><span class="p">:</span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"cieloCode"</span><span class="p">:</span><span class="s2">"799871"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="nl">"discountedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
         </span><span class="nl">"externalId"</span><span class="p">:</span><span class="s2">"6d5f6f86-7870-4aed-b79f-0a26d6c61743"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"bb9c6305-95e5-4024-8152-503d064c0224"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"installments"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
         </span><span class="nl">"mask"</span><span class="p">:</span><span class="s2">"424242-4242"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"merchantCode"</span><span class="p">:</span><span class="s2">"0000000000000003"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"paymentFields"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"isDoubleFontPrintAllowed"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hasPassword"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"primaryProductCode"</span><span class="p">:</span><span class="s2">"4"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"isExternalCall"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"primaryProductName"</span><span class="p">:</span><span class="s2">"CREDITO"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"receiptPrintPermission"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"isOnlyIntegrationCancelable"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"upFrontAmount"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"creditAdminTax"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"firstQuotaDate"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"isFinancialProduct"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hasSignature"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hasPrintedClientReceipt"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hasWarranty"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"applicationName"</span><span class="p">:</span><span class="s2">"com.ads.lio.uriappclient"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"interestAmount"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"changeAmount"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"serviceTax"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cityState"</span><span class="p">:</span><span class="s2">"Barueri - SP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hasSentReference"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"v40Code"</span><span class="p">:</span><span class="s2">"4"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"secondaryProductName"</span><span class="p">:</span><span class="s2">"A VISTA"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"paymentTransactionId"</span><span class="p">:</span><span class="s2">"6d5f6f86-7870-4aed-b79f0a26d6c61743"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"avaiableBalance"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pan"</span><span class="p">:</span><span class="s2">"424242-4242"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"originalTransactionId"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"originalTransactionDate"</span><span class="p">:</span><span class="s2">"08/06/18"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"secondaryProductCode"</span><span class="p">:</span><span class="s2">"204"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hasSentMerchantCode"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"documentType"</span><span class="p">:</span><span class="s2">"J"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"statusCode"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"merchantAddress"</span><span class="p">:</span><span class="s2">"Alameda Grajau, 219"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"merchantCode"</span><span class="p">:</span><span class="s2">"0000000000000003"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"paymentTypeCode"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hasConnectivity"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"productName"</span><span class="p">:</span><span class="s2">"CREDITO A VISTA - I"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="s2">"POSTO ABC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"entranceMode"</span><span class="p">:</span><span class="s2">"141010104080"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"firstQuotaAmount"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cardCaptureType"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"totalizerCode"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"requestDate"</span><span class="p">:</span><span class="s2">"1528476655000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"boardingTax"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"applicationId"</span><span class="p">:</span><span class="s2">"cielo.launcher"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"numberOfQuotas"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"document"</span><span class="p">:</span><span class="s2">"000000000000000"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"primaryCode"</span><span class="p">:</span><span class="s2">"4"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"requestDate"</span><span class="p">:</span><span class="s2">"1528476655000"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"secondaryCode"</span><span class="p">:</span><span class="s2">"204"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"terminal"</span><span class="p">:</span><span class="s2">"69000007"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
</span><span class="nl">"pendingAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="nl">"price"</span><span class="p">:</span><span class="mi">1060</span><span class="p">,</span><span class="w">
</span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"Order"</span><span class="p">,</span><span class="w">
</span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"ENTERED"</span><span class="p">,</span><span class="w">
</span><span class="s2">"type”:”9”,
"</span><span class="err">updatedAt</span><span class="s2">":"</span><span class="err">Jun</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">2018</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span><span class="mi">51</span><span class="err">:</span><span class="mi">58</span><span class="w"> </span><span class="err">PM</span><span class="s2">"
}
</span></code></pre></div></div>

<blockquote>
  <p><strong>Atenção:</strong> O campo statusCode=0(apenas pagamentos pix) ou 1 indica uma transação de pagamento e statusCode=2 Cancelamento</p>
</blockquote>

<h3 id="exemplos-de-retorno">Exemplos de retorno</h3>

<p>Segue exemplos de retorno com sucesso e erro nas operações via intent na integração híbrida. 
Lembrando que em ambos os cenários abaixos é o conteúdo da URI e o campo resonse está em formato base64.</p>

<h4 id="retorno-de-sucesso">Retorno de sucesso:</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>order://response?response=eyJjcmVhdGVkQXQiOiJKYW4gMzEsIDIwMjQgMTE6Mzc6MjYgQU0iLCJpZCI6IjFkYjU1NzdmLWZjZDAtNDllOC04Y2FjLTVlMjRhYWZiMjUxZiIsIml0ZW1zIjpbeyJkZXNjcmlwdGlvbiI6IiIsImRl
dGFpbHMiOiIiLCJpZCI6IjkzMzA5ODkyLWMyMGItNDUyYy1iYTZmLTY4Mjc5NmI0YTk2ZSIsIm5hbWUiOiJwcm9kdXRvIiwicXVhbnRpdHkiOjEsInJlZmVyZW5jZSI6IiIsInNrdSI6IjQ2ODIiLCJ1bml0T2ZNZWFzdXJlIjoidW5pZGFkZSIsInVuaXRQcmljZSI6OTI1fV0sIm5vdGVzIjoiIiwibnVtYmVyIjoiIiwicGFpZEFtb3VudCI6OTI1LCJwYXltZW50cyI6W3siYWNjZXNzS2V5IjoiclNBcU5QR3ZGUEpJIiwiYW1vdW50Ijo5MjUsImFwcGxpY2F0aW9uTmFtZSI6ImNvbS5hZHMubGlvLnVyaWFwcGNsaWVudCIsImF1dGhDb2RlIjoiMTEzNzMwIiwiYnJhbmQiOiIiLCJjaWVsb0NvZGUiOiI4NDcyNjIiLCJkZXNjcmlwdGlvbiI6IiIsImRpc2NvdW50ZWRBbW91bnQiOjAsImV4dGVybmFsSWQiOiI0OGZhNjNjOS05NWVlLTQ4M2UtOWU3Yi1jZTMyNjMzZjEyOWIiLCJpZCI6IjgwY2U1MjhjLTJjY2MtNDgwMC1iZGMxLTViNWRkZGU1OGZiMSIsImluc3RhbGxtZW50cyI6MCwibWFzayI6IioqKioqKioqKioqKjAwMDAiLCJtZXJjaGFudENvZGUiOiIwMDAwMDAwMDAwMDAwMDAzIiwicGF5bWVudEZpZWxkcyI6eyJpc0RvdWJsZUZvbnRQcmludEFsbG93ZWQiOiJmYWxzZSIsImJpbiI6IjAiLCJoYXNQYXNzd29yZCI6ImZhbHNlIiwicHJpbWFyeVByb2R1Y3RDb2RlIjoiNCIsImlzRXh0ZXJuYWxDYWxsIjoidHJ1ZSIsInByaW1hcnlQcm9kdWN0TmFtZSI6IkNSRURJVE8iLCJyZWNlaXB0UHJpbnRQZXJtaXNzaW9uIjoiMSIsImlzT25seUludGVncmF0aW9uQ2FuY2VsYWJsZSI6ImZhbHNlIiwidXBGcm9udEFtb3VudCI6IjAiLCJjcmVkaXRBZG1pblRheCI6IjAiLCJleHRlcm5hbENhbGxNZXJjaGFudENvZGUiOiIwMDAwMDAwMDAwMDAwMDAzIiwiZmlyc3RRdW90YURhdGUiOiIwIiwiaXNGaW5hbmNpYWxQcm9kdWN0IjoidHJ1ZSIsImhhc1ByaW50ZWRDbGllbnRSZWNlaXB0IjoiZmFsc2UiLCJoYXNTaWduYXR1cmUiOiJmYWxzZSIsImFwcGxpY2F0aW9uTmFtZSI6ImNvbS5hZHMubGlvLnVyaWFwcGNsaWVudCIsImhhc1dhcnJhbnR5IjoiZmFsc2UiLCJpbnRlcmVzdEFtb3VudCI6IjAiLCJjaGFuZ2VBbW91bnQiOiIwIiwic2VydmljZVRheCI6IjAiLCJjaXR5U3RhdGUiOiJCYXJ1ZXJpIC0gU1AiLCJoYXNTZW50UmVmZXJlbmNlIjoiZmFsc2UiLCJ2NDBDb2RlIjoiNCIsInNlY29uZGFyeVByb2R1Y3ROYW1lIjoiQSBWSVNUQSIsInBheW1lbnRUcmFuc2FjdGlvbklkIjoiNDhmYTYzYzktOTVlZS00ODNlLTllN2ItY2UzMjYzM2YxMjliIiwiYXZhaWFibGVCYWxhbmNlIjoiMCIsInBhbiI6IioqKioqKioqKioqKjAwMDAiLCJvcmlnaW5hbFRyYW5zYWN0aW9uSWQiOiIwIiwib3JpZ2luYWxUcmFuc2FjdGlvbkRhdGUiOiIzMS8wMS8yNCIsInNlY29uZGFyeVByb2R1Y3RDb2RlIjoiMjA0IiwiZG9jdW1lbnRUeXBlIjoiSiIsImhhc1NlbnRNZXJjaGFudENvZGUiOiJmYWxzZSIsInN0YXR1c0NvZGUiOiIxIiwibWVyY2hhbnRBZGRyZXNzIjoiQWxhbWVkYSBHcmFqYXUsIDIxOSIsIm1lcmNoYW50Q29kZSI6IjAwMDAwMDAwMDAwMDAwMDMiLCJwYXltZW50VHlwZUNvZGUiOiIxIiwiaGFzQ29ubmVjdGl2aXR5IjoidHJ1ZSIsInByb2R1Y3ROYW1lIjoiQ1JFRElUTyBBIFZJU1RBIC0gSSIsIm1lcmNoYW50TmFtZSI6IlBPU1RPIEFCQyIsImVudHJhbmNlTW9kZSI6IjY2MTAxMDEwNzA4MCIsImNhcmRDYXB0dXJlVHlwZSI6IjYiLCJmaXJzdFF1b3RhQW1vdW50IjoiMCIsInRvdGFsaXplckNvZGUiOiIwIiwicmVxdWVzdERhdGUiOiIxNzA2NzEwMzg0NDAyIiwiYXBwbGljYXRpb25JZCI6ImNpZWxvLmxhdW5jaGVyIiwiYm9hcmRpbmdUYXgiOiIwIiwibnVtYmVyT2ZRdW90YXMiOiIwIiwiZG9jdW1lbnQiOiIwMDAwMDAwMDAwMDAwMCJ9LCJwcmltYXJ5Q29kZSI6IjQiLCJyZXF1ZXN0RGF0ZSI6IjE3MDY3MTAzODQ0MDIiLCJzZWNvbmRhcnlDb2RlIjoiMjA0IiwidGVybWluYWwiOiI2MjAwMDExMiJ9XSwicGVuZGluZ0Ftb3VudCI6MCwicHJpY2UiOjkyNSwicmVmZXJlbmNlIjoiUmVmZXJlbmNlIiwic3RhdHVzIjoiRU5URVJFRCIsInR5cGUiOiJQQVlNRU5UIiwidXBkYXRlZEF0IjoiSmFuIDMxLCAyMDI0IDExOjM3OjMxIEFNIn0=<span class="err">&amp;</span>responsecode=0
</code></pre></div></div>

<h4 id="retorno-de-erro">Retorno de erro</h4>

<p>Se houver algum erro no pagamento, seja ele cancelado por usuario ou saldo insuficiente continuamos olhando para o campo response onde será retornando um base64 com o motivo do pagamento não realizado com sucesso</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>order://response?response=eyJjb2RlIjoxLCJyZWFzb24iOiJDQU5DRUxBRE8gUEVMTyBVU1XDgVJJTyJ9<span class="err">&amp;</span>responsecode=0
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"code"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="nl">"reason"</span><span class="p">:</span><span class="s2">"CANCELADO PELO USUÁRIO"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="listagem-de-pedidos">Listagem de Pedidos</h2>

<p>Na listagem de pedidos, é possível obter os pedidos (Orders) abertas na Cielo Lio pelo aplicativo do parceiro. Para isso basta definir o JSON abaixo e formata-lo para BASE64:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">“pageSize”:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
</span><span class="err">“page”:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="err">“clientID”:</span><span class="w"> </span><span class="err">“seu</span><span class="w"> </span><span class="err">cliente</span><span class="w"> </span><span class="err">ID”</span><span class="p">,</span><span class="w">
</span><span class="err">“accessToken”:</span><span class="w"> </span><span class="err">“seu</span><span class="w"> </span><span class="err">access</span><span class="w"> </span><span class="err">token”</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p><strong>ATENÇÃO:</strong> Á princípio será limitado a no máximo 5 pedidos devido ao tamanho das informações.</p>

<p>A chamada deve ser feita da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">base64</span> <span class="o">=</span> <span class="n">getBase64</span><span class="o">(</span><span class="n">jsonString</span><span class="o">)</span>
<span class="kt">var</span> <span class="n">checkoutUri</span> <span class="o">=</span> <span class="s">"lio://orders?request=$base64&amp;urlCallback=order://response"</span>
</code></pre></div></div>

<p>Para recuperar os dados basta acessar a intent na activity de resposta cadastrada em seu manifest e no parâmetro data, acessar a URI da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">val</span> <span class="n">responseIntent</span> <span class="o">=</span> <span class="n">intent</span>
<span class="nf">if</span> <span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span> <span class="o">==</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">action</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">val</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">data</span>
   <span class="n">val</span> <span class="n">response</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">getQueryParameter</span><span class="o">(</span><span class="s">"response"</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">json</span> <span class="o">=</span> <span class="nc">String</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="exemplos-de-retorno-da-listagem-de-pedidos">Exemplos de retorno da Listagem de Pedidos</h3>

<p>Exemplo de retorno de sucesso:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">orders:</span><span class="c1">//response?response=eyJjdXJyZW50UGFnZSI6MCwicmVzdWx0cyI6W3siY3JlYXRlZEF0IjoiQXByIDgsIDIwMjQgNDowNzo1OSBQTSIsImlkIjoiNTEyZjdjNjEtMjkzYy00NDY4LWJkM2UtMjk4Mjg2ZDA0ZjBiIiwiaXRlbXMiOlt7ImRlc2NyaXB0aW9uIjoiIiwiZGV0YWlscyI6IiIsImlkIjoiNjMyOWRiMTYtMzY4Ny00MmJjLTgzNWYtZmUwZGYxMGZjZGRmIiwibmFtZSI6InByb2R1dG8iLCJxdWFudGl0eSI6MywicmVmZXJlbmNlIjoiIiwic2t1IjoiNzg5NzIiLCJ1bml0T2ZNZWFzdXJlIjoidW5pZGFkZSIsInVuaXRQcmljZSI6NTY2fV0sIm5vdGVzIjoiIiwibnVtYmVyIjoiIiwicGFpZEFtb3VudCI6MTY5OCwicGF5</span>
<span class="n">bWVudHMiOlt7ImFjY2Vzc0tleSI6InJTQXFOUEd2RlBKSSIsImFtb3VudCI6MTY5OCwiYXBwbGlj</span>
<span class="nc">YXRpb25OYW1lIjoiY29tLmFkcy5saW8udXJpYXBwY2xpZW50IiwiYXV0aENvZGUiOiIxNjA4NTEi</span>
<span class="nc">LCJicmFuZCI6IiIsImNpZWxvQ29kZSI6IjEwODE0NCIsImRlc2NyaXB0aW9uIjoiIiwiZGlzY291</span>
<span class="n">bnRlZEFtb3VudCI6MCwiZXh0ZXJuYWxJZCI6IjZiYmI2ZDhhLTQ5NWYtNDY3MC04MzVmLWY4YWNlYjlkZTA2OCIsImlkIjoiNWU2MmFmNGMtNzM5ZC00Zjc4LWFhYjgtNWQxNDE5NmIwN2I2IiwiaW5zdGFsbG1lbnRzIjowLCJtYXNrIjoiKioqKioqKioqKjQyNDIiLCJtZXJjaGFudENvZGUiOiIwMDEw</span>
<span class="nc">MDAwMjQ0NDcwMDAxIiwicGF5bWVudEZpZWxkcyI6eyJpc0RvdWJsZUZvbnRQcmludEFsbG93ZWQiOiJ0cnVlIiwiYmluIjoiNDI0MjQyIiwiaGFzUGFzc3dvcmQiOiJ0cnVlIiwicHJpbWFyeVByb2R1</span>
<span class="nc">Y3RDb2RlIjoiNCIsImlzRXh0ZXJuYWxDYWxsIjoidHJ1ZSIsInByaW1hcnlQcm9kdWN0TmFtZSI6</span>
<span class="nc">IkNSRURJVE8iLCJyZWNlaXB0UHJpbnRQZXJtaXNzaW9uIjoiMSIsImlzT25seUludGVncmF0aW9u</span>
<span class="nc">Q2FuY2VsYWJsZSI6ImZhbHNlIiwidXBGcm9udEFtb3VudCI6IjAiLCJjcmVkaXRBZG1pblRheCI6</span>
<span class="nc">IjAiLCJleHRlcm5hbENhbGxNZXJjaGFudENvZGUiOiIwMDEwMDAwMjQ0NDcwMDAxIiwiZmlyc3RRdW90YURhdGUiOiIwIiwiaXNGaW5hbmNpYWxQcm9kdWN0IjoidHJ1ZSIsImhhc1ByaW50ZWRDbGllbnRSZWNlaXB0IjoiZmFsc2UiLCJoYXNTaWduYXR1cmUiOiJmYWxzZSIsImFwcGxpY2F0aW9uTmFtZSI6ImNvbS5hZHMubGlvLnVyaWFwcGNsaWVudCIsImhhc1dhcnJhbnR5IjoiZmFsc2UiLCJpbnRlcmVzdEFtb3VudCI6IjAiLCJjaGFuZ2VBbW91bnQiOiIwIiwic2VydmljZVRheCI6IjAiLCJjaXR5</span>
<span class="nc">U3RhdGUiOiJCYXJ1ZXJpIC0gU1AiLCJoYXNTZW50UmVmZXJlbmNlIjoiZmFsc2UiLCJ2NDBDb2Rl</span>
<span class="nc">IjoiNCIsInNlY29uZGFyeVByb2R1Y3ROYW1lIjoiQSBWSVNUQSIsInBheW1lbnRUcmFuc2FjdGlv</span>
<span class="n">bklkIjoiNmJiYjZkOGEtNDk1Zi00NjcwLTgzNWYtZjhhY2ViOWRlMDY4IiwiYXZhaWFibGVCYWxh</span>
<span class="n">bmNlIjoiMCIsInBhbiI6IioqKioqKioqKio0MjQyIiwib3JpZ2luYWxUcmFuc2FjdGlvbklkIjoi</span>
<span class="nc">MCIsIm9yaWdpbmFsVHJhbnNhY3Rpb25EYXRlIjoiMDgvMDQvMjQiLCJzZWNvbmRhcnlQcm9kdWN0Q29kZSI6IjIwNCIsImRvY3VtZW50VHlwZSI6IkoiLCJoYXNTZW50TWVyY2hhbnRDb2RlIjoiZmFsc2UiLCJzdGF0dXNDb2RlIjoiMSIsIm1lcmNoYW50QWRkcmVzcyI6IkFsYW1lZGEgR3JhamF1LCAy</span>
<span class="nc">MTkiLCJtZXJjaGFudENvZGUiOiIwMDEwMDAwMjQ0NDcwMDAxIiwicGF5bWVudFR5cGVDb2RlIjoiMSIsImhhc0Nvbm5lY3Rpdml0eSI6InRydWUiLCJwcm9kdWN0TmFtZSI6IkNSRURJVE8gQSBWSVNUQSAtIEkiLCJtZXJjaGFudE5hbWUiOiJMT0pBIE9OIiwiZW50cmFuY2VNb2RlIjoiNjQyMDE3MjA0</span>
<span class="nc">MDgwIiwiY2FyZENhcHR1cmVUeXBlIjoiMSIsImZpcnN0UXVvdGFBbW91bnQiOiIwIiwidG90YWxp</span>
<span class="n">emVyQ29kZSI6IjAiLCJyZXF1ZXN0RGF0ZSI6IjE3MTI2MDMyNjcxMjgiLCJhcHBsaWNhdGlvbklk</span>
<span class="nc">IjoiY2llbG8ubGF1bmNoZXIiLCJib2FyZGluZ1RheCI6IjAiLCJudW1iZXJPZlF1b3RhcyI6IjAi</span>
<span class="nc">LCJkb2N1bWVudCI6IjcwOTU3ODk4MDAwMTc2In0sInByaW1hcnlDb2RlIjoiNCIsInJlcXVlc3RE</span>
<span class="nc">YXRlIjoiMTcxMjYwMzI2NzEyOCIsInNlY29uZGFyeUNvZGUiOiIyMDQiLCJ0ZXJtaW5hbCI6IjYy</span>
<span class="nc">MDAwMTQwIn1dLCJwZW5kaW5nQW1vdW50IjowLCJwcmljZSI6MTY5OCwicmVmZXJlbmNlIjoiUmVmZXJlbmNlIiwic3RhdHVzIjoiUEFJRCIsInR5cGUiOiJQQVlNRU5UIiwidXBkYXRlZEF0IjoiQXBy</span>
<span class="nc">IDgsIDIwMjQgNDowNzo1MyBQTSJ9LHsiY3JlYXRlZEF0IjoiQXByIDgsIDIwMjQgNDowNzo0MyBQ</span>
<span class="nc">TSIsImlkIjoiZjJlNGIxZDMtYWI2Ny00NzM2LWEzMDctYjM0ZWJkZGIyM2QwIiwiaXRlbXMiOlt7</span>
<span class="nc">ImRlc2NyaXB0aW9uIjoiIiwiZGV0YWlscyI6IiIsImlkIjoiZDBjOGE4MzYtOTM4OC00MTdiLThk</span>
<span class="nc">MzAtMmViOWQ0YzA2ODFmIiwibmFtZSI6InByb2R1dG8iLCJxdWFudGl0eSI6MSwicmVmZXJlbmNlIjoiIiwic2t1IjoiNzY2MTgiLCJ1bml0T2ZNZWFzdXJlIjoidW5pZGFkZSIsInVuaXRQcmljZSI6</span>
<span class="nc">ODM4fV0sIm5vdGVzIjoiIiwibnVtYmVyIjoiIiwicGFpZEFtb3VudCI6ODM4LCJwYXltZW50cyI6</span>
<span class="nc">W3siYWNjZXNzS2V5IjoiclNBcU5QR3ZGUEpJIiwiYW1vdW50Ijo4MzgsImFwcGxpY2F0aW9uTmFt</span>
<span class="nc">ZSI6ImNvbS5hZHMubGlvLnVyaWFwcGNsaWVudCIsImF1dGhDb2RlIjoiMTYwODE2IiwiYnJhbmQi</span>
<span class="nc">OiIiLCJjaWVsb0NvZGUiOiIxMDgxNDIiLCJkZXNjcmlwdGlvbiI6IiIsImRpc2NvdW50ZWRBbW91</span>
<span class="n">bnQiOjAsImV4dGVybmFsSWQiOiI5M2NiYmUzOS1hNWI2LTQ4MmItODBhZi00MDgxOGYyZTQyMjEiLCJpZCI6ImNiZjMxY2M4LWMzMzgtNDUxMC1iMGY4LTA3NWFlNzM4ODNlYSIsImluc3RhbGxtZW50cyI6MCwibWFzayI6IioqKioqKioqKio0MjQyIiwibWVyY2hhbnRDb2RlIjoiMDAxMDAwMDI0NDQ3MDAwMSIsInBheW1lbnRGaWVsZHMiOnsiaXNEb3VibGVGb250UHJpbnRBbGxvd2VkIjoidHJ1ZSIsImJpbiI6IjQyNDI0MiIsImhhc1Bhc3N3b3JkIjoidHJ1ZSIsInByaW1hcnlQcm9kdWN0Q29kZSI</span>
<span class="nc">IjQiLCJpc0V4dGVybmFsQ2FsbCI6InRydWUiLCJwcmltYXJ5UHJvZHVjdE5hbWUiOiJDUkVESVRP</span>
<span class="nc">IiwicmVjZWlwdFByaW50UGVybWlzc2lvbiI6IjEiLCJpc09ubHlJbnRlZ3JhdGlvbkNhbmNlbGFi</span>
<span class="n">bGUiOiJmYWxzZSIsInVwRnJvbnRBbW91bnQiOiIwIiwiY3JlZGl0QWRtaW5UYXgiOiIwIiwiZXh0</span>
<span class="nc">ZXJuYWxDYWxsTWVyY2hhbnRDb2RlIjoiMDAxMDAwMDI0NDQ3MDAwMSIsImZpcnN0UXVvdGFEYXRlIjoiMCIsImlzRmluYW5jaWFsUHJvZHVjdCI6InRydWUiLCJoYXNQcmludGVkQ2xpZW50UmVjZWlwdCI6ImZhbHNlIiwiaGFzU2lnbmF0dXJlIjoiZmFsc2UiLCJhcHBsaWNhdGlvbk5hbWUiOiJjb20u</span>
<span class="nc">YWRzLmxpby51cmlhcHBjbGllbnQiLCJoYXNXYXJyYW50eSI6ImZhbHNlIiwiaW50ZXJlc3RBbW91</span>
<span class="n">bnQiOiIwIiwiY2hhbmdlQW1vdW50IjoiMCIsInNlcnZpY2VUYXgiOiIwIiwiY2l0eVN0YXRlIjoi</span>
<span class="nc">QmFydWVyaSAtIFNQIiwiaGFzU2VudFJlZmVyZW5jZSI6ImZhbHNlIiwidjQwQ29kZSI6IjQiLCJz</span>
<span class="nc">ZWNvbmRhcnlQcm9kdWN0TmFtZSI6IkEgVklTVEEiLCJwYXltZW50VHJhbnNhY3Rpb25JZCI6Ijkz</span>
<span class="nc">Y2JiZTM5LWE1YjYtNDgyYi04MGFmLTQwODE4ZjJlNDIyMSIsImF2YWlhYmxlQmFsYW5jZSI6IjAi</span>
<span class="nc">LCJwYW4iOiIqKioqKioqKioqNDI0MiIsIm9yaWdpbmFsVHJhbnNhY3Rpb25JZCI6IjAiLCJvcmln</span>
<span class="n">aW5hbFRyYW5zYWN0aW9uRGF0ZSI6IjA4LzA0LzI0Iiwic2Vjb25kYXJ5UHJvZHVjdENvZGUiOiIy</span>
<span class="nc">MDQiLCJkb2N1bWVudFR5cGUiOiJKIiwiaGFzU2VudE1lcmNoYW50Q29kZSI6ImZhbHNlIiwic3Rh</span>
<span class="n">dHVzQ29kZSI6IjEiLCJtZXJjaGFudEFkZHJlc3MiOiJBbGFtZWRhIEdyYWphdSwgMjE5IiwibWVy</span>
<span class="nc">Y2hhbnRDb2RlIjoiMDAxMDAwMDI0NDQ3MDAwMSIsInBheW1lbnRUeXBlQ29kZSI6IjEiLCJoYXNDb25uZWN0aXZpdHkiOiJ0cnVlIiwicHJvZHVjdE5hbWUiOiJDUkVESVRPIEEgVklTVEEgLSBJIiwi</span>
<span class="n">bWVyY2hhbnROYW1lIjoiTE9KQSBPTiIsImVudHJhbmNlTW9kZSI6IjY0MjAxNzIwNDA4MCIsImNh</span>
<span class="n">cmRDYXB0dXJlVHlwZSI6IjEiLCJmaXJzdFF1b3RhQW1vdW50IjoiMCIsInRvdGFsaXplckNvZGUi</span>
<span class="nc">OiIwIiwicmVxdWVzdERhdGUiOiIxNzEyNjAzMjY3ODQ1IiwiYXBwbGljYXRpb25JZCI6ImNpZWxv</span>
<span class="nc">LmxhdW5jaGVyIiwiYm9hcmRpbmdUYXgiOiIwIiwibnVtYmVyT2ZRdW90YXMiOiIwIiwiZG9jdW1l</span>
<span class="n">bnQiOiI3MDk1Nzg5ODAwMDE3NiJ9LCJwcmltYXJ5Q29kZSI6IjQiLCJyZXF1ZXN0RGF0ZSI6IjE3</span>
<span class="nc">MTI2MDMyNjc4NDUiLCJzZWNvbmRhcnlDb2RlIjoiMjA0IiwidGVybWluYWwiOiI2MjAwMDE0MCJ9XSwicGVuZGluZ0Ftb3VudCI6MCwicHJpY2UiOjgzOCwicmVmZXJlbmNlIjoiUmVmZXJlbmNlIiwi</span>
<span class="n">c3RhdHVzIjoiUEFJRCIsInR5cGUiOiJQQVlNRU5UIiwidXBkYXRlZEF0IjoiQXByIDgsIDIwMjQg</span>
<span class="nc">NDowNzo1NCBQTSJ9XSwidG90YWxJdGVtcyI6MzYyLCJ0b3RhbFBhZ2VzIjo3M30</span><span class="o">=</span>
<span class="o">&amp;</span><span class="n">responsecode</span><span class="o">=</span><span class="mi">0</span>
</code></pre></div></div>

<p>ResponseCode = 0 significa sucesso e após realizar a decodificação será obtido um objeto JSON:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currentPage"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"results"</span><span class="p">:[],</span><span class="w">
    </span><span class="nl">"totalItems"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalPages"</span><span class="p">:</span><span class="mi">6</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>O results estará uma lista com os pedidos.</p>

<p>Exemplo de Retorno de falha:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">order:</span><span class="c1">//response?response=eyJjb2RlIjoxLCJyZWFzb24iOiJDQU5DRUxBRE8gUEVMTyBVU1XDgVJJTyJ9&amp;responsecode=2</span>
</code></pre></div></div>
<h2 id="listagem-de-produtos">Listagem de Produtos</h2>

<p>É possível obter todos os produtos (tipos de pagamento) que estão habilitados para o cliente. Para isso basta definir o JSON abaixo e formata-lo para BASE64:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="err">“clientID”:</span><span class="w"> </span><span class="err">“seu</span><span class="w"> </span><span class="err">cliente</span><span class="w"> </span><span class="err">ID”</span><span class="p">,</span><span class="w">
</span><span class="err">“accessToken”:</span><span class="w"> </span><span class="err">“seu</span><span class="w"> </span><span class="err">access</span><span class="w"> </span><span class="err">token”</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>A chamada deve ser feita da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">base64</span> <span class="o">=</span> <span class="n">getBase64</span><span class="o">(</span><span class="n">jsonString</span><span class="o">)</span>
<span class="kt">var</span> <span class="n">checkoutUri</span> <span class="o">=</span> <span class="s">"lio://products?request=$base64&amp;urlCallback=order://response"</span>
</code></pre></div></div>

<p>Para recuperar os dados basta acessar a intent na activity de resposta cadastrada em seu manifest e no parâmetro data, acessar a URI da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">val</span> <span class="n">responseIntent</span> <span class="o">=</span> <span class="n">intent</span>
<span class="nf">if</span> <span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span> <span class="o">==</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">action</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">val</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">data</span>
   <span class="n">val</span> <span class="n">response</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">getQueryParameter</span><span class="o">(</span><span class="s">"response"</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">json</span> <span class="o">=</span> <span class="nc">String</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="exemplo-de-retorno-dos-produtos">Exemplo de retorno dos produtos</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">order:</span><span class="c1">//products?response=W3siY29kZSI6IjQiLCJpZCI6MTAwMCwibmFtZSI6IkNSRURJVE8iLCJzZWNvbmRhcnlQcm9kdWN0cyI6W3siY29kZSI6IjIwNCIsImlkIjoxMDAwLCJuYW1lIjoiQ1JFRElUTyBBIFZJU1RBIC0gSSJ9LHsiY29kZSI6IjIwNSIsImlkIjoxMDAxLCJuYW1lIjoiQ1JFRElUTyBQQVJDRUxBRE8gQURNIC0gSSJ9LHsiY29kZSI6IjIwNiIsImlkIjoxMDAyLCJuYW1lIjoiQ1JFRElUTyBQQVJDRUxBRE8gTE9KQSAtIEkifV19LHsiY29kZSI6IjgiLCJpZCI6MTAwMSwibmFtZSI6IkRFQklUTyIsInNlY29uZGFyeVByb2R1Y3RzIjpbeyJjb2RlIjoiMjA4IiwiaWQiOjEwMDMsIm5hbWUiOiJERUJJVE8gQSBWSVNUQSAtIEkifV19LHsiY29kZSI6IjEzIiwiaWQiOjEwMDIsIm5hbWUiOiJWSVNBIFZBTEUiLCJzZWNvbmRhcnlQcm9kdWN0cyI6W3siY29kZSI6IjI1MCIsImlkIjoxMDA0LCJuYW1lIjoiVklTQS1WQUxFIFJFRkVJQ0FPIC0gSSJ9LHsiY29kZSI6IjI1MSIsImlkIjoxMDA1LCJuYW1lIjoiVklTQS1WQUxFIEFMSU1FTlRBQ0FPIC0gSSJ9XX0seyJjb2RlIjoiNyIsImlkIjoxMDAzLCJuYW1lIjoiUFJFLUFVVCIsInNlY29uZGFyeVByb2R1Y3RzIjpbeyJjb2RlIjoiMCIsImlkIjoyMDAwLCJuYW1lIjoiUFJFLUFVVE9SSVpBQ0FPIC0gSSJ9XX1d&amp;responsecode=0</span>
</code></pre></div></div>

<p>Depois de decodificar o resultado, será obtido uma lista com todos os produtos que estão habilitados para o EC.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDITO"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"secondaryProducts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"204"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDITO A VISTA - I"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"205"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDITO PARCELADO ADM - I"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"206"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1002</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDITO PARCELADO LOJA - I"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBITO"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"secondaryProducts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"208"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1003</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBITO A VISTA - I"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1002</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA VALE"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"secondaryProducts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"250"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1004</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA-VALE REFEICAO - I"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"251"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1005</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA-VALE ALIMENTACAO - I"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1003</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRE-AUT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"secondaryProducts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRE-AUTORIZACAO - I"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h2 id="consulta-de-pedido-avulso">Consulta de Pedido avulso</h2>

<p>Na consulta de pedido avulso, é possível realizar de duas maneiras diferentes. Buscando um pedido por valor, nsu (Cielo code) e código de autorização. Ou pode consultar um pedido pelo seu identificador (ID). Para isso basta realizar a chamada da seguinte maneira.</p>

<p>Os dados de entrada podem ser qualquer um dos JSONs abaixo:</p>

<p>JSON de busca por ID:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orderId"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clientidtest"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accessToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accesstokentest"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>JSON de busca por valor, nsu e código de autorização:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="err">amount</span><span class="p">,</span><span class="w">
    </span><span class="nl">"authCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authCode"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cieloCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cieloCode(nsu)"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orderId"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clientidtest"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accessToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accesstokentest"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Para isso basta definir um dos JSONs acima e formata-lo para BASE64 e a chamada deve ser feita da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">base64</span> <span class="o">=</span> <span class="n">getBase64</span><span class="o">(</span><span class="n">jsonString</span><span class="o">)</span>
<span class="kt">var</span> <span class="n">checkoutUri</span> <span class="o">=</span> <span class="s">"lio://order?request=$base64&amp;urlCallback=order://response"</span>
</code></pre></div></div>

<p>Para recuperar os dados basta acessar a intent na activity de resposta cadastrada em seu manifest e no parâmetro data, acessar a URI da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">val</span> <span class="n">responseIntent</span> <span class="o">=</span> <span class="n">intent</span>
<span class="nf">if</span> <span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span> <span class="o">==</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">action</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">val</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">data</span>
   <span class="n">val</span> <span class="n">response</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">getQueryParameter</span><span class="o">(</span><span class="s">"response"</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">json</span> <span class="o">=</span> <span class="nc">String</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="exemplo-de-retorno-do-pedido">Exemplo de retorno do pedido</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">order:</span><span class="c1">//responseresponse=eyJhY2Nlc3NLZXkiOiJyU0FxTlBHdkZQSkkiLCJhbW91bnQiOjExMTYsImNyZWF0ZWRBdCI6IkFwciA0LCAyMDI0IDEwOjE4OjE4IEFNIiwiaWQiOiJkYTI1NzE2Ny1lODJhLTRjN2MtYjVlMC1mMDc2OWQ4MTg0M2MiLCJpdGVtcyI6W3siYW1vdW50IjoxMTE2LCJkZXNjcmlwdGlvbiI6InByb2R1dG8iLCJkZXRhaWxzIjoicHJvZHV0byIsImlkIjoiM2U4YjNjOGYtNDdlMC00YjNkLWFiMTQtNWYxNzY0ZjczN2FhIiwibmFtZSI6InByb2R1dG8iLCJxdWFudGl0eSI6MiwicmVmZXJlbmNlIjoicHJvZHV0byIsInNrdSI6IjY4NzU5IiwidW5pdE9mTWVhc3VyZSI6InVuaWRhZGUiLCJ1bml0UHJpY2UiOjU1OH1dLCJsYXN0TW9kaWZpY2F0aW9uRGF0ZSI6IkFwciA0LCAyMDI0IDEwOjE4OjE4IEFNIiwibm90ZXMiOiIiLCJudW1iZXIiOiIiLCJwYWlkQW1vdW50IjowLCJwZW5kaW5nQW1vdW50IjoxMTE2LCJyZWZlcmVuY2UiOiJSZWZlcmVuY2UiLCJyZWxlYXNlRGF0ZSI6IkFwciA0LCAyMDI0IDEwOjE4OjE4IEFNIiwic2VjcmV0QWNjZXNzS2V5IjoiWFpldm9VWUtta1ZyIiwic3RhdHVzIjoiRU5URVJFRCIsInRyYW5zYWN0aW9ucyI6W10sInR5cGUiOiJQQVlNRU5UIn0=&amp;responsecode=0</span>
</code></pre></div></div>

<p>Depois de decodificar o resultado, será obtido uma lista com o pedido encontrado:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"accessKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rSAqNPGvFPJI"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1116</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apr 4, 2024 10:18:18 AM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"da257167-e82a-4c7c-b5e0-f0769d81843c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1116</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"produto"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"produto"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3e8b3c8f-47e0-4b3d-ab14-5f1764f737aa"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"produto"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"produto"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68759"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"unitOfMeasure"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unidade"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"unitPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">558</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"lastModificationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apr 4, 2024 10:18:18 AM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"paidAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pendingAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1116</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reference"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"releaseDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apr 4, 2024 10:18:18 AM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"secretAccessKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XZevoUYKmkVr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENTERED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Em “transactions”, terá uma lista com os pagamentos feitos para o pedido.</p>

<p>Caso não encontre o Pedido, o retorno será:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">order:</span><span class="c1">//response?response=eyJjb2RlIjoxLCJyZWFzb24OiJDQU5DRUxBRE8gUEVMTyBVU1XDgVJJTyJ9&amp;responsecode=2</span>
</code></pre></div></div>

<p>Depois de decodificar o resultado:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Order not found"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="informações-do-terminal">Informações do terminal</h2>

<p>É possível obter algumas informações do terminal, tais como, nível de bateria, modelo do dispositivo, Merchant e também o número lógico. Para isso basta realizar a chamada da seguinte maneira:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">base64</span> <span class="o">=</span> <span class="n">getBase64</span><span class="o">(</span><span class="n">jsonString</span><span class="o">)</span>
<span class="kt">var</span> <span class="n">checkoutUri</span> <span class="o">=</span> <span class="s">"lio://terminalinfo?urlCallback=order://response"</span>
</code></pre></div></div>

<p>Para recuperar os dados basta acessar a intent na activity de resposta cadastrada em seu manifest e no parâmetro data, acessar a URI da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">val</span> <span class="n">responseIntent</span> <span class="o">=</span> <span class="n">intent</span>
<span class="nf">if</span> <span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span> <span class="o">==</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">action</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">val</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">data</span>
   <span class="n">val</span> <span class="n">response</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">getQueryParameter</span><span class="o">(</span><span class="s">"response"</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">json</span> <span class="o">=</span> <span class="nc">String</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="exemplos-de-retorno-das-informações-do-terminal">Exemplos de retorno das informações do terminal</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">order:</span><span class="c1">//response?response=eyJiYXR0ZXJ5TGV2ZWwiOjAuOTksImRldmljZU1vZGVsIjoiTElPX1YzIiwibG9naWNOdW1iZXIiOiI2MjAwMDE0MC00IiwibWVyY2hhbnRDb2RlIjoiMDAxMDAwMDI0NDQ3MDAwMSJ9&amp;responsecode=0</span>
</code></pre></div></div>

<p>Depois de decodificar o resultado:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"batteryLevel"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.99</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deviceModel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIO_V3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logicNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678-9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"merchantCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0000000000000000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="cancelamento">Cancelamento</h2>

<aside class="warning">Hoje não é possivel realizar cancelamentos de pagamentos efetuados por PIX via integração.</aside>

<p>Para realizar o cancelamento é preciso criar um json seguindo o formato definido abaixo e converte-lo para BASE64:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id da ordem"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"clientID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"seu client ID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accessToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"seu access token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cieloCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"authCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>A chamada de cancelamento deve ser feita da seguinte forma. Como explicado anteriormente, é preciso definir o contrato de resposta, aqui será utilizado essa configuração no parâmetro <strong>urlCallback</strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">base64</span> <span class="o">=</span> <span class="n">getBase64</span><span class="o">(</span><span class="n">jsonString</span><span class="o">)</span>
<span class="kt">var</span> <span class="n">checkoutUri</span> <span class="o">=</span><span class="s">"lio://payment-reversal?request=$base64&amp;urlCallback=order://response"</span>
</code></pre></div></div>

<p>Para recuperar os dados basta acessar a intent na activity de resposta cadastrada em sem Manifest e no parâmetro data, acessar a uri, da seguinte forma:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">val</span> <span class="n">responseIntent</span> <span class="o">=</span> <span class="n">intent</span>
<span class="nf">if</span> <span class="o">(</span><span class="nc">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span> <span class="o">==</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">action</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">val</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">responseIntent</span><span class="o">.</span><span class="na">data</span>
   <span class="n">val</span> <span class="n">response</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">getQueryParameter</span><span class="o">(</span><span class="s">"response"</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">)</span>
   <span class="n">val</span> <span class="n">json</span> <span class="o">=</span> <span class="nc">String</span><span class="o">(</span><span class="n">data</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="exemplos-de-retorno-cancelamento">Exemplos de retorno cancelamento</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>order://response?response=eyJjcmVhdGVkQXQiOiJGZWIgOSwgMjAyNCAyOjI5OjE2IFBNIiwiaWQiOiJmN2E4ZjIyNi0yOTQ5LTQwMGItOTc3OC05MTNiMGQxNjkzODkiLCJpdGVtcyI6W3siZGVzY3JpcHRpb24iOiIiLCJkZXRhaWxzIjoiIiwiaWQiOiI0MmQwNTg2Yi1mOWViLTQwNjYtYmQxZi1jNTQyMTg2MzJmMmUiLCJuYW1lIjoicHJvZHV0byIsInF1YW50aXR5Ijo1LCJyZWZlcmVuY2UiOiIiLCJza3UiOiI0OTQ3MyIsInVuaXRPZk1lYXN1cmUiOiJ1bmlkYWRlIiwidW5pdFByaWNlIjo3MjR9XSwibm90ZXMiOiIiLCJudW1iZXIiOiIiLCJwYWlkQW1vdW50IjowLCJwYXltZW50cyI6W3siYWNjZXNzS2V5IjoiclNBcU5QR3ZGUEpJIiwiYW1vdW50IjozNjIwLCJhcHBsaWNhdGlvbk5hbWUiOiJjb20uYWRzLmxpby51cmlhcHBjbGllbnQiLCJhdXRoQ29kZSI6IjE0Mjk0MSIsImJyYW5kIjoiIiwiY2llbG9Db2RlIjoiOTEwNzkyIiwiZGVzY3JpcHRpb24iOiIiLCJkaXNjb3VudGVkQW1vdW50IjowLCJleHRlcm5hbElkIjoiNDFmYzNlZDItYjc4MS00Y2M0LWEyM2EtYWExYTdiN2JjNWQwIiwiaWQiOiIyZTc3YTI3OC0wY2M1LTQ3ODQtYTljNy01Y2Y3M2I5OWRiZjYiLCJpbnN0YWxsbWVudHMiOjAsIm1hc2siOiIqKioqKioqKioqKiowMDAwIiwibWVyY2hhbnRDb2RlIjoiMDAxMDAwMDI0NDQ3MDAwMSIsInBheW1lbnRGaWVsZHMiOnsiaXNEb3VibGVGb250UHJpbnRBbGxvd2VkIjoidHJ1ZSIsImJpbiI6IjAiLCJoYXNQYXNzd29yZCI6ImZhbHNlIiwicHJpbWFyeVByb2R1Y3RDb2RlIjoiNCIsImlzRXh0ZXJuYWxDYWxsIjoidHJ1ZSIsInByaW1hcnlQcm9kdWN0TmFtZSI6IkNSRURJVE8iLCJyZWNlaXB0UHJpbnRQZXJtaXNzaW9uIjoiMSIsImlzT25seUludGVncmF0aW9uQ2FuY2VsYWJsZSI6ImZhbHNlIiwidXBGcm9udEFtb3VudCI6IjAiLCJjcmVkaXRBZG1pblRheCI6IjAiLCJleHRlcm5hbENhbGxNZXJjaGFudENvZGUiOiIwMDEwMDAwMjQ0NDcwMDAxIiwiZmlyc3RRdW90YURhdGUiOiIwIiwiaXNGaW5hbmNpYWxQcm9kdWN0IjoidHJ1ZSIsImhhc1ByaW50ZWRDbGllbnRSZWNlaXB0IjoiZmFsc2UiLCJoYXNTaWduYXR1cmUiOiJmYWxzZSIsImFwcGxpY2F0aW9uTmFtZSI6ImNvbS5hZHMubGlvLnVyaWFwcGNsaWVudCIsImhhc1dhcnJhbnR5IjoiZmFsc2UiLCJpbnRlcmVzdEFtb3VudCI6IjAiLCJjaGFuZ2VBbW91bnQiOiIwIiwic2VydmljZVRheCI6IjAiLCJjaXR5U3RhdGUiOiJCYXJ1ZXJpIC0gU1AiLCJoYXNTZW50UmVmZXJlbmNlIjoiZmFsc2UiLCJ2NDBDb2RlIjoiNCIsInNlY29uZGFyeVByb2R1Y3ROYW1lIjoiQSBWSVNUQSIsInBheW1lbnRUcmFuc2FjdGlvbklkIjoiNDFmYzNlZDItYjc4MS00Y2M0LWEyM2EtYWExYTdiN2JjNWQwIiwiYXZhaWFibGVCYWxhbmNlIjoiMCIsInBhbiI6IioqKioqKioqKioqKjAwMDAiLCJvcmlnaW5hbFRyYW5zYWN0aW9uSWQiOiIwIiwib3JpZ2luYWxUcmFuc2FjdGlvbkRhdGUiOiIwOS8wMi8yNCIsInNlY29uZGFyeVByb2R1Y3RDb2RlIjoiMjA0IiwiZG9jdW1lbnRUeXBlIjoiSiIsImhhc1NlbnRNZXJjaGFudENvZGUiOiJmYWxzZSIsInN0YXR1c0NvZGUiOiIxIiwibWVyY2hhbnRBZGRyZXNzIjoiQWxhbWVkYSBHcmFqYXUsIDIxOSIsIm1lcmNoYW50Q29kZSI6IjAwMTAwMDAyNDQ0NzAwMDEiLCJwYXltZW50VHlwZUNvZGUiOiIxIiwiaGFzQ29ubmVjdGl2aXR5IjoidHJ1ZSIsInByb2R1Y3ROYW1lIjoiQ1JFRElUTyBBIFZJU1RBIC0gSSIsIm1lcmNoYW50TmFtZSI6IkxPSkEgT04iLCJlbnRyYW5jZU1vZGUiOiI2NjEwMTAxMDcwODAiLCJjYXJkQ2FwdHVyZVR5cGUiOiI2IiwiZmlyc3RRdW90YUFtb3VudCI6IjAiLCJ0b3RhbGl6ZXJDb2RlIjoiMCIsInJlcXVlc3REYXRlIjoiMTcwNzQ5OTc2MDI5OSIsImFwcGxpY2F0aW9uSWQiOiJjaWVsby5sYXVuY2hlciIsImJvYXJkaW5nVGF4IjoiMCIsIm51bWJlck9mUXVvdGFzIjoiMCIsImRvY3VtZW50IjoiMDAwMDAwMDAwMDAwMDAifSwicHJpbWFyeUNvZGUiOiI0IiwicmVxdWVzdERhdGUiOiIxNzA3NDk5NzYwMjk5Iiwic2Vjb25kYXJ5Q29kZSI6IjIwNCIsInRlcm1pbmFsIjoiNjIwMDAxMTIifSx7ImFjY2Vzc0tleSI6IiIsImFtb3VudCI6MzYyMCwiYXBwbGljYXRpb25OYW1lIjoiY29tLmFkcy5saW8udXJpYXBwY2xpZW50IiwiYXV0aENvZGUiOiIxNDMwMDUiLCJicmFuZCI6IiIsImNpZWxvQ29kZSI6IjkxMDc5NCIsImRlc2NyaXB0aW9uIjoiIiwiZGlzY291bnRlZEFtb3VudCI6MCwiZXh0ZXJuYWxJZCI6IjczNTFkZWI1LTlkYTgtNGQ4ZC1iN2E5LWRlYWQyZjY3M2RkMSIsImlkIjoiODkwNjliNzEtMTE5ZS00MjFjLTgyODUtYmNjODNlZWU0ZWViIiwiaW5zdGFsbG1lbnRzIjowLCJtYXNrIjoiKioqKioqKioqKioqMjgxMCIsIm1lcmNoYW50Q29kZSI6IjAwMTAwMDAyNDQ0NzAwMDEiLCJwYXltZW50RmllbGRzIjp7ImlzRG91YmxlRm9udFByaW50QWxsb3dlZCI6InRydWUiLCJiaW4iOiIwIiwiaGFzUGFzc3dvcmQiOiJmYWxzZSIsInByaW1hcnlQcm9kdWN0Q29kZSI6IjQiLCJpc0V4dGVybmFsQ2FsbCI6InRydWUiLCJwcmltYXJ5UHJvZHVjdE5hbWUiOiJDUkVESVRPIiwicmVjZWlwdFByaW50UGVybWlzc2lvbiI6IjEiLCJpc09ubHlJbnRlZ3JhdGlvbkNhbmNlbGFibGUiOiJmYWxzZSIsInVwRnJvbnRBbW91bnQiOiIwIiwiY3JlZGl0QWRtaW5UYXgiOiIwIiwiZXh0ZXJuYWxDYWxsTWVyY2hhbnRDb2RlIjoiMDAxMDAwMDI0NDQ3MDAwMSIsImZpcnN0UXVvdGFEYXRlIjoiMCIsImlzRmluYW5jaWFsUHJvZHVjdCI6InRydWUiLCJoYXNQcmludGVkQ2xpZW50UmVjZWlwdCI6ImZhbHNlIiwiaGFzU2lnbmF0dXJlIjoiZmFsc2UiLCJhcHBsaWNhdGlvbk5hbWUiOiJjb20uYWRzLmxpby51cmlhcHBjbGllbnQiLCJoYXNXYXJyYW50eSI6ImZhbHNlIiwiaW50ZXJlc3RBbW91bnQiOiIwIiwiY2hhbmdlQW1vdW50IjoiMCIsInNlcnZpY2VUYXgiOiIwIiwiY2l0eVN0YXRlIjoiQmFydWVyaSAtIFNQIiwiaGFzU2VudFJlZmVyZW5jZSI6ImZhbHNlIiwidjQwQ29kZSI6IjI4Iiwic2Vjb25kYXJ5UHJvZHVjdE5hbWUiOiJBIFZJU1RBIiwicGF5bWVudFRyYW5zYWN0aW9uSWQiOiI0MWZjM2VkMi1iNzgxLTRjYzQtYTIzYS1hYTFhN2I3YmM1ZDAiLCJhdmFpYWJsZUJhbGFuY2UiOiIwIiwicGFuIjoiKioqKioqKioqKioqMjgxMCIsIm9yaWdpbmFsVHJhbnNhY3Rpb25JZCI6IjkxMDc5MiIsIm9yaWdpbmFsVHJhbnNhY3Rpb25EYXRlIjoiMDkvMDIvMjQiLCJzZWNvbmRhcnlQcm9kdWN0Q29kZSI6IjIwNCIsImRvY3VtZW50VHlwZSI6IkoiLCJoYXNTZW50TWVyY2hhbnRDb2RlIjoiZmFsc2UiLCJzdGF0dXNDb2RlIjoiMiIsIm1lcmNoYW50QWRkcmVzcyI6IkFsYW1lZGEgR3JhamF1LCAyMTkiLCJtZXJjaGFudENvZGUiOiIwMDEwMDAwMjQ0NDcwMDAxIiwicGF5bWVudFR5cGVDb2RlIjoiMSIsImhhc0Nvbm5lY3Rpdml0eSI6InRydWUiLCJwcm9kdWN0TmFtZSI6IkNSRURJVE8gQSBWSVNUQSAtIEkiLCJtZXJjaGFudE5hbWUiOiJMT0pBIE9OIiwiZW50cmFuY2VNb2RlIjoiNjYxMDEwMTA3MDgwIiwiY2FyZENhcHR1cmVUeXBlIjoiNiIsImZpcnN0UXVvdGFBbW91bnQiOiIwIiwidG90YWxpemVyQ29kZSI6IjAiLCJyZXF1ZXN0RGF0ZSI6IjE3MDc0OTk3ODA1NTMiLCJhcHBsaWNhdGlvbklkIjoiY29tLmFkcy5saW8udXJpYXBwY2xpZW50IiwiYm9hcmRpbmdUYXgiOiIwIiwibnVtYmVyT2ZRdW90YXMiOiIwIiwiZG9jdW1lbnQiOiIwMDAwMDAwMDAwMDAwMCJ9LCJwcmltYXJ5Q29kZSI6IjQiLCJyZXF1ZXN0RGF0ZSI6IjE3MDc0OTk3ODA1NTMiLCJzZWNvbmRhcnlDb2RlIjoiMjA0IiwidGVybWluYWwiOiI2MjAwMDExMiJ9XSwicGVuZGluZ0Ftb3VudCI6MzYyMCwicHJpY2UiOjM2MjAsInJlZmVyZW5jZSI6IlJlZmVyZW5jZSIsInN0YXR1cyI6IkVOVEVSRUQiLCJ0eXBlIjoiUEFZTUVOVCIsInVwZGF0ZWRBdCI6IkZlYiA5LCAyMDI0IDI6Mjk6NDEgUE0ifQ==<span class="err">&amp;</span>responsecode=0
</code></pre></div></div>

<blockquote>
  <p><strong>Atenção:</strong> O campo statusCode=1 indica uma transação de pagamento e statusCode=2 Cancelamento. Você pode utilizar esse campo para identificar a transação de cancelamento no JSON recebido.</p>
</blockquote>

<h2 id="cashless">Cashless</h2>

<p>A Cielo LIO oferece a solução de pagamento cashless via integração, suportamos no momento os 
cartões Mifare 1k. Para utilizar o serviço no aplicativo de integração podemos começar adicionando 
no arquivo de manifesto a seguinte permissão:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">uses</span><span class="o">-</span><span class="n">permission</span> <span class="nl">android:</span><span class="n">name</span><span class="o">=</span><span class="s">"cielo.lio.permission.CASHLESS"</span><span class="o">/&gt;</span>
</code></pre></div></div>

<h3 id="mifare">Mifare</h3>

<p>Os cartões Mifare armazenam dados em uma pequena antena integrada, permitindo que eles se comuniquem com os leitores quando estão em proximidade. Referente a capacidade de armazenamento, hoje damos suporte aos cartões Mifare 1k, sua memória está organizada em blocos e setores, onde cada bloco possui uma capacidade de armazenamento de 16 bytes de dados, cada setor é composto por 4 blocos, totalizando 64 bytes de dados.</p>

<p>Nossa integração híbrida não depende do SDK Lio, basta o integrador criar uma intent, passá-la como parâmetro no método <em>startService</em> disponível via context da aplicação.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="n">action</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<p>Descrição dos parâmetros utilizados na operação anterior:</p>

<table>
  <thead>
    <tr>
      <th>ATRIBUTO</th>
      <th>DESCRIÇÃO</th>
      <th>DOMÍNIO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>action</td>
      <td>Operação que deseja realizar.</td>
      <td>cielo.lio.cashless.mifare.DETECT</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>cielo.lio.cashless.mifare.AUTHENTICATE</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>cielo.lio.cashless.mifare.READ</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>cielo.lio.cashless.mifare.WRITE</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>cielo.lio.cashless.mifare.INCREMENT</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>cielo.lio.cashless.mifare.DECREMENT</td>
    </tr>
    <tr>
      <td>cbType</td>
      <td>Forma que deseja receber o retorno da operação</td>
      <td>A - Activity</td>
    </tr>
    <tr>
      <td> </td>
      <td>(callback).</td>
      <td>B - Broadcast Reciver</td>
    </tr>
    <tr>
      <td> </td>
      <td><strong>Obs:</strong> É de responsabilidade do integrador</td>
      <td>S - Service</td>
    </tr>
    <tr>
      <td> </td>
      <td>implementar a funcionalidade que irá tratar a</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>resposta do serviço.</td>
      <td> </td>
    </tr>
    <tr>
      <td>cbPackage</td>
      <td>PackageName do app que está realizando a</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>integração.</td>
      <td> </td>
    </tr>
    <tr>
      <td>cbAction</td>
      <td>Atributo que enviamos no retorno da operação,</td>
      <td>AUTH_CALLBACK_READ</td>
    </tr>
    <tr>
      <td> </td>
      <td>serve para o integrador descobrir na resposta</td>
      <td>AUTH_CALLBACK_WRITE</td>
    </tr>
    <tr>
      <td> </td>
      <td>qual foi a operação executada.</td>
      <td>AUTH_CALLBACK_INCR</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>AUTH_CALLBACK_DECR</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>DETECT_CALLBACK</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>AUTHENTICATE_CALLBACK</td>
    </tr>
  </tbody>
</table>

<p>Por fim chamamos o método <em>startService</em> para iniciarmos o serviço mifare na Lio.</p>

<h3 id="descrição-dos-parâmetros-utilizados-nas-operações-de-leitura-e-escrita-passados-via-intent">Descrição dos parâmetros utilizados nas operações de leitura e escrita passados via intent</h3>

<table>
  <thead>
    <tr>
      <th>ATRIBUTO</th>
      <th>DESCRIÇÃO</th>
      <th>DOMÍNIO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>sector</td>
      <td>O setor de cartões inicia do zero.</td>
      <td>Byte</td>
    </tr>
    <tr>
      <td>block</td>
      <td>O bloco no setor, inicia do zero.</td>
      <td>Byte</td>
    </tr>
    <tr>
      <td>data</td>
      <td>Os dados a serem inseridos no bloco.</td>
      <td>ByteArray</td>
    </tr>
    <tr>
      <td>value</td>
      <td>O valor para incrementar ou decrementar</td>
      <td>Byte</td>
    </tr>
    <tr>
      <td>keyType</td>
      <td>O tipo de chave para autenticar no setor (A ou B)</td>
      <td>Char</td>
    </tr>
    <tr>
      <td>key</td>
      <td>A chave para autenticar no setor.</td>
      <td>ByteArray</td>
    </tr>
    <tr>
      <td>destinationBlock</td>
      <td>O bloco para backup ou restaurar.</td>
      <td>Byte</td>
    </tr>
  </tbody>
</table>

<h3 id="operações-suportadas-pelo-serviço-mifare">Operações suportadas pelo serviço Mifare</h3>

<p>Como vimos no exemplo anterior, para realizar operações com cartão Mifare basta o integrador criar uma <em>intent</em>(seguindo nossa especificação) e utilizá-la como parâmetro do método startService, disponível na classe context.</p>

<ul>
  <li>Detect</li>
  <li>Authenticate</li>
  <li>Read</li>
  <li>Write</li>
  <li>Increment</li>
  <li>Decrement</li>
  <li>Deactivate</li>
  <li>Backup</li>
  <li>Restore</li>
</ul>

<h4 id="detect">Detect</h4>

<p>A operação tem a responsabilidade de ativar a antena e aguardar a aproximação de um cartão. Em caso de sucesso na operação, a intent de retorno conterá o parâmetro <code class="language-plaintext highlighter-rouge">result</code>, que é uma String com o valor <code class="language-plaintext highlighter-rouge">R00</code>, e o parâmetro <code class="language-plaintext highlighter-rouge">data</code>, que é um ByteArray contendo o identificador do cartão. Se a operação resultar em erro, o parâmetro <code class="language-plaintext highlighter-rouge">result</code> retornará uma String com um valor diferente de <code class="language-plaintext highlighter-rouge">R00</code>, e o identificador do cartão não será retornado no parâmetro <code class="language-plaintext highlighter-rouge">data</code>.</p>

<p>Exemplo de chamada <strong><em>detect</em></strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.DETECT"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<p><strong>Obs</strong>: Lembrando que o parâmetro cbType é customizável, não necessariamente o integrador precisa tratar a resposta via broadcast, fica a seu critério as opções abaixo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>B -&gt; Broadcast
S -&gt; Service
A -&gt; Activity
</code></pre></div></div>

<h4 id="authenticate">Authenticate</h4>

<p>Operação responsável por autenticar-se no setor, para que possa operar no mesmo. É importante estar contido na intent as informações de setor, chave e tipo de chave (sector, key, keyType).</p>

<p>Exemplo de chamada <strong>authenticate</strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.AUTHENTICATE"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"sector"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="nc">MifareClassic</span><span class="o">.</span><span class="na">KEY_DEFAULT</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"keyType"</span><span class="o">,</span> <span class="sc">'A'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<h4 id="read">Read</h4>

<p>Operação responsável por realizar a leitura nos blocos e setores. É importante que a intent que iremos passar como parâmetro tenham as informações de setor e bloco (sector, block).</p>

<p>Exemplo de chamada <strong>read</strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.READ"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"sector"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"block"</span><span class="o">,</span> <span class="s">"0"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<h4 id="write">Write</h4>

<p>Esta operação nos permite escrever em um setor e bloco específico. É importante adicionar na intent as informações de setor, do bloco e data (sector, block e data).</p>

<p>Exemplo de chamada <strong>write</strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.WRITE"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"sector"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"block"</span><span class="o">,</span> <span class="s">"0"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"data"</span><span class="o">,</span> <span class="s">"100"</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">())</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<h4 id="increment">Increment</h4>

<p>Operação responsável pelo incremento de valor em um bloco específico. É importante conter na intent as informações de setor, do bloco e valor (sector, block e value).</p>

<p>Exemplo de chamada <strong>increment</strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.INCREMENT"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"sector"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"block"</span><span class="o">,</span> <span class="s">"0"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"value"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<h4 id="decrement">Decrement</h4>

<p>Operação responsável pelo decremento de valor em um bloco específico. É importante conter na intent as informações de setor, do bloco e valor (sector, block e value).
Exemplo de chamada <strong>decrement</strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.DECREMENT"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"sector"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"block"</span><span class="o">,</span> <span class="s">"0"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"value"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<h4 id="deactivate">Deactivate</h4>

<p>Operação de encerramento do serviço, use-o quando estiver terminado. 
Exemplo de chamada <strong>deactivate</strong>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.DEACTIVATE"</span><span class="o">)</span>
 <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
 <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
 <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
 <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
 <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<h4 id="backup-e-restore">Backup e Restore</h4>

<p>Operações de transferência dos dados de um bloco para outro, também conhecida em algumas documentações do Mifare como <em>transfer</em>. É importante a <em>intent</em> conter informações de setor, bloco e bloco de destino. (sector, block e destinationBlock).</p>

<p>Exemplo de chamada:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.BACKUP"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
  <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"block"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
  <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"destinationBlock"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>

  <span class="nc">Intent</span><span class="o">(</span><span class="s">"cielo.lio.cashless.mifare.RESTORE"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPackage</span><span class="o">(</span><span class="s">"cielo.lio.cashless"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbType"</span><span class="o">,</span> <span class="sc">'B'</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbPackage"</span><span class="o">,</span> <span class="n">packageName</span><span class="o">)</span>
    <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"cbAction"</span><span class="o">,</span> <span class="n">cbAction</span><span class="o">)</span>
  <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"block"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
  <span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"destinationBlock"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">.</span><span class="na">toByte</span><span class="o">())</span>
    <span class="o">.</span><span class="na">let</span><span class="o">(::</span><span class="n">startService</span><span class="o">)</span>
</code></pre></div></div>

<h3 id="retorno-das-operações-para-o-aplicativo-do-cliente">Retorno das operações para o aplicativo do cliente.</h3>

<p>Os componentes para tratar os retornos para as operações que acabamos de descrever podem ser variados (broadcast, service, intent), o que todos têm em comum é que passamos uma <em>intent</em> como parâmetro, nesta teremos os seguintes atributos:</p>

<table>
  <thead>
    <tr>
      <th>ATRIBUTO</th>
      <th>DESCRIÇÃO</th>
      <th>DOMÍNIO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>result</td>
      <td>R00 significa sucesso, qualquer outro valor significa falha.</td>
      <td>String</td>
    </tr>
    <tr>
      <td>detail</td>
      <td>Mensagem de retorno.</td>
      <td>String</td>
    </tr>
    <tr>
      <td>data</td>
      <td>Em caso de operação de leitura, o parâmetro retorna o que foi lido do cartão, para outras operações o retorno é nulo.</td>
      <td>byteArray</td>
    </tr>
  </tbody>
</table>

<p>Abaixo disponibilizando uma classe de exemplo que consume a API do Mifare, a implementação está em Kotlin e o modo de consumo escolhido foi o broadcast.</p>

<h4 id="exemplo-de-classe-para-tratamento-do-retorno-utilizando-broadcast">Exemplo de classe para tratamento do retorno utilizando broadcast</h4>

<p>Abaixo disponiblizamos um exemplo de solução que trata o retorno das operações mifare utilizando broadcast</p>

<p><a href="https://gist.github.com/vitorxsilva/ce74101755f4b3acc77c2dc988b4d60f">Clique aqui</a> para ver exemplo de solução.</p>

<h2 id="impressão">Impressão</h2>

<p>Para realizar a impressão, basta montar uma URL com o seguinte formato:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">lio:</span><span class="c1">//print?request=$base64&amp;urlCallback=order://response</span>
</code></pre></div></div>

<h3 id="segue-abaixo-alguns-exemplos-de-impressão">Segue abaixo, alguns exemplos de impressão:</h3>

<h5 id="texto">Texto</h5>

<p>Para otimizar a performance ao usar o Printer Manager para imprimir textos com múltiplas linhas, é aconselhável evitar a invocação do método de impressão para cada linha individualmente.</p>

<p>Em vez disso, recomenda-se a formatação do texto completo, incluindo todas as linhas, e a realização de uma única chamada a operação <code class="language-plaintext highlighter-rouge">PRINT_TEXT</code>.</p>

<p>Isso reduz o número de chamadas ao método de impressão, melhorando a eficiência do processo.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRINT_TEXT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"styles"</span><span class="p">:</span><span class="w"> </span><span class="p">[{}],</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"TEXTO PARA IMPRIMIR NA PRIMEIRA LINHA</span><span class="se">\n</span><span class="s2">TEXTO PARA IMPRIMIR NA SEGUNDA LINHA</span><span class="se">\n</span><span class="s2">TEXTO PARA IMPRIMIR NA TERCEIRA LINHA</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Neste exemplo, o texto completo é formatado como uma única string, com cada linha separada por um caractere de nova linha (“\n”).</p>

<h5 id="imagem">Imagem</h5>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRINT_IMAGE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"styles"</span><span class="p">:</span><span class="w"> </span><span class="p">[{}],</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/storage/emulated/0/saved_images/Image-5005.jpg"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h5 id="múltiplas-colunas">Múltiplas Colunas</h5>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRINT_MULTI_COLUMN_TEXT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"styles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key_attributes_align"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"key_attributes_textsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="nl">"key_attributes_typeface"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key_attributes_align"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"key_attributes_textsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
      </span><span class="nl">"key_attributes_typeface"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"key_attributes_align"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"key_attributes_textsize"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="nl">"key_attributes_typeface"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Texto alinhado à esquerda.</span><span class="se">\n\n\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Texto centralizado</span><span class="se">\n\n\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Texto alinhado à direita</span><span class="se">\n\n\n</span><span class="s2">"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="code-sample">Code Sample</h2>

<p>Disponiblizamos 2 exemplos em diferentes linguagens para auxiliar no desenvolvimento:</p>

<p>Acesse o nosso projeto de exemplo em: <a href="https://github.com/matheus-caldeira/cielo_sample">React Native</a></p>

<p>Acesse o nosso projeto de exemplo em: <a href="https://github.com/DeveloperCielo/LIO-Hybrid-Integration-Sample-Flutter">Flutter</a></p>

<h1 id="integração-remota">Integração Remota</h1>

<h2 id="apresentação">Apresentação</h2>

<p>O objetivo da Integração Remota da Cielo LIO é permitir que o lojista continue utilizando sua solução de frente de caixa (Automação Comercial ou PDV) e a integre com o módulo de pedidos e pagamentos da Cielo LIO através de uma API construída no padrão RESTful.</p>

<p>Dessa forma, toda a gestão do estabelecimento comercial fica sob responsabilidade da Automação Comercial e, no momento de realizar o pagamento, a Cielo LIO é utilizada.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Integracao_remota_0.png" alt="integração remota" /></p>

<p>A API Order Manager da Cielo LIO possui as seguintes características:</p>

<ul>
  <li>Recursos REST, de forma que seja possível acessar por meio de semântica HTTP padrão.</li>
  <li>Códigos de status HTTP para comunicar o sucesso/erro nas chamadas.</li>
  <li>Todas as requisições e respostas encontram-se no formato JSON.</li>
  <li>As seções abaixo possuem todas as informações necessárias para realizar a integração de forma rápida e segura.</li>
</ul>

<h3 id="code-sample-1">Code Sample</h3>

<p>O código do exemplo da Automação Comercial integrada com a API Order Manager da Cielo LIO encontra-se disponível no <a href="https://github.com/cielolabsbr/SampleAutomacaoComercial1.2">GitHub</a>.</p>

<h2 id="fluxo-para-integração">Fluxo para Integração</h2>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/fluxogram-remote-new.png" alt="fluxo integração remota" /></p>

<h2 id="api-docs">API Docs</h2>

<p>Nessa documentação, o desenvolvedor encontra todas as informações sobre os Endpoints, Entidades e Recursos disponíveis na API.</p>

<p>Você poderá consultar os dados de entrada, exemplos de requisição e os dados de saída. Assim como entender o fluxo básico da utilização da API Order Manager da Cielo LIO.</p>

<h3 id="endpoints">Endpoints</h3>

<p>Todas as chamadas devem ser executadas utilizando as respectivas credenciais dos ambientes de sandbox e produção.</p>

<h4 id="sandbox">Sandbox</h4>

<p>O ambiente de sandbox é destinado à realização de testes com parceiros da Cielo. Esse ambiente usa simuladores de integração. Assim, as operações não são executadas em ambiente produtivo.</p>

<p>Para utilizar o ambiente de sandbox, não é necessário que você forneça o número do estabelecimento. Você poderá iniciar os testes sem a necessidade de ter uma Cielo LIO. Para obter os tokens de sandbox, crie uma conta no portal e crie o Client-Id.</p>

<p>Utilize o endereço de sandbox abaixo para realizar os testes:</p>

<blockquote>
  <p>https://api.cielo.com.br/sandbox-lio/order-management/v1</p>
</blockquote>

<h4 id="produção">Produção</h4>

<p>O ambiente de produção é o ambiente transacional integrado ao ambiente da Cielo. As operações realizadas nesse ambiente não podem ser desfeitas.</p>

<p>Para utilizar o ambiente de produção, é necessário que você entre em contato através do formulário. Juntamente com os dados pessoais, forneça o número do estabelecimento. Para utilizar o ambiente de produção, é necessário que você possua uma Cielo LIO.</p>

<p>Utilize o endereço de produção abaixo para realizar as requisições:</p>

<blockquote>
  <p>https://api.cielo.com.br/order-management/v1</p>
</blockquote>

<p>Já fez os testes em sandbox e deseja solicitar os tokens?</p>

<p>Clique em <a href="https://devcielo.zendesk.com/hc/pt-br/requests/new?ticket_form_id=526108">Solicitar Tokens</a></p>

<p>É necessário estar logado!</p>

<h3 id="http-headers">HTTP Headers</h3>

<p>Todas as chamadas da API Integração Remota Cielo LIO Order Manager necessitam que as informações abaixo estejam presentes no Header na requisição:</p>

<p><strong>Client-Id</strong>: Identificação de acesso. Sua geração ocorre no momento da criação pelo painel do desenvolvedor. Seu valor pode ser visualizado na coluna “Client ID”, dentro do menu “Desenvolvedor” -&gt; “Client ID Cadastrados”.</p>

<p><strong>Access-Token</strong>:Identificação do token de acesso, que armazena as regras de acesso permitidas ao Client ID. Sua geração ocorre no momento da criação do Client ID pelo painel do desenvolvedor. Seu valor pode ser visualizado clicando em “detalhes” na coluna “Access Tokens”, dentro do menu “Desenvolvedor” -&gt; “Client ID Cadastrados”.</p>

<p><strong>Merchant-Id</strong>: Token que identifica o estabelecimento comercial dentro do servidor Order Manager da Cielo LIO. Sua geração ocorre durante o processo de cadastro do Client ID. Seu valor pode ser visualizado na coluna “Merchant ID”, dentro do menu “Desenvolvedor” -&gt; “Client ID Cadastrados”.</p>

<h3 id="http-status-code">HTTP Status Code</h3>

<table>
  <thead>
    <tr>
      <th>Código</th>
      <th>Erro</th>
      <th>Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200</td>
      <td>OK</td>
      <td>Operação realizada com sucesso.</td>
    </tr>
    <tr>
      <td>201</td>
      <td>Created</td>
      <td>A solicitação foi realizada, resultando na criação de um novo recurso.</td>
    </tr>
    <tr>
      <td>204</td>
      <td>Empty</td>
      <td>Operação realizada com sucesso, mas nenhuma resposta foi retornada.</td>
    </tr>
    <tr>
      <td>400</td>
      <td>Bad Request</td>
      <td>A requisição possui parâmetro(s) inválido(s).</td>
    </tr>
    <tr>
      <td>401</td>
      <td>Unauthorized</td>
      <td>O token de acesso não foi informado ou não possui acesso às APIs.</td>
    </tr>
    <tr>
      <td>403</td>
      <td>Forbidden</td>
      <td>O acesso ao recurso foi negado.</td>
    </tr>
    <tr>
      <td>404</td>
      <td>Not Found</td>
      <td>O recurso informado no request não foi encontrado.</td>
    </tr>
    <tr>
      <td>413</td>
      <td>Request is to Large</td>
      <td>A requisição está ultrapassando o limite permitido para o perfil do seu token de acesso.</td>
    </tr>
    <tr>
      <td>422</td>
      <td>Unprocessable Entity</td>
      <td>A requisição possui parâmetros obrigatórios não informados.</td>
    </tr>
    <tr>
      <td>429</td>
      <td>Too Many Requests</td>
      <td>O consumidor estourou o limite de requisições por tempo.</td>
    </tr>
    <tr>
      <td>500</td>
      <td>Internal Server Error</td>
      <td>Erro não esperado; algo está quebrado na API</td>
    </tr>
  </tbody>
</table>

<h3 id="status-de-pedido">Status de pedido</h3>

<p>Abaixo é apresentada uma máquina de estados, com os possíveis estados que um pedido pode assumir desde o momento de sua criação até o seu término:</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Status_de_pedido_1.png" alt="status do pedido" /></p>

<h3 id="entidades">Entidades</h3>

<h4 id="order">Order</h4>

<p>A Order é uma representação de um pedido para a venda de um ou mais produtos e/ou serviços. É fundamental que exista uma Order para que um pagamento seja realizado na Cielo LIO.</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>Texto</td>
      <td>UUID que identifica unicamente o pedido.</td>
      <td>criado pela API</td>
    </tr>
    <tr>
      <td>number</td>
      <td>Texto</td>
      <td>Número do pedido. Geralmente, esse número representa o identificador do pedido em um sistema externo através da integração com parceiros.</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>reference</td>
      <td>Texto</td>
      <td>Referência do pedido. Utilizada para facilitar o acesso ou a localização do mesmo.</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Texto</td>
      <td>Status do pedido (ENTERED, RE-ENTERED, PAID, CANCELED e CLOSED).</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>created_at</td>
      <td>Texto</td>
      <td>Data de criação do pedido. A data deve estar no formato: YYYY-MM-DDThh:mm:ssZ (Exemplo: 20151020T13:13:29.000Z).</td>
      <td>criado pela API</td>
    </tr>
    <tr>
      <td>updated_at</td>
      <td>Texto</td>
      <td>Data da última atualização do pedido. A data deve estar no formato: YYYY-MM-DDThh:mm:ssZ (Exemplo: 20151020T13:13:29.000Z).</td>
      <td>criado pela API</td>
    </tr>
    <tr>
      <td>items</td>
      <td>Lista (Order Item)</td>
      <td>Lista de itens contidos no pedido.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>notes</td>
      <td>Texto</td>
      <td>Campo disponível para uso do Merchant para comunicação.</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>transactions</td>
      <td>Lista (Transaction)</td>
      <td>Lista de transações de pagamento (ou outros tipos) efetuadas no pedido.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>price</td>
      <td>Número</td>
      <td>Valor total do pedido. Exemplo: O valor de R$ 10,00 é representado como 1000.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>remaining</td>
      <td>Número</td>
      <td>Valor restante do pagamento do pedido. Exemplo: O valor de R$ 10,00 é representado como 1000.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<h4 id="order-item">Order Item</h4>

<p>O Order Item é uma representação dos itens presentes em uma Order. É obrigatória a existência de, no mínimo, um Item para uma Order.</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>sku</td>
      <td>Texto</td>
      <td>SKU do produto. Exemplo: c2f5fb9a-5542-406e-8b79-17892329cda8.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>name</td>
      <td>Texto</td>
      <td>Nome do produto.</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>description</td>
      <td>Texto</td>
      <td>Descrição do produto.</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>unit_price</td>
      <td>Número</td>
      <td>Valor unitário do produto. Exemplo: O valor de R$ 10,00 é representado como 1000.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>quantity</td>
      <td>Número</td>
      <td>Quantidade de itens. Caso não seja informado, será considerado o valor 1.</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>unit_of_measure</td>
      <td>Texto</td>
      <td>Unidade de medida (EACH, HOURS, DAYS, SECONDS, CRATE_OF_12, SIX_PACK, GALLON e LITRE).</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>details</td>
      <td>Texto</td>
      <td>Detalhes do produto.</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>created_at</td>
      <td>Texto</td>
      <td>Data de criação do pedido. A data deve estar no formato: YYYY-MM-DDThh:mm:ssZ (Exemplo: 20151020T13:13:29.000Z).</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>updated_at</td>
      <td>Texto</td>
      <td>Data de última atualização do pedido. A data deve estar no formato: YYYY-MM-DDThh:mm:ssZ (Exemplo: 20151020T13:13:29.000Z).</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<h4 id="transaction">Transaction</h4>

<p>A Transaction é uma representação com todos os pagamentos que foram realizados em uma Order. O objetivo é utilizá-la para consultar os pagamentos (transactions) que foram efetuados em uma Order.</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>Texto</td>
      <td>“UUID” que identifica unicamente a transação.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>external_id</td>
      <td>Texto</td>
      <td>Identificador unico ordem.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>status</td>
      <td>Texto</td>
      <td>Status da transação (CONFIRMED, PENDING e CANCELLED).</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>terminal_number</td>
      <td>Número</td>
      <td>Número do terminal da Cielo LIO em que o pagamento foi realizado.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>authorization_code</td>
      <td>Número</td>
      <td>Código de autorização da transação.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>number</td>
      <td>Texto</td>
      <td>Número Sequencial Único (NSU) da transação.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>amount</td>
      <td>Número</td>
      <td>Valor da transação. Exemplo: O valor de R$ 10,00 é representado como 1000.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>transaction_type</td>
      <td>Texto</td>
      <td>Tipo da transação (PAYMENT e CANCELLATION).</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<h4 id="card">Card</h4>

<p>O Card é uma representação do cartão que foi utilizado para realizar o pagamento/transação.</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>brand</td>
      <td>Texto</td>
      <td>Bandeira do cartão (VISA e MASTER).</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>mask</td>
      <td>Número</td>
      <td>Número do cartão mascarado</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<h4 id="payment-product">Payment Product</h4>

<p>O Payment Product é uma representação da forma de pagamento utilizada para realizar um pagamento.
Ex.: Crédito, Débito, etc.</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>primary_product_name</td>
      <td>Texto</td>
      <td>Forma de pagamento (CREDITO ou DEBITO)</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>secondary_product_name</td>
      <td>Texto</td>
      <td>Tipo de pagamento (A VISTA, PARCELADO LOJA ou PARCELADO ADM)</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>number_of_quotas</td>
      <td>Número</td>
      <td>Número de parcelas (0 para pagamentos à vista)</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<h3 id="recursos">Recursos</h3>

<h4 id="post---criar-um-pedido">POST - Criar um pedido</h4>

<p>Esse recurso realiza a criação de um pedido no servidor do Order Manager.</p>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>POST</strong> /orders</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>order</td>
      <td>Order</td>
      <td>Informações do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "number": "0992f1d5cee540d9a9648f4d6a9e4aa6",
    "reference": "PEDIDO #1234",
    "status": "DRAFT",
    "items": [{
            "sku": "ede8f84a8b8645cb8e576a593c25c6ed",
            "name": "produto 1",
            "unit_price": 500,
            "quantity": 2,
            "unit_of_measure": "EACH"
        },
        {
            "sku": "c2f5fb9a5542406e8b7917892329cda8",
            "name": "produto 2",
            "unit_price": 1500,
            "quantity": 3,
            "unit_of_measure": "EACH"
        },
        {
            "sku": "b2j4bn6j93461385r5n90453407hjk0",
            "name": "produto 3",
            "unit_price": 550,
            "quantity": 3,
            "unit_of_measure": "EACH"
        },
        {
            "sku": "55329cda842406e8cv2f5gdf96985152d",
            "name": "produto 4",
            "unit_price": 2005,
            "unit_of_measure": "EACH"
        }
    ],
    "notes": "Mesa 1",
    "price": 9155
}
</code></pre></div></div>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>body</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "id": "2e1d7b07-dcee-4a09-8d09-3bb02d94169d"
}
</code></pre></div></div>

<h4 id="get---consultar-pedido">GET - Consultar pedido</h4>

<p>Esse recurso é utilizado para obter informações sobre um pedido específico. O id do pedido é utilizado para realizar a chamada.</p>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>GET</strong> /orders/</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>GET</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>order</td>
      <td>Order</td>
      <td>Informações sobre o pedido consultado.</td>
      <td>Não</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    {
    "id": "b4d8a7dc-4250-48a3-bf18-d560d4508368",
    "number": "0992f1d5-cee5-40d9-a964-8f4d6a9e4aa6",
    "reference": "LOJA SUCO #1",
    "status": "ENTERED",
    "notes": "Mesa 6",
    "price": 5250,
    "created_at": "2016-09-06T19:09:49Z",
    "updated_at": "2016-09-06T19:09:49Z",
    "order_type": "PAYMENT",
    "merchant": "0010920335960001",
    "source_id": "4QeQD63ZeKsz",
    "items": [{
            "id": "0687f00a-0aea-48f7-85d0-64bc31977734",
            "sku": "0000001",
            "name": "Suco Detox",
            "unit_price": 800,
            "quantity": 1,
            "unit_of_measure": "EACH"
        },
        {
            "id": "cf561196-4e4c-436b-816b-80190e9a705f",
            "sku": "0000010",
            "name": "Suco de Uva",
            "unit_price": 450,
            "quantity": 5,
            "unit_of_measure": "EACH"
        },
        {
            "id": "16b4b10b-9967-477b-91a2-ecc02e6ff40c",
            "sku": "0000011",
            "name": "Suco de Tomate",
            "unit_price": 500,
            "quantity": 2,
            "unit_of_measure": "EACH"
        },
        {
            "id": "8500c747-1740-47cf-908a-3ab0f8b44193",
            "sku": "0000100",
            "name": "Suco de Abacaxi",
            "unit_price": 400,
            "quantity": 3,
            "unit_of_measure": "EACH"
        }
    ],
    "transactions": []
    }
}
</code></pre></div></div>

<h4 id="get---consultar-todos-os-pedidos">GET - Consultar todos os Pedidos</h4>

<p>Esse recurso é utilizado para obter a lista e as informações de todos os pedidos cadastrados no Order Manager.</p>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>GET</strong> /orders/</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>merchant_id</td>
      <td>query parameter</td>
      <td>Token que identifica o estabelecimento comercial</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>number</td>
      <td>query parameter</td>
      <td>Número do pedido</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>reference</td>
      <td>query parameter</td>
      <td>Referência definida na criação do pedido</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>status</td>
      <td>query parameter</td>
      <td>Status do pedido (ENTERED, RE-ENTERED, PAID, CANCELED e CLOSED)</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>terminal_number</td>
      <td>query parameter</td>
      <td>Número lógico</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>page</td>
      <td>query parameter</td>
      <td>número da página requistada (iniciando em 0)</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>page_size</td>
      <td>query parameter</td>
      <td>quantidade de items por página</td>
      <td>Não</td>
    </tr>
    <tr>
      <td>last_query_date</td>
      <td>query parameter</td>
      <td>Data inicial</td>
      <td>Não</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>GET</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>order</td>
      <td>Order</td>
      <td>Informações sobre o pedido consultado.</td>
      <td>Não</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "id": "b4d8a7dc-4250-48a3-bf18-d560d4508368",
    "number": "0992f1d5-cee5-40d9-a964-8f4d6a9e4aa6",
    "reference": "LOJA SUCO #1",
    "status": "ENTERED",
    "notes": "Mesa 6",
    "price": 5250,
    "created_at": "2016-09-06T19:09:49Z",
    "updated_at": "2016-09-06T19:09:49Z",
    "order_type": "PAYMENT",
    "merchant": "0010920335960001",
    "source_id": "4QeQD63ZeKsz",
    "items": [{
            "id": "0687f00a-0aea-48f7-85d0-64bc31977734",
            "sku": "0000001",
            "name": "Suco Detox",
            "unit_price": 800,
            "quantity": 1,
            "unit_of_measure": "EACH"
        },
        {
            "id": "cf561196-4e4c-436b-816b-80190e9a705f",
            "sku": "0000010",

            "name": "Suco de Uva",
            "unit_price": 450,
            "quantity": 5,
            "unit_of_measure": "EACH"
        },
        {
            "id": "16b4b10b-9967-477b-91a2-ecc02e6ff40c",
            "sku": "0000011",
            "name": "Suco de Tomate",
            "unit_price": 500,
            "quantity": 2,
            "unit_of_measure": "EACH"
        },
        {
            "id": "8500c747-1740-47cf-908a-3ab0f8b44193",
            "sku": "0000100",
            "name": "Suco de Abacaxi",
            "unit_price": 400,
            "quantity": 3,
            "unit_of_measure": "EACH"
        }
    ],
    "transactions": []
}
</code></pre></div></div>

<p>Na consulta de pedidos, é possível informar os parâmetro acima citados, para identificar as ordens criadas conforme mostrado no exemplo abaixo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://api.cielo.com.br/order-management/v1/orders/?reference=EXEMPLO_DE_REFERENCE
</code></pre></div></div>

<h4 id="put--alterar-status-de-um-pedido">PUT- Alterar status de um pedido</h4>

<p>Esse recurso realiza a alteração do status de um pedido criado. O id do pedido é utilizado para realizar a chamada.</p>

<p>As possíveis alterações de status são:</p>

<ul>
  <li>PLACE (Liberar um pedido para pagamento, exibir pedido na Cielo LIO)</li>
  <li>PAY (Alterar um pedido para pago)</li>
  <li>CLOSE (Fechar um pedido)</li>
</ul>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>PUT</strong> /orders/?operation=</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>operation</td>
      <td>query parameter</td>
      <td>Operação que deve ser executada. As possíveis operações são: place (Liberar um pedido para pagamento), pay (deixar um pedido como pago) e close (Fechar um pedido).</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>PUT</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>N/A</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>N/A
</code></pre></div></div>

<p>O retorno 200 dessa operação representa sucesso na requisição.</p>

<h4 id="delete---excluir-um-pedido">DELETE - Excluir um pedido</h4>

<p>Esse recurso é utilizado para excluir um pedido do servidor do Order Manager. O id do pedido é utilizado para realizar a chamada.</p>

<blockquote>
  <p>Somente os pedidos com status <strong>DRAFT</strong> podem ser excluídos.</p>

  <p>Endpoint:</p>

  <p><strong>DELETE</strong> /orders/</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>DELETE</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>N/A</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>N/A
</code></pre></div></div>

<p>O retorno 200 dessa operação representa sucesso na requisição.</p>

<h4 id="post---adicionar-itemitens-em-um-pedido">POST - Adicionar Item/Itens em um Pedido</h4>

<p>Esse recurso é utilizado para adicionar um ou mais itens em um pedido já criado. O id do pedido é utilizado para realizar a chamada.</p>

<blockquote>
  <p>Somente os pedidos com status <strong>DRAFT</strong> podem ter adição de itens.</p>

  <p>Endpoint:</p>

  <p><strong>POST</strong> /orders//items</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "sku": "ede8f84a8b8645cb8e576a593c25c6ed",
    "name": "produto 1"
    "unit_price": 500,
    "quantity": 2,
    "unit_of_measure": "EACH"
}
</code></pre></div></div>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>N/A</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>N/A
</code></pre></div></div>

<p>O retorno 200 dessa operação representa sucesso na requisição.</p>

<h4 id="get---consultar-os-itens-de-um-pedido">GET - Consultar os itens de um pedido</h4>

<p>Esse recurso é utilizado para consultar os itens presentes em um pedido. O id do pedido é utilizado para realizar a chamada.</p>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>GET</strong> /orders//items</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>GET</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>orderItems</td>
      <td>Lista (OrderItem)</td>
      <td>Lista de itens de um pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[{
        "id": 1,
        "sku": "ede8f84a8b8645cb8e576a593c25c6ed",
        "name": "produto 1"
        "unit_price": 500,
        "quantity": 2,
        "unit_of_measure": "EACH"
    },
    {
        "id": 2,
        "sku": "c2f5fb9a5542406e8b7917892329cda8",
        "name": "produto 1"
        "unit_price": 1500,
        "quantity": 3,
        "unit_of_measure": "EACH"
    }
]
</code></pre></div></div>

<h4 id="put---alterar-um-item-em-um-pedido">PUT - Alterar um item em um pedido</h4>

<p>Esse recurso permite alterar informações de um item de um pedido. O id do pedido e o id_item são utilizados para realizar a chamada.</p>

<blockquote>
  <p>Somente os pedidos com status <strong>DRAFT</strong> podem ter itens alterados.</p>

  <p>Endpoint:</p>

  <p><strong>PUT</strong> /orders//items/</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>id_item</td>
      <td>path parameter</td>
      <td>Identificador do item do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>PUT</strong> 
/items/8484df74-eca6-4850-8e4c-35653af0bd31</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "sku": "ede8f84a8b8645cb8e576a593c25c6ed",
    "unit_price": 500,
    "quantity": 2,
    "unit_of_measure": "EACH"
}
</code></pre></div></div>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>N/A</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>O retorno 200 dessa operação representa sucesso na requisição.</p>

<h4 id="delete---excluir-item-de-um-pedido">DELETE - Excluir Item de um pedido</h4>

<p>Esse recurso é utilizado para excluir um item presente em um pedido. O id do pedido e o id_item são utilizados para realizar a chamada.</p>

<blockquote>
  <p>Somente os pedidos com status <strong>DRAFT</strong> podem ter itens alterados.</p>

  <p>Endpoint:</p>

  <p><strong>DELETE</strong> /orders//items/</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
    <tr>
      <td>id_item</td>
      <td>path parameter</td>
      <td>Identificador do item do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>DELETE</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>N/A</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>O retorno 200 dessa operação representa sucesso na requisição.</p>

<h4 id="post---adicionar-uma-transação">POST - Adicionar uma Transação</h4>

<blockquote>
  <p>Recurso utilizado somente para <strong>Ambiente de Sandbox</strong></p>
</blockquote>

<p>Esse recurso permite que o desenvolvedor simule as transações financeiras, adicionando-as manualmente, sendo possível entender o funcionamento em uma Order.</p>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>POST</strong> /orders//transactions</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Transactions</td>
      <td>Lista (Transaction)</td>
      <td>Informações da Transação</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>POST</strong></p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "external_id": "0b37f0d8-017a-4b11-91b9-ec1bb3e8fed3",
  "status": "CONFIRMED",
  "terminal_number": "12345678",
  "authorization_code": "008619",
  "number": "672836",
  "amount": 2000,
  "transaction_type": "PAYMENT",
  "paymentFields": {
    "primaryProductName": "CREDITO",
    "secondaryProductName": "A VISTA",
    "numberOfQuotas": 0
  },
  "card": {
  "brand": "VISA",
  "mask": "******5487"
  }
}
</code></pre></div></div>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>number</td>
      <td>Identificador da Transação</td>
      <td>SIM</td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
id: "00219dd0-1c13-46da-91e5-1c313f0d2e83"
}
</code></pre></div></div>

<p>Em ambiente de Sandbox, onde não há necessidade de ter uma Cielo LIO, e consequentemente não é necessário possuir o número do estabelecimento, faz total sentido fazer essa chamada deste recurso.</p>

<p>Já em ambiente de Produção quem irá criar as transactions é a própria Cielo LIO conforme os pagamentos forem efetuados.</p>

<h4 id="get---consultar-as-transações-de-um-pedido">GET - Consultar as transações de um pedido</h4>

<p>Esse recurso é utilizado para obter as informações de todas as transações realizadas em um pedido. O id do pedido é utilizado para realizar a chamada.
Em ambiente de produção, uma vez que um pagamento for realizado na Cielo LIO a transactions será adicionada automaticamente no pedido e então, será possível obter as informações do pagamento realizado a partir da chamada deste recurso.</p>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>GET</strong> /orders//transactions</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>GET</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>transactions</td>
      <td>Lista (Transaction)</td>
      <td>Lista de transações de um pedido.</td>
      <td>SIM</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
{
  "id": "442bbdbe-41c8-4e22-83ee-e1a849ed3cb5",
  "external_id": "0b37f0d8-017a-4b11-91b9-ec1bb3e8fed3",
  "status": "CONFIRMED",
  "terminal_number": "77102648",
  "authorization_code": "008619",
  "number": "672836",
  "amount": 2000,
  "transaction_type": "PAYMENT",
  "payment_fields": {
  "primary_product_name": "CREDITO",
  "secondary_product_name": "A VISTA",
    "number_of_quotas": 0
  },
  "card": {
    "brand": "VISA",
    "mask": "************3542"
  }
}
]
</code></pre></div></div>

<h4 id="cancelar-pedidos">Cancelar Pedidos</h4>

<p>O cancelamento de pedidos é realizado apenas através da Cielo LIO.
Selecione a função Cancelamento de Vendas e digite o CNPJ da empresa (o mesmo que pode ser visualizado através do comprovante de pagamento). O sistema irá solicitar a senha do supervisor.
Siga todos os passos indicados nas telas seguintes para o cancelamento da venda. É importante salientar que um cancelamento só pode ser realizado em ser valor integral.</p>

<h4 id="get---consultar-as-transações-canceladas-de-um-pedido">GET - Consultar as transações canceladas de um pedido</h4>

<p>Esse recurso é utilizado para obter as informações de todas as transações canceladas em um pedido. O id do pedido é utilizado para realizar a chamada.
Em ambiente de produção, uma vez que o cancelamento for realizado na Cielo LIO a transactions será adicionada automaticamente no pedido juntamente com a transaction do pagamento original.</p>

<blockquote>
  <p>Endpoint:</p>

  <p><strong>GET</strong> /orders//transactions</p>
</blockquote>

<p>Dados de entrada:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>path parameter</td>
      <td>Identificador do pedido.</td>
      <td>Sim</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de requisição:</p>

<blockquote>
  <p><strong>GET</strong></p>
</blockquote>

<p>Dados de saída:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Tipo</th>
      <th>Descrição</th>
      <th>Obrigatório</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>transactions</td>
      <td>Lista (Transaction)</td>
      <td>Lista de transações de um pedido.</td>
      <td>SIM</td>
    </tr>
  </tbody>
</table>

<p>Exemplo de resposta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
  {
    "id": "46019c39-989e-46e9-aa7d-d8e9414396b4",
    "external_id": "95185.99407021694",
    "status": "CONFIRMED",
    "terminal_number": "77102648",
    "authorization_code": "008619",
    "number": "672837",
    "amount": 2000,
    "transaction_type": "CANCELLATION",
    "payment_fields": {
    "primary_product_name": "CREDITO",
    "secondary_product_name": "A VISTA",
    "number_of_quotas": 0
  },
    "card": {
      "brand": "VISA",
      "mask": "************3542"
    }
  },
  {
    "id": "442bbdbe-41c8-4e22-83ee-e1a849ed3cb5",
    "external_id": "0b37f0d8-017a-4b11-91b9-ec1bb3e8fed3",
    "status": "CONFIRMED",
    "terminal_number": "77102648",
    "authorization_code": "008619",
    "number": "672836",
    "amount": 2000,
    "transaction_type": "PAYMENT",
    "payment_fields": {
    "primary_product_name": "CREDITO",
    "secondary_product_name": "A VISTA",
    "number_of_quotas": 0
   },
    "card": {
    "brand": "VISA",
    "mask": "************3542"
    }
  }
]
</code></pre></div></div>

<h3 id="fluxo-básico-utilização-api-order-manager-cielo-lio">Fluxo Básico Utilização API Order manager Cielo LIO</h3>

<p>Abaixo você encontra um fluxo básico para enviar um pedido para a Cielo LIO utilizando a Integração Remota:</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Criar_pedido.png" alt="fluxo_basico" /></p>

<h3 id="notificações-de-mudanças-na-order">Notificações de Mudanças na Order</h3>

<p>Para o cadastro da URL onde enviaremos as notificações <a href="https://devcielo.zendesk.com/hc/pt-br/requests/new">Entre em contato conosco</a> atráves do nosso time de Suporte a Desenvolvimento informando o seu endpoint</p>

<p>O maior motivo da disponibilização da API RESTful do Order Manager é permitir que aplicações parceiras se integrem à plataforma da Cielo na cloud. Porém, uma vez que as aplicações parceiras submetem pedidos, estes devem ser pagos localmente na própria Cielo LIO. Sendo assim, as aplicações parceiras precisam de uma forma de receber notificações de mudanças do status e das transações realizadas na Order.</p>

<p>Para tal, é necessário que o parceiro disponibilize um Backend RESTful, que irá receber as notificações seguindo o formato abaixo. Uma vez recebidas as informações, o Backend tem a liberdade de ser utilizado da forma mais adequada ao modelo de negócio.</p>

<blockquote>
  <p><strong>Atenção:</strong> Os campos podem sofrer alterações sem aviso prévio, recomendamos que o PARSE do json seja dinâmico para aceitar novos valores em campos que ja enviamos hoje. Exemplo: O campo brand, caso surja novas bandeiras o seu backend precisa estar pronto para essa alteração.</p>
</blockquote>

<h4 id="post---notificação-de-mudança-de-status">POST - Notificação de Mudança de Status</h4>

<p>A cada modificação de status em um pedido, o servidor do Order Manager envia, via comando, as informações para o Backend do parceiro.</p>

<blockquote>
  <p><strong>Atenção:</strong> O backend do parceiro deve possuir o status anterior</p>
</blockquote>

<p>Requisição do Order Manager</p>

<blockquote>
  <p><strong>POST</strong></p>
</blockquote>

<p>Exemplo de informação enviada pelo Order Manager</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"943f2276-5e2b-44bb-a68a-fd9b6418afa4"</span><span class="p">,</span><span class="w">
	</span><span class="nl">"items"</span><span class="p">:[</span><span class="w">
		</span><span class="p">{</span><span class="w">
			</span><span class="nl">"id"</span><span class="p">:</span><span class="mi">4389</span><span class="err">df</span><span class="mi">04</span><span class="err">-ef</span><span class="mi">19-4217</span><span class="err">-a</span><span class="mi">969-22</span><span class="err">cb</span><span class="mi">6e86</span><span class="err">d</span><span class="mi">8</span><span class="err">cf</span><span class="s2">",
			""sku"":"</span><span class="mi">1</span><span class="s2">",
			""name"":""TESTE CALLBACK"",
			""uuid"":"</span><span class="mi">438232</span><span class="err">f</span><span class="mi">04</span><span class="err">-ef</span><span class="mi">19-4217</span><span class="err">-a</span><span class="mi">969-22</span><span class="err">cb</span><span class="mi">6e86</span><span class="err">d</span><span class="mi">8</span><span class="err">cf</span><span class="s2">",
			""details"":null,
			""order_id"":943f2276-5e2b-44bb-a68a-fd9b6418afa4"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
			</span><span class="nl">"sku_type"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
			</span><span class="nl">"reference"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
			</span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2023-01-04T14:20:28Z"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"unit_price"</span><span class="p">:</span><span class="mi">2392</span><span class="p">,</span><span class="w">
			</span><span class="nl">"updated_at"</span><span class="p">:</span><span class="s2">"2023-01-04T14:20:24Z"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"TESTE CALLBACK"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"unit_of_measure"</span><span class="p">:</span><span class="s2">"EACH"</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">],</span><span class="w">
	</span><span class="nl">"notes"</span><span class="p">:</span><span class="s2">"TESTE"</span><span class="p">,</span><span class="w">
	</span><span class="nl">"price"</span><span class="p">:</span><span class="mi">2898</span><span class="p">,</span><span class="w">
	</span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"1078069"</span><span class="p">,</span><span class="w">
	</span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"CLOSED"</span><span class="p">,</span><span class="w">
	</span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"REFERENCIA DO PEDIDO"</span><span class="p">,</span><span class="w">
	</span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2023-04-04T14:33:28Z"</span><span class="p">,</span><span class="w">
	</span><span class="nl">"updated_at"</span><span class="p">:</span><span class="s2">"2023-04-04T16:19:37Z"</span><span class="p">,</span><span class="w">
	</span><span class="nl">"transactions"</span><span class="p">:[</span><span class="w">
		</span><span class="p">{</span><span class="w">
			</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"d7d5cab9-f5b0-4a14-8593-9793a0aae193"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"card"</span><span class="p">:{</span><span class="w">
				</span><span class="nl">"mask"</span><span class="p">:</span><span class="s2">"************3026"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"brand"</span><span class="p">:</span><span class="s2">"MASTERCARD"</span><span class="w">
			</span><span class="p">},</span><span class="w">
			</span><span class="nl">"uuid"</span><span class="p">:</span><span class="s2">"d7d5cab9-f5b0-4a14-8593-9793a0aae193"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"amount"</span><span class="p">:</span><span class="mi">2392</span><span class="p">,</span><span class="w">
			</span><span class="nl">"number"</span><span class="p">:</span><span class="s2">"044976"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"CONFIRMED"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2023-04-04T14:34:24Z"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"updated_at"</span><span class="p">:</span><span class="s2">"2023-04-04T16:19:37Z"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
			</span><span class="nl">"external_id"</span><span class="p">:</span><span class="s2">"7d7d5cab9-f5b0-4a14-8593-9793a0aae193"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"payment_fields"</span><span class="p">:{</span><span class="w">
				</span><span class="nl">"pan"</span><span class="p">:</span><span class="s2">"************3332"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"v40Code"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="w">
				</span><span class="nl">"typeName"</span><span class="p">:</span><span class="s2">"VENDA A DEBITO"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"cityState"</span><span class="p">:</span><span class="s2">"SAO PAULO SP"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"serviceTax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"statusCode"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
				</span><span class="nl">"boardingTax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"hasPassword"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
				</span><span class="nl">"hasWarranty"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
				</span><span class="nl">"productName"</span><span class="p">:</span><span class="s2">"DEBITO A VISTA"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"requestDate"</span><span class="p">:</span><span class="mi">1680618831267</span><span class="p">,</span><span class="w">
				</span><span class="nl">"changeAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"documentType"</span><span class="p">:</span><span class="s2">"J"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"entranceMode"</span><span class="p">:</span><span class="s2">"691010107080"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"hasSignature"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
				</span><span class="nl">"merchantCode"</span><span class="p">:</span><span class="s2">"0010225646149400"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"merchantName"</span><span class="p">:</span><span class="s2">"NOME DO ESTABELECIMENTO"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"applicationId"</span><span class="p">:</span><span class="s2">"cielo.launcher"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"totalizerCode"</span><span class="p">:</span><span class="mi">92</span><span class="p">,</span><span class="w">
				</span><span class="nl">"upFrontAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"creditAdminTax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"firstQuotaDate"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"interestAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"isExternalCall"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
				</span><span class="nl">"numberOfQuotas"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"applicationName"</span><span class="p">:</span><span class="s2">"cielo.launcher.ORDER"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"avaiableBalance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"cardCaptureType"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
				</span><span class="nl">"finalCryptogram"</span><span class="p">:</span><span class="s2">"21FDEF2548665F36"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"hasConnectivity"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
				</span><span class="nl">"merchantAddress"</span><span class="p">:</span><span class="s2">"QNM 17 CJH LT28"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"paymentTypeCode"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
				</span><span class="nl">"firstQuotaAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
				</span><span class="nl">"hasSentReference"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
				</span><span class="nl">"isFinancialProduct"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
				</span><span class="nl">"primaryProductCode"</span><span class="p">:</span><span class="mi">2000</span><span class="p">,</span><span class="w">
				</span><span class="nl">"primaryProductName"</span><span class="p">:</span><span class="s2">"DEBITO"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"hasSentMerchantCode"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
				</span><span class="nl">"cardLabelApplication"</span><span class="p">:</span><span class="s2">"Debito Nubank"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"paymentTransactionId"</span><span class="p">:</span><span class="s2">"d7d5cab9-f5b0-4a14-8593-9793a0aae193"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"secondaryProductCode"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
				</span><span class="nl">"secondaryProductName"</span><span class="p">:</span><span class="s2">"A VISTA"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"originalTransactionId"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
				</span><span class="nl">"receiptPrintPermission"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
				</span><span class="nl">"hasPrintedClientReceipt"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
				</span><span class="nl">"isDoubleFontPrintAllowed"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
				</span><span class="nl">"isOnlyIntegrationCancelable"</span><span class="p">:</span><span class="kc">false</span><span class="w">
			</span><span class="p">},</span><span class="w">
			</span><span class="nl">"terminal_number"</span><span class="p">:</span><span class="s2">"238232"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"transaction_type"</span><span class="p">:</span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
			</span><span class="nl">"authorization_code"</span><span class="p">:</span><span class="s2">"123562"</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="post---notificação-de-transação-realizada">POST - Notificação de Transação Realizada</h4>

<p>A cada transação/pagamento realizada em um pedido, o servidor do Order Manager envia, via comando, as informações para o Backend do parceiro.</p>

<p>Requisição do Order Manager</p>

<blockquote>
  <p><strong>POST</strong></p>
</blockquote>

<p>Exemplo de informação enviada pelo Order Manager</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f0f0f0f0-f0f0-f0f0-f0f0-f0f0f0f0f0f0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f0f0f0f0-f0f0-f0f0-f0f0-f0f0f0f0f0f0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trasaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f0f0f0f0-f0f0-f0f0-f0f0-f0f0f0f0f0f0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f0f0f0f0-f0f0-f0f0-f0f0-f0f0f0f0f0f0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONFIRMED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"terminal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"###324625"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0#1#133"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"##50##"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transaction_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"primary_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDITO"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"secondary_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A VISTA"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"number_of_quotas"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MASTERCARD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"************0566"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="notificações-dos-pedidos">Notificações dos pedidos</h3>

<h4 id="política-de-retentativa">Política de retentativa</h4>

<ul>
  <li>O envio da notificação para um pedido será retentada a cada <strong>15 minutos</strong>, durante um período total de <strong>7 horas</strong>.</li>
  <li>Em caso de falha em todas as retentativas neste período, as notificações deste mesmo pedido serão bloqueadas.</li>
  <li>Haverá tentativa de notificação para um pedido, mesmo que as notificações de outro pedido tenham sido bloqueadas.</li>
</ul>

<h4 id="bloqueio-de-notificações-para-o-ec">Bloqueio de notificações para o EC</h4>

<ul>
  <li>O EC deixará de receber notificações caso o percentual de pedidos bloqueados seja igual ou superior a <strong>80%</strong> nas últimas <strong>24 horas</strong>.</li>
</ul>

<h4 id="desbloqueio-de-notificações-para-o-ec">Desbloqueio de notificações para o EC</h4>

<ul>
  <li><a href="https://devcielo.zendesk.com/hc/pt-br#suporte">Entre em contato conosco</a> para solicitar o desbloqueio, informando o número do EC e o endereço do serviço, caso haja alteração.</li>
</ul>

<h1 id="pix">PIX</h1>

<h2 id="o-que-é-o-pix">O que é o Pix</h2>

<p>O Pix é o meio de pagamento criado pelo Banco Central em que os recursos são transferidos entre contas e poucos segundos, a qualquer hora ou dia. O Pix é um novo jeito de vender de forma instantânea, segura e simples pelas soluções da Cielo.</p>

<h2 id="como-habilitar-o-pagamento-pix">Como habilitar o pagamento PIX?</h2>

<p>Para que seja possível efetivar um pagamento utilizando a forma de pagamento PIX, é necessário que o estabelecimento tenha esse tipo de pagamento habilitado.</p>

<p>Para realizar essa ação, siga as instruções abaixo.</p>

<p>Após essa habilitação via Site Cielo o estabelecimento estará apto a trabalhar com a modalidade PIX.</p>

<h2 id="habilitando-pagamento-pix">Habilitando pagamento PIX</h2>

<p>Para que seja possivel efetivar um pagamento utilizando a forma de pagamento PIX, é necessário que o estabelecimento tenha esse tipo de pagamento habilitado.</p>

<p><strong>PASSO 1:</strong> Entrar no <a href="https://minhaconta2.cielo.com.br/site/login">site Cielo</a> com seu login e senha</p>

<p><strong>PASSO 2:</strong> Clicar em “Meu cadastro”</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/images/cadastro_site.png" alt="Meu Cadastro" /></p>

<p><strong>PASSO 3:</strong> Clicar em “Autorizações”</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/images/autorizar_pix_site.png" alt="Autorização" /></p>

<p><strong>PASSO 4:</strong> Clicar em “PIX</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/images/selecionar_pix_site.png" alt="Clicar PIX" /></p>

<p><strong>PASSO 5:</strong> Marcar a caixa de aceite , e clicar em “Enviar</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/images/aceite_pix_site.png" alt="Clicar PIX" /></p>

<p>Após essa habilitação via Site Cielo o estabelecimento estará apto a trabalhar com a modalidade PIX.</p>

<h1 id="faq">FAQ</h1>

<h2 id="integrações">Integrações</h2>

<h3 id="integração-local">Integração Local</h3>

<p>Essa é a integração de APP embarcado na LIO, utilizando os seus recursos: Pagamento, impressão e cancelamento. O seu Aplicativo instalado na LIO, se integra com o módulo de pedidos e pagamentos da Cielo LIO através do Cielo LIO Order Manager SDK.</p>

<p>É possível desenvolver utilizando Java e Kotlin e se integrar a nossa SDK e também utilizando linguagens hibridas com Deep Link, segue abaixo as respectivas documentações:</p>

<p><a href="https://developercielo.github.io/manual/cielo-lio#integra%C3%A7%C3%A3o-local">Documentação Integração Local Nativa</a>.</p>

<h4 id="existe-algum-aplicativo-de-exemplo-disponível">Existe algum aplicativo de exemplo disponível?</h4>

<p>Disponibilizamos no GitHub um aplicativo Sample de forma que o desenvolvedor consiga ver como funciona as chamadas para utilização do SDK. </p>

<p><a href="https://github.com/DeveloperCielo/LIO-SDK-Sample-Integracao-Local">Download do aplicativo Sample</a>.</p>

<h4 id="É-necessário-colocar-todos-os-itens-do-pedido-na-order">É necessário colocar todos os itens do pedido na order?</h4>

<p>A Cielo LIO funciona com o conceito de Pedido (Order). Assim, o procedimento deve ser sempre o exemplificado no SDK:</p>

<ul>
  <li>Criar uma ordem com status draft;</li>
  <li>Adicionar itens à ordem;</li>
  <li>Preparar a ordem para pagamento (place order);</li>
  <li>Executar o checkout.</li>
</ul>

<p>Se você tem uma variedade de produtos, é interessante criar itens separados para status de relatório na Cielo LIO do lojista.</p>

<h3 id="integração-remota-1">Integração Remota</h3>

<p>Na Integração Remota você utiliza o seu PDV(Sistema Desktop ou Web) para gerar os pedidos e enviar para a Cielo LIO efetuar o recebimento.
 
<a href="https://developercielo.github.io/manual/cielo-lio#integra%C3%A7%C3%A3o-remota">Documentação Integração Remota</a>.</p>

<h4 id="preciso-me-cadastrar-para-realizar-testes">Preciso me cadastrar para realizar testes?</h4>

<p>Sim, é fundamental o cadastro no portal para que você possa obter os tokens de acesso e testar as suas aplicações.</p>

<h3 id="integração-híbrida">Integração Híbrida</h3>

<p>O processo de integração híbrida é um pouco diferente da integração com o SDK (Integração Local). Para parceiros que não estão integrando com a linguagem nativa Java ou Kotlin a integração hibrida via deep link é uma opção.</p>

<p><a href="https://developercielo.github.io/manual/cielo-lio#integra%C3%A7%C3%A3o-h%C3%ADbrida">Documentação Integração Hibrida</a>.</p>

<h4 id="o-que-eu-preciso-para-colocar-a-integração-em-produção">O que eu preciso para colocar a integração em produção?</h4>

<p>Se você já realizou todos os testes em Sandbox e deseja enviar pedidos para a Cielo LIO, entre em contato  conosco por meio de um ticket, preenchendo os dados necessários para receber os tokens de produção.</p>

<p>Acesse o <a href="https://devcielo.zendesk.com/hc/pt-br/requests/new?ticket_form_id=526108">link</a>.</p>

<p>Também é necessário incluir a tag abaixo no arquivo <code class="language-plaintext highlighter-rouge">AndroidManifest.xml</code> do seu aplicativo para que seu aplicativo hibrido esteja disponível para todos os terminais:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;meta-data</span> 
        <span class="na">android:name =</span> <span class="s">"cs_integration_type"</span>
        <span class="na">android:value=</span><span class="s">"uri"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<h4 id="preciso-de-uma-máquina-cielo-lio-para-realizar-os-testes-de-integração-local">Preciso de uma máquina Cielo LIO para realizar os testes de integração local?</h4>

<p>Não é necessário ter uma máquina Cielo LIO para realizar os testes.</p>

<p>A Cielo disponibiliza um aplicativo que simula o ambiente da Cielo LIO em qualquer dispositivo Android, permitindo que o desenvolvedor realize os testes nos métodos do SDK e faça o debug da sua aplicação durante o desenvolvimento e a integração com o Cielo LIO Order Manager SDK, sem a necessidade de possuir um hardware da Cielo LIO.</p>

<p>Download do Emulador: <a href="https://s3-sa-east-1.amazonaws.com/cielo-lio-store/apps/lio-emulator/1.60.3/lio-emulator.apk">aqui no link</a></p>

<h4 id="preciso-me-cadastrar-para-realizar-testes-1">Preciso me cadastrar para realizar testes?</h4>

<p>Sim, é fundamental o cadastro no portal para que você possa obter os tokens de acesso e testar as suas aplicações.</p>

<h2 id="pix-1">PIX</h2>

<h4 id="como-habilitar-o-pagamento-pix-1">Como habilitar o pagamento PIX?</h4>

<p>Para que seja possível efetivar um pagamento utilizando a forma de pagamento PIX, é necessário que o estabelecimento tenha esse tipo de pagamento habilitado.</p>

<p>Siga as instruções através desse <a href="https://developercielo.github.io/manual/cielo-lio#habilitando-pagamento-pix">link</a>. 
Após essa habilitação via Site Cielo o estabelecimento estará apto a trabalhar com a modalidade PIX.</p>

<h2 id="duvidas-gerais-cielo-lio">Duvidas Gerais Cielo LIO</h2>

<h3 id="como-posso-adquirir-um-equipamento-lio-para-desenvolvimento-">Como posso adquirir um equipamento LIO para desenvolvimento ?</h3>

<p>Os desenvolvedores que desejam obter uma Cielo LIO, deverão seguir os passos abaixo:</p>

<ul>
  <li>Criar uma conta no Portal dos Desenvolvedores e fazer a solicitação do equipamento através da abertura do ticket;</li>
  <li>Aguardar o recebimento da Cielo LIO;</li>
  <li>Em posse do equipamento, o desenvolvedor deve abrir uma nova solicitação no portal dos desenvolvedores para requisitar a habilitação de sua LIO de Dev.</li>
  <li>Todos os aplicativos publicados pelo desenvolvedor no Dev Console que estejam com status diferente de bloqueado poderão ser baixados em sua LIO de Dev.</li>
</ul>

<blockquote>
  <p><a href="https://devcielo.zendesk.com/hc/pt-br">Clique Aqui</a> para solicitar sua LIO.</p>
</blockquote>

<h3 id="se-meu-aplicativo-já-funciona-na-cielo-lio-v2-ele-vai-funcionar-também-na-cielo-lio-on">Se meu aplicativo já funciona na Cielo LIO v2, ele vai funcionar também na Cielo LIO On?</h3>

<p>Sim, se você já tem um aplicativo rodando na Cielo LIO V2, ele também funcionará na Cielo LIO On.</p>

<h3 id="como-faço-para-integrar-com-a-cielo-lio">Como faço para integrar com a Cielo LIO?</h3>

<p>Construimos um portal dedicado aos desenvolvedores para facilitar a integração da sua solução com a Lio -&gt; http://desenvolvedores.cielo.com.br
Nesse portal você pode:</p>

<ul>
  <li>Acessar documentação completa das APIs;</li>
  <li>Utilizar os SDK´s para tornar a integração mais ágil;</li>
  <li>Criar suas contas para receber as chaves (tokens) de acesso;</li>
  <li>Realizar os testes e desenvolvimentos para se integrarem com a Cielo: usando emulador ou sandbox.</li>
</ul>

<h3 id="posso-utilizar-impressoras-para-conectar-na-cielo-lio">Posso utilizar impressoras para conectar na Cielo LIO?</h3>

<p>Sim.
Impressoras com conexão via Bluetooth podem ser usadas pelo aplicativo do parceiro que está rodando na Cielo LIO para realizar a impressão de algum comprovante ou recibo necessário para a operação do negócio do parceiro/cliente.</p>

<p>Já existem parceiros que estão utilizando impressoras Bluetooth das marcas Zebra, Datex, Leopardo e outras para se integrar com a Cielo LIO!
Todos os protocolos de comunicação e pareamento ficam sob responsabilidade do aplicativo do parceiro.</p>

<h3 id="quais-são-as-formas-de-comunicação-da-cielo-lio">Quais são as formas de comunicação da Cielo LIO?</h3>

<p>A Cielo LIO possui entrada para um SIM Card que permite realizar a comunicação via rede móvel 4G. Com fall-back para 3G e 2G e GPRS respectivamente.
Além disso, ela possui como tecnologia de comunicação o Wi-Fi.</p>

<h3 id="quais-são-as-conexões-disponíveis-na-cielo-lio">Quais são as conexões disponíveis na Cielo LIO?</h3>

<p>As entradas USB da Cielo LIO são utilizadas única e exclusivamente para realizar o carregamento na bateria do aparelho.
O Bluetooth da Cielo LIO pode ser utilizado para realizar a comunicação e a troca de informações com dispositivos externos.</p>

<h3 id="caso-necessite-trocar-a-máquina-lio-o-catálogo-cadastrado-migra-automaticamente-para-a-nova-máquina-recebida">Caso necessite trocar a máquina LIO, o catálogo cadastrado migra automaticamente para a nova máquina recebida?</h3>

<p>Não migra. Para que o catálogo fique na nuvem, o cliente precisará de um aplicativo que tenha essa funcionalidade.</p>

<h3 id="como-faço-para-atualizarbaixar-aplicativos-na-lio">Como faço para atualizar/baixar aplicativos na LIO?</h3>

<p>A Cielo Lio precisa estar conectada a internet 4G ou WI-FI</p>

<p>Com sua LIO em mãos siga as orientações abaixo:</p>

<ul>
  <li>Clique na aba “Ajuda”;</li>
  <li>Clique na opção “Minha LIO”;</li>
  <li>Clique na opção “Buscar Atualizações”.</li>
</ul>

<h3 id="como-faço-para-criar-uma-conta-no-site-da-cielo">Como faço para criar uma conta no site da Cielo?</h3>

<p>Basta acessar o site Cielo http://www.cielo.com.br.</p>

<ul>
  <li>No canto superior direito, clique em “Acessar minha conta”;</li>
  <li>Clique em “Cadastre-se”;</li>
  <li>Clique em “Criar cadastro” Informe os dados requisitados.</li>
</ul>

<h3 id="minha-lio-não-está-baixando-um-app">Minha LIO não está baixando um app</h3>

<p>Verificar se sua LIO está com bateria acima de 50% e com 4G ou WI-FI. Se estiver com todos os requisitos citados acima e mesmo assim o app não baixou abra um chamado no portal dos desenvolvedores.</p>

<h2 id="dev-console---cielo-store-loja-publica-x-loja-privada">Dev Console - Cielo Store (Loja Publica) X Loja Privada</h2>

<h3 id="fiz-meu-cadastro-o-que-devo-fazer-agora">Fiz meu cadastro! O que devo fazer agora?</h3>

<p>O desenvolvedor deverá escolher o tipo de Loja que deseja disponibilizar seu app.</p>

<p><strong>Aplicativo de Loja Pública</strong></p>

<p>Os aplicativos públicos são indicados para aqueles desenvolvedores e parceiros que desejam disponibilizar e escalar sua aplicação e permitir o download na Cielo LIO distribuídos nos estabelecimentos comerciais no Brasil via Vitrine da Cielo Store.</p>

<p><strong>Aplicativo Privado na Loja Privada</strong></p>

<p>Os aplicativos privados são indicados para desenvolvedores que querem permitir a distribuição de soluções personalizadas para um cliente específico.
É necessário solicitar a criação da Loja Privada para então ser possível fazer o upload de um aplicativo de Loja Privada no Dev Console. 
A partir da Loja Privada criada, o desenvolvedor poderá publicar seu aplicativo no Dev Console selecionando sua loja, esta ação é essencial para realizar a distribuição de aplicativos privados. <a href="https://devcielo.zendesk.com/hc/pt-br">Clique aqui</a> para solicitar a criação da Loja Privada.</p>

<h3 id="quais-são-os-browsersnavegadores-recomendados-para-upload-de-aplicativo-na-cielo-store">Quais são os Browsers/Navegadores recomendados para Upload de aplicativo na Cielo Store?</h3>

<p>Recomendamos utilizar o Google Chrome ou Mozilla Firefox preferencialmente para realizar o upload de aplicativos na Cielo Store.</p>

<h3 id="como-faço-para-me-cadastrar-na-cielo">Como faço para me cadastrar na Cielo?</h3>

<p>É necessário a abertura de solicitação no Portal de Desenvolvedores &gt; Suporte &gt; Cielo Lio &gt; Envie sua pergunta &gt; Solicitação LIO DEV / Credenciamento EC Cielo.</p>

<h3 id="como-posso-liberar-o-meu-aplicativo-desenvolvido-aos-clientes-loja-privada">Como posso liberar o meu aplicativo desenvolvido aos clientes Loja Privada?</h3>

<p>Após o aplicativo passar pela etapa de certificação e ser aprovado pelo time especialista interno da Cielo, o próprio desenvolvedor será notificado e deverá promover o app para produção sendo assim todos os EC’s que tiverem associados a loja privada irão receber o aplicativo. Clique Aqui para solicitar a criação da Loja Privada e tirar suas dúvidas de como fazer a associação de um EC a uma loja privada.</p>

<h3 id="como-posso-liberar-o-meu-aplicativo-desenvolvido-aos-clientes-loja-publica">Como posso liberar o meu aplicativo desenvolvido aos clientes Loja Publica?</h3>

<p>Após o aplicativo passar pela etapa de certificação e ser aprovado pelo time especialista interno da Cielo, o próprio desenvolvedor será notificado e deverá promover o app para produção, sendo assim o mesmo ficará disponível na Loja Cielo Store para seus clientes.</p>

<h3 id="preciso-ser-cadastrado-na-cielo-para-receber-o-pagamento-dos-aplicativos">Preciso ser cadastrado na Cielo para receber o pagamento dos aplicativos?</h3>

<p>Sim, é necessário ter uma conta no site Cielo o pagamento é realizado em agenda financeira, precisa se cadastrar para ter um estabelecimento comercial (EC). Basta acessar o site Cielo http://www.cielo.com.br.</p>

<ul>
  <li>No canto superior direito, clique em “Acessar minha conta;</li>
  <li>Clique em “Cadastre-se”;</li>
  <li>Clique em “Criar cadastro” Informe os dados requisitados.</li>
</ul>

<h3 id="o-que-eu-preciso-para-colocar-meu-aplicativo-em-produção">O que eu preciso para colocar meu aplicativo em produção?</h3>

<p>Se seu aplicativo já foi certificado, você deve promovê-lo em Produção no Dev Console. 
Dev Console &gt; Selecionar App &gt; Selecionar Versão Certificada &gt; Clicar em “Enviar para Produção”.</p>

<h3 id="como-recebo-o-pagamento-dos-aplicativos">Como recebo o pagamento dos aplicativos?</h3>

<p>O pagamento será feito em agenda financeira. É necessário ter uma conta no site Cielo. Caso não tenha, acesse o site Cielo http://www.cielo.com.br.</p>

<ul>
  <li>No canto superior direito, clique em “Acessar minha conta”;</li>
  <li>Clique em “Cadastre-se”;</li>
  <li>Clique em “Criar cadastro” Informe os dados requisitados.</li>
</ul>

<h3 id="tenho-algum-custo-para-colocar-meu-aplicativo-na-cielo-store">Tenho algum custo para colocar meu aplicativo na Cielo Store?</h3>

<p>Não! A integração com a Cielo LIO é gratuita.</p>

<h3 id="o-que-é-a-cielo-store-loja-publica">O que é a Cielo Store (Loja Publica)?</h3>

<p>Toda vez que você precisa acessar o app do Banco ou daquela loja preferida ou de entrega de comida, você acessa a loja de aplicativos (Play Store ou App Store) do seu celular e realiza o download desse app, certo?</p>

<p>O mesmo acontece com a Cielo LIO. Através da Cielo STORE, os estabelecimentos comerciais podem escolher entre os mais de 50 apps disponíveis o aplicativo que melhor atende suas necessidades, seja unificar sistemas, realizar gestão de vendas, time e estoque etc. em um único clique.</p>

<h3 id="quais-as-etapas-existentes-para-publicar-meu-aplicativo">Quais as etapas existentes para publicar meu aplicativo?</h3>

<p><strong>1 - Etapa de desenvolvimento</strong></p>

<p>Após passar pelo upload de um novo aplicativo ou nova versão, o aplicativo fica automaticamente com o status “Em Desenvolvimento”. Nesse estágio o desenvolvedor consegue realizar testes do seu aplicativo em uma Cielo LIO e caso precise fazer alguma correção, basta publicar uma nova versão do aplicativo pelo Dev Console e então atualizar na Cielo LIO.</p>

<p><strong>2 - Etapa de Certificação</strong></p>

<p>Uma vez concluído os testes, o desenvolvedor envia o aplicativo para Certificação. Nessa etapa o time de Certificação da Cielo entra em ação e irá validar o fluxo de funcionamento do aplicativo de acordo com a sessão Critérios de Certificação de Aplicativos deste documento.</p>

<p><strong>3 - Etapa de Produção</strong></p>

<p>Assim que o aplicativo for aprovado na certificação, o desenvolvedor poderá promover para produção.</p>

<h3 id="como-faço-para-mudar-o-nome-do-meu-aplicativo">Como faço para mudar o nome do meu aplicativo?</h3>

<p>Não é possível alterar o nome de um aplicativo. Caso seja necessário, é preciso criar um novo aplicativo com package name diferente e seguir o processo normal de upload de aplicativo na Cielo Store.</p>

<h3 id="É-possível-editar-as-informações-do-meu-aplicativo-já-publicado-na-cielo-store">É possível editar as informações do meu aplicativo já publicado na Cielo Store?</h3>

<p>Sim, é possível. Basta alterar as informações dentro do formulário no Dev Console, submeter uma nova versão e encaminhá-la para Certificação. Após o APP ser certificado e aprovado, é necessário promover o APP para produção e sendo assim o APP fica atualizado e disponível na Cielo Store.</p>

<h3 id="como-faço-para-baixar-aplicativos-na-cielo-lio">Como faço para baixar aplicativos na Cielo LIO?</h3>

<p>Com sua LIO em mãos siga as orientações abaixo:</p>

<ul>
  <li>Clique na aba “Ajuda”;</li>
  <li>Clique na opção “Minha LIO”;</li>
  <li>Clique na opção “Buscar Atualizações”.</li>
</ul>

<blockquote>
  <p>Vale lembrar que sua LIO precisa está dentro dos requisitos bateria acima de 50% e com 4G ou WI-FI estável. A partir desse momento todos os aplicativos disponibilizados para essa LIO serão baixados e instalados na e ficarão visíveis na aba Apps.</p>
</blockquote>

<h3 id="qual-a-diferença-entre-loja-pública-e-loja-privada">Qual a diferença entre Loja Pública e Loja Privada?</h3>

<p>Na Loja Pública, o aplicativo ficará disponível na Cielo Store para todos os clientes que possuem LIO. O cliente deverá escolher o aplicativo que deseja contratar e fazer o download. 
O modelo de Loja Privada a distribuição do aplicativo é feita pelo desenvolvedor. O aplicativo é instalado somente para o EC que está cadastrado em uma loja especifica. O aplicativo que está na Loja Privada não estará disponível na Loja Pública.</p>

<h3 id="o-que-é-a-loja-privada">O que é a Loja Privada?</h3>

<p>É uma solução desenvolvida para quem precisa de um sistema de gestão integrado personalizado. Integrando com a LIO ON você pode ter acesso a todas as informações em um lugar só, consegue fazer um gerenciamento de vendas, controle de estoque, fluxo de caixa, emissão de nota fiscal e muito mais. Para saber quais apps temos entre em contato conosco!</p>

<h3 id="como-faço-para-cancelar-a-assinatura-do-aplicativo">Como faço para cancelar a assinatura do aplicativo?</h3>

<ul>
  <li>Clique na opção Apps;</li>
  <li>Selecione Cielo Store;</li>
  <li>Escolha o aplicativo;</li>
  <li>Clique em desinstalar;</li>
  <li>Preencha com usuário e senha criados no site Cielo.</li>
</ul>

<h3 id="como-um-aplicativo-da-loja-pública-é-cobrado">Como um aplicativo da loja pública é cobrado?</h3>

<p>Os aplicativos são cobrados mensalmente diretamente na agenda financeira do EC que contratou o aplicativo.</p>

<h3 id="como-faço-para-consultar-minha-comissão-referente-a-aplicativos-de-loja-publica">Como faço para consultar minha comissão referente a aplicativos de Loja Publica?</h3>

<p>Entre no Site <a href="https://minhaconta2.cielo.com.br/site/login">Cielo</a> com suas credenciais &gt; Recebíveis &gt; Detalhado &gt; Selecionar uma ou duas datas. Serão exibidos os valores pagos e a data com a descrição “Repasse ao desenvolvedor sobre a compra de aplicativo no Cielo Store”. Cada linha exibida é referente a uma assinatura ativa.</p>
</div>


            <div class="footer-conteudo">
  <div id="footer-conteudo-img" class="col-lg-1 col-md-1">
    <img
      src="https://developercielo.github.io/assets/images/icon-doubt.svg"
      width="55px"
      height="53px"
      alt="Precisa de ajuda?"
    />
  </div>

  <div id="footer-conteudo-texto" class="col-lg-11 col-md-11">
    <h2>Precisa de ajuda?</h2>
    <p>Se você não conseguiu encontrar sua resposta acima, <a href="https://devcielo.zendesk.com/hc/pt-br#suporte">entre em contato conosco</a>.</p>
  </div>
</div>

        </div>

        <div class="sidebar">
  <div class="sidebar-sticky">
    <div class="sidebar-about">
      <a
        title="Comutar a coluna da esquerda"
        class="hamburger"
      >
        <i class="fa fa-bars hamb-menu" aria-hidden="true"></i>
      </a>
      <a href="https://desenvolvedores.cielo.com.br" target="_blank">
        <img
          src="https://developercielo.github.io/assets/images/logo.png"
          alt="Documentações e tutoriais"
          style="width: 60%; margin-left: 20%"
        />
      </a>
      <div></div>
    </div>

    <div id="toc"></div>

    <div class="fixed-footer">
      

      <div class="toc-contact">
        <div class="contact">
          <a
            title="Contato"
            href="https://devcielo.zendesk.com/"
          >
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
            <span>Contato</span>
          </a>
        </div>
        <div class="github">
          <a title="GitHub" href="https://github.com/developercielo">
            <i class="fa fa-github" aria-hidden="true"></i>
            <span>GitHub</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


        <script src="https://developercielo.github.io/assets/bundles/js/bundle.min.js"></script>
        <script>
            
            var selectors = 'h1,h2,h3,h4,h5,h6';
            
        </script>

        
        <script src="https://developercielo.github.io/assets/bundles/js/search.min.js"></script>
        

        

        <!-- Hotjar Tracking Code for https://developercielo.github.io/ -->
<script>
  (function (h, o, t, j, a, r) {
    h.hj =
      h.hj ||
      function () {
        (h.hj.q = h.hj.q || []).push(arguments);
      };
    h._hjSettings = { hjid: 674586, hjsv: 6 };
    a = o.getElementsByTagName("head")[0];
    r = o.createElement("script");
    r.async = 1;
    r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
    a.appendChild(r);
  })(window, document, "https://static.hotjar.com/c/hotjar-", ".js?sv=");
</script>

    </body>
</html>
