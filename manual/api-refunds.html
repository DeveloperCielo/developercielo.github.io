<!DOCTYPE html>
<html lang="pt">
    <head>
  <link href="http://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="theme-color" content="#00aeef" />
  <meta http-equiv="Content-Language" content="pt" />

  <!-- Enable responsiveness on mobile devices-->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     API Refunds &middot; Documentações e tutoriais 
  </title>

  <link rel="shortcut icon" href="https://developercielo.github.io/assets/favicon.ico" />

  <!-- CSS -->
  <link
    href="https://fonts.googleapis.com/css?family=Fira+Sans:300,400,500"
    rel="stylesheet"
    media="none"
    onload="if(media!='all')media='all'"
  />
  <script async src="https://use.fontawesome.com/3ae06f1030.js"></script>

  <link
    rel="stylesheet"
    href="https://developercielo.github.io/assets/bundles/css/bundle.min.css"
  />

   
  <link
    rel="alternate"
    hreflang="pt"
    href="https://developercielo.github.io/manual/api-refunds"
  />
    
  <link
    rel="alternate"
    hreflang="en"
    href="https://developercielo.github.io/en/manual/api-refunds"
  />
   

  <!-- RSS -->
  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="https://developercielo.github.io/atom.xml"
  />
</head>

    <body>
        
        <div class="content-container">
            <div class="language-tabs">
                <a class='hide-btn' id="hide-button" title="Comutar"><i class="fa fa-bars" aria-hidden="true"></i></a>
                <ul class="language-buttons">
                    
                    <li><a data-language-name='json'>JSON</a></li>
                    
                </ul>
            </div>
            <div class="dark-box"></div>
            <div class="overlay"></div>
        
            <div id="submenu">
                <div class="submenu-container">
                    <div class="submenu-row sub-items">
                        <div class="submenu-itens">
                            <a href="https://devcielo.zendesk.com/hc/pt-br#suporte" class="help">Ajuda</a>

                            
                        </div>

                        
                        <div class="search">
                            <input type="text" class="search" id="input-search">
                        </div>
                    </div>
                    <div class="submenu-row results">
                        <div class="search-results-container">
                            <ul class="search-results"></ul>
                        </div>
                    </div>
                        

                    <div class="submenu-row breads">
                        <ol class="breadcrumb">
                            
                            <li><a href="/">Início</a></li>
                            
                            
                            
                            
                                
                                    
                                    
                                    
                                    
                                    
                                        
                                    
                                        
                                    
                                        
                                    
                                
                            
                                
                                    
                                    <li class="active">&gt; <a href="https://developercielo.github.io/manual/api-refunds">API Refunds</a></li>
                                    
                                
                            
                        </ol>
                    </div>
                </div>
            </div>

            <div class="post"><h1 id="objetivo">Objetivo</h1>

<p>O objetivo desta documentação é orientar sobre a integração com a API Única de Cancelamento de vendas Cielo, descrevendo funcionalidade, informações técnicas e etapas para solicitação de acesso.</p>

<h1 id="sobre-a-api-Única-de-cancelamento">Sobre a API Única de Cancelamento</h1>

<p>A API Única de Cancelamento é mais uma opção de canal de cancelamento de vendas disponibilizado pela Cielo aos clientes.</p>

<p>Com a API Única de cancelamento, é possível centralizar cancelamentos de vendas de diversas soluções de captura em uma única integração (POS, LIO, TEF e E-commerce) além de permitir consulta de cancelamentos e geração de Cartas de Cancelamentos efetivados.</p>

<p>A integração com a API exige credenciais de acesso que são concedidas por Raiz de CNPJ. Ou seja, todos os Estabelecimentos (ECs) que fazem parte dessa raiz podem ter cancelamentos de vendas solicitados usando uma mesma credencial de acesso em uma única integração.</p>

<p>Principais benefícios da solução da API de Cancelamento</p>
<ul>
  <li><strong>Solicitação de cancelamento direta</strong> para o Sistema de Cancelamento Cielo.</li>
  <li><strong>Consulta de Status de Cancelamento</strong> com descrição complementar de motivo em caso de rejeição de cancelamento.</li>
  <li><strong>Centralização de solicitações de cancelamento</strong> de vendas feitas por variadas soluções de captura usadas pelo cliente (POS, TEF, LIO, E-commerce).</li>
  <li><strong>Geração de Carta de Cancelamento</strong> no mesmo dia da efetivação do cancelamento, de forma unitária ou em lote.</li>
  <li><strong>Autonomia e autosserviço</strong> no processo de solicitação de cancelamento de vendas.</li>
  <li><strong>Simplicidade</strong>: o protocolo utilizado é puramente HTTPS, tecnologia REST, que é padrão de mercado.</li>
  <li><strong>Facilidade de testes</strong>: disponibilizamos credenciais de ambiente de homologação e massa de vendas para teste em ambiente de homologação.</li>
</ul>

<h1 id="produtos-e-bandeiras-suportadas">Produtos e Bandeiras suportadas</h1>

<p>A versão atual da API Cancelamento Cielo possui <strong>suporte de cancelamento</strong> a <strong>todos os produtos e bandeiras</strong> capturados pela Cielo com <strong>exceção de PIX</strong>, transações de <strong>Voucher</strong> e Pré-autorização.</p>

<h1 id="fluxo-para-acesso-api-de-cancelamento">Fluxo para acesso API de Cancelamento</h1>

<p>O fluxo abaixo mostra  a integração do cliente na API Única de Cancelamento desde o recebimento das credenciais de Homologação produção até o acesso à API em Produção</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/cancelamento/Imagem1.jpg" alt="Imagem1" /></p>

<h1 id="solicitação-de-credenciais-para-produção-client_id-e-client_secret">Solicitação de Credenciais para Produção (client_id e client_secret)</h1>

<p>Para obter acesso à API de Cancelamento em Produção, envie os dados abaixo para: <strong>api.cancelamento@cielo.com.br</strong></p>

<ul>
  <li><strong>Nome</strong>: nome do ponto focal do estabelecimento que fará o gerenciamento das credenciais para acessar a API de Cancelamento.</li>
  <li><strong>E-mail</strong>: e-mail do ponto focal do estabelecimento que fará o gerenciamento das credenciais para acessar a API de Cancelamento.</li>
  <li><strong>Raiz de CNPJ</strong>: raiz do CNPJ que deseja integrar na API. Caso tenha mais de uma raiz de CNPJ a ser integrada, envie todas.</li>
</ul>

<blockquote>
  <p><strong>Nota</strong>: Todos os estabelecimentos que compõem essa raiz de CNPJ poderão ter os cancelamentos de vendas solicitados pela API Única de Cancelamento.</p>
</blockquote>

<p>Com esses dados, nosso time Cielo vai solicitar criação de credenciais de acesso para integração em Produção.</p>

<p>Mesmo que a integração do Estabelecimento com a API seja feita através de um terceiro, o e-mail que deve ser enviado deve ser do ponto focal do estabelecimento.</p>

<h1 id="cadastro-no-portal-de-desenvolvedores-cielo">Cadastro no Portal de Desenvolvedores Cielo </h1>

<p>Após a aprovação da solicitação, um e-mail será enviado ao ponto focal estabelecimento solicitante. </p>

<p>Acesse o Portal de Desenvolvedores Cielo  https://desenvolvedores.cielo.com.br/api-portal/ e realize seu cadastro.</p>

<blockquote>
  <p><strong>Importante:</strong> O cadastro deve ser realizado com o mesmo e-mail do ponto focal do Estabelecimento enviado no passo 1.</p>
</blockquote>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/cancelamento/Imagem2.png" alt="Imagem2" /></p>

<p>Preencha o e-mail de quem fará o gerenciamento das credenciais para acessar a API de cancelamento e demais dados do Estabelecimento.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem3.png" alt="Imagem3" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem4.png" alt="Imagem4" /></p>

<p>Ao concluir o cadastro, um e-mail de confirmação será enviado.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem5.png" alt="Imagem5" /></p>

<p>Acesse o e-mail utilizado no cadastro e acesse o link para validar o primeiro acesso.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem6.png" alt="Imagem6" /></p>

<p>Altere a senha inicial e salve as alterações.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem7.png" alt="Imagem7" /></p>

<p>Para ter mais segurança no acesso às credenciais, clique no botão “Configurar Aplicativo” e instale em seu dispositivo móvel ou desktop aplicativo de duplo fator de autenticação que desejar /preferir.</p>
<ul>
  <li>Google Authenticator (Android/iPhone/BlackBerry)</li>
  <li>Authy (Android/iPhone)</li>
  <li>Authenticator (Windows Phone)</li>
  <li>FreeOTP (Android)</li>
  <li>GAuth Authenticator (Firefox OS, desktop, outros)</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem8.png" alt="Imagem8" /></p>

<p>O aplicativo de autenticação de dois fatores será usado durante esta configuração e para gerar códigos durante a autenticação regular. Se o aplicativo for compatível, realize a leitura do código QR Code para obter o código de configuração, caso contrário você poderá inserir manualmente o código de texto.</p>

<p>Link para instalação do app: https://www.microsoft.com/pt-br/security/mobile-authenticator-app</p>

<p>Forneça a senha atual e confirme.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem9.png" alt="Imagem9" /></p>

<p>O aplicativo de autenticação de dois fatores será usado durante esta configuração e para gerar códigos durante a autenticação regular. Se o aplicativo for compatível, realize a leitura do código QR Code para obter o código de configuração, caso contrário você poderá inserir manualmente o código de texto.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem10.png" alt="Imagem10" /></p>

<p>Valide o código fornecido no aplicativo Microsoft Authenticator (é obrigatório).</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem11.png" alt="Imagem11" /></p>

<p>Após concluída a autenticação, a mensagem “Configuração do TFA concluída” será exibida e poderá ter acesso a sua conta conforme dados enviados por e-mail.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem12.png" alt="Imagem12" /></p>

<p>Acesse Cliente-Ids Cadastrados acessando no menu item <em>“Perfil” &gt; “Client-Ids Cadastrados”</em> ou acessando <em>Client-Ids Cadastrados</em> no rodapé.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem13.png" alt="Imagem13" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem14.png" alt="Imagem14" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem15.png" alt="Imagem15" /></p>

<h1 id="criação-de-uma-chave-pública-e-privada-para-criptografia-certificado-mtls">Criação de uma chave pública e privada para criptografia (Certificado MTLS)</h1>

<p>Para conferir maior segurança no uso da API Única de Cancelamento, é necessário uso de certificado assinado pela Cielo.</p>

<p>Este certificado não tem custo adicional e todas as chamadas aos serviços da API em homologação e produção devem ser feitas com certificado MTLS assinado pela Cielo.</p>

<p>Gere o arquivo da chave pública no formato .csr executando o comando abaixo em um terminal como gitbash ou via ferramenta openssl.</p>

<p>Exemplo:</p>

<blockquote>
  <p>openssl req -new -newkey rsa:2048 -nodes -keyout <strong>NomeEmpresa</strong>_Cielo.key -out <strong>NomeEmpresa</strong>_Cielo.csr</p>
</blockquote>

<p>Ao executar este comando, preencha as informações solicitadas conforme exemplo abaixo e substituindo os dados sinalizadas na cor <strong>azul em negrito</strong> com o nome da sua empresa:</p>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Descrição</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">emailAddress</code></td>
      <td>E-mail da área de produtos Cielo responsável pela API</td>
      <td>api.cancelamento@cielo.com.br</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Common Name</code></td>
      <td>Nome da empresa que está integrando na API Única de Cancelamento</td>
      <td><strong>Informe nome da sua empresa</strong></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Organizational Unit</code></td>
      <td>Nome da área de produtos Cielo responsável pela API “squad-cancelamento”</td>
      <td>squad-cancelamento</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Organization Name</code></td>
      <td>Empresa que está fornecendo a solução API Única de Cancelamento</td>
      <td>Cielo S.A.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Locality</code></td>
      <td>Cidade Cielo</td>
      <td>Barueri</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">State</code></td>
      <td>Estado Cielo</td>
      <td>SP</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Country</code></td>
      <td>País Cielo</td>
      <td>BR</td>
    </tr>
  </tbody>
</table>

<p><strong>Exemplo:</strong></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem16.png" alt="Imagem16" /></p>

<p>Serão gerados dois arquivos no caminho de diretório em que for executado o comando, um deles .csr e outr .key</p>
<ul>
  <li>O arquivo “.key” é de uso exclusivo do estabelecimento</li>
</ul>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem17.png" alt="Imagem17" /></p>

<ul>
  <li>Já o arquivo “.csr” deve ser encaminhado para assinatura da Cielo, sendo utilizado o mesmo certificado nos ambientes de Sandbox e Produção.</li>
</ul>

<p>O cliente deve enviar o arquivo .csr por e-mail para geração do certificado assinado.</p>

<p>Envie o arquivo para: <strong>api.cancelamento@cielo.com.br</strong> e aguarde retorno do time Cielo com o certificado MTLS assinado.</p>

<aside class="notice"> Após concluir o processo de assinatura do certificado MTLS e obter seu Client_ID e Client_Secret, você estará habilitado a acessar nosso ambiente de homologação e produção. 🚀🚀</aside>

<aside class="warning">Todas as chamadas para nossas APIs (nos ambientes de homologação ou produção) devem ser enviadas com a chave MTLS assinada. </aside>

<h1 id="configurações-para-utilização-da-api">Configurações para utilização da API</h1>

<h2 id="adicionar-certificado-mtls-no-postman">Adicionar certificado MTLS no Postman</h2>

<p>Nesse tópico serão fornecidas informações sobre como anexar o certificado assinado pela Cielo na API Única de Cancelamentos.</p>

<p>Na ferramenta do Postman, vá para o ícone de <em>“ferramentas” &gt; Configurações &gt; Certificados &gt; Anexe o arquivo .crt assinado pela Cielo e o .key.</em></p>

<p><strong>Observação:</strong> Este passo deve ser feito tanto para o ambiente de produção quanto para o de homologação, mas você pode usar o mesmo certificado, apenas alterando o campo “Host”.</p>

<p>Acesso aos endpoints da Cielo:</p>

<p>Homologação: 	https://apihml-corp.cielo.com.br/cielo-refunds-exp-hml/refunds/v1/refunds
Produção: 	  https://api-corp.cielo.com.br/cielo-refunds-exp/refunds/v1/refunds</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem18.png" alt="Imagem18" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem19.png" alt="Imagem19" /></p>

<h1 id="fluxo-de-autenticação-de-credenciais-do-cliente-client-credencials-flow">Fluxo de Autenticação de Credenciais do Cliente (Client Credencials flow)</h1>

<h2 id="obtenção-do-token">Obtenção do Token</h2>

<p>Para realizar uma solicitação de cancelamento ou consulta na API, é necessário obter o token utilizando seu cliente_id e Cliente_secret</p>

<p><strong>Homologação</strong></p>

<blockquote>
  <p>curl –location –request POST
https://apihml-corp.cielo.com.br/cielo-security-sys-hml/oauth/v2/MulesoftHML/protocol/openid-connect/token\</p>

  <p>–header ‘Content-Type: application/x-www-form-urlencoded’ \
–data-urlencode ‘client_id={ <strong>clientId</strong> }’ \
–data-urlencode ‘client_secret={ <strong>secret</strong> }’ \
–data-urlencode ‘grant_type=client_credentials’</p>
</blockquote>

<p><strong>Produção</strong></p>

<blockquote>
  <p>curl –location –request POST
https://api-corp.cielo.com.br/cielo-security-sys-web/oauth/v2/MulesoftPRD/protocol/openid-connect/token’ \</p>

  <p>–header ‘Content-Type: application/x-www-form-urlencoded’ \
–data-urlencode ‘client_id={ <strong>clientId</strong> }’ \
–data-urlencode ‘client_secret={ <strong>secret</strong> }’ \
–data-urlencode ‘grant_type=client_credentials’</p>
</blockquote>

<p><strong>Exemplo no Postman:</strong></p>

<p>Header:</p>

<aside class="notice">https://apihml-corp.cielo.com.br/cielo-security-sys-hml/oauth/v2/MulesoftHML/protocol/openid-connect/token</aside>

<p>Body:</p>

<p>(enviar o client_id e o client secret disponibilizado pela Cielo)</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem20.png" alt="Imagem20" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem21.png" alt="Imagem21" /></p>

<h2 id="enviando-uma-requisição-com-token">Enviando uma requisição com token</h2>

<p>Extraia o campo access_token do retorno da requisição apresentada no passo anterior e passe como header em “Authorization” quando for realizar requisição.</p>

<p>Exemplo: header (“Authorization”, “Bearer “ + token)</p>

<aside class="warning">Lembrete: O access_token precisa ser renovado a cada 5 minutos.</aside>

<table>
  <thead>
    <tr>
      <th>AMBIENTE</th>
      <th>ENDPOINT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Homologação</strong></td>
      <td>https://apihml-corp.cielo.com.br/cielo-refunds-exp-hml/refunds/v1/refunds</td>
    </tr>
    <tr>
      <td><strong>Produção</strong></td>
      <td>https://api-corp.cielo.com.br/cielo-refunds-exp/refunds/v1/refunds</td>
    </tr>
  </tbody>
</table>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem22.png" alt="Imagem22" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem23.png" alt="Imagem23" /></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem24.png" alt="Imagem24" /></p>

<h1 id="serviços-disponíveis-api-Única-de-cancelamento">Serviços disponíveis API Única de Cancelamento</h1>

<table>
  <thead>
    <tr>
      <th>AMBIENTE</th>
      <th>ENDPOINT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Homologação</strong></td>
      <td>https://apihml-corp.cielo.com.br/cielo-refunds-exp-hml/refunds/v1/refunds</td>
    </tr>
    <tr>
      <td><strong>Produção</strong></td>
      <td>https://api-corp.cielo.com.br/cielo-refunds-exp/refunds/v1/refunds</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>DESCRIÇÃO</th>
      <th>PATH</th>
      <th>MÉTODO HTTP</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Solicitação de Cancelamento (Unitária)</strong></td>
      <td>/v1/refunds</td>
      <td>POST</td>
    </tr>
    <tr>
      <td><strong>Solicitação de Cancelamento (Lote)</strong></td>
      <td>/v1/refunds</td>
      <td>POST</td>
    </tr>
    <tr>
      <td><strong>Consulta de Cancelamento (Unitária)</strong></td>
      <td>/v1/refunds/{refundID}/{merchantID}</td>
      <td>GET</td>
    </tr>
    <tr>
      <td><strong>Consulta de Cancelamento (Lista)</strong></td>
      <td>/v1/refunds?cancelStartDate={Data inicial}&amp;cancelEndDate={Data final}&amp;rows={linha}&amp;page={pagina}&amp;merchantId={merchantID}&amp;authorizationCode={código de autorização}</td>
      <td>GET</td>
    </tr>
    <tr>
      <td><strong>Geração de Carta de Cancelamento (Unitária)</strong></td>
      <td>/v1/refunds/v1/letter-api/pdf</td>
      <td>POST</td>
    </tr>
    <tr>
      <td><strong>Geração de Carta de Cancelamento (Lote)</strong></td>
      <td>/v1/refunds/v1/letter-api/zip</td>
      <td>POST</td>
    </tr>
  </tbody>
</table>

<h1 id="solicitação-de-cancelamento">Solicitação de Cancelamento</h1>

<p>Com esse serviço, é possível realizar solicitações de cancelamento individuais ou em lote através de dados da venda como número do EC, data da venda, código de autorização, valor da venda, entre outros.</p>

<table>
  <thead>
    <tr>
      <th>AMBIENTE</th>
      <th>ENDPOINT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Homologação</strong></td>
      <td>https://apihml-corp.cielo.com.br/cielo-refunds-exp-hml/refunds/v1/refunds</td>
    </tr>
    <tr>
      <td><strong>Produção</strong></td>
      <td>https://api-corp.cielo.com.br/cielo-refunds-exp/refunds/v1/refunds</td>
    </tr>
  </tbody>
</table>

<p><strong>Headers:</strong></p>

<p>No campo “key” digite: Authorization e no campo “value” digite: Bearer + espaço + {access_token}</p>

<p>Em seguida no campo “key digite: Content-Type e no campo “value” digite: application/json.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem25.png" alt="Imagem25" /></p>

<p><strong>Corpo da Requisição (Body):</strong></p>

<p>Enviando uma solicitação de cancelamento.</p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem26.png" alt="Imagem26" /></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">transactionID</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">identificador</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">transação</span><span class="w"> </span><span class="err">E-commerce.</span><span class="w">
</span><span class="err">Nsu</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">Número</span><span class="w"> </span><span class="err">sequencial</span><span class="w"> </span><span class="err">único</span><span class="w">
</span><span class="err">cardNumberLast</span><span class="mi">4</span><span class="err">Digits</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">os</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">últimos</span><span class="w"> </span><span class="err">dígitos</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">cartão</span><span class="w">
</span><span class="err">merchantID*</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">número</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">EC</span><span class="w"> </span><span class="err">(estabelecimento</span><span class="w"> </span><span class="err">comercial)</span><span class="w">
</span><span class="err">authorizationCode*</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">Código</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">autorização</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">venda</span><span class="w">
</span><span class="err">refundAmount:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">currency*=</span><span class="w"> </span><span class="err">tipo</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">moeda</span><span class="w"> </span><span class="err">para</span><span class="w"> </span><span class="err">cancelamento</span><span class="w"> </span><span class="err">utilizar</span><span class="w"> </span><span class="err">somente</span><span class="w"> </span><span class="err">BRL</span><span class="w">
        </span><span class="err">value*=</span><span class="w"> </span><span class="err">Valor</span><span class="w"> </span><span class="err">para</span><span class="w"> </span><span class="err">cancelar</span><span class="p">,</span><span class="w"> </span><span class="err">pode</span><span class="w"> </span><span class="err">ser</span><span class="w"> </span><span class="err">o</span><span class="w"> </span><span class="err">valor</span><span class="w"> </span><span class="err">parcial</span><span class="w"> </span><span class="err">ou</span><span class="w"> </span><span class="err">total.</span><span class="w">
      </span><span class="p">}</span><span class="w">
</span><span class="err">saleAmount:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">currency*=</span><span class="w"> </span><span class="err">tipo</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">moeda</span><span class="w"> </span><span class="err">para</span><span class="w"> </span><span class="err">cancelamento</span><span class="w"> </span><span class="err">utilizar</span><span class="w"> </span><span class="err">somente</span><span class="w"> </span><span class="err">BRL.</span><span class="w"> 
        </span><span class="err">value*=</span><span class="w"> </span><span class="err">valor</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">venda</span><span class="w"> 
      </span><span class="p">}</span><span class="w">
</span><span class="err">transactionDate*</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">passar</span><span class="w"> </span><span class="err">no</span><span class="w"> </span><span class="err">formato</span><span class="w"> </span><span class="err">DD-MM-YYYY</span><span class="w"> </span><span class="err">HH</span><span class="mi">24</span><span class="err">:MI:SS</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">venda</span><span class="w"> </span><span class="err">(Não</span><span class="w"> </span><span class="err">é</span><span class="w"> </span><span class="err">necessário</span><span class="w"> </span><span class="err">passar</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">hora</span><span class="w"> </span><span class="err">exata</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">venda)</span><span class="w">
</span></code></pre></div></div>

<p><em>*Campos obrigatórios</em></p>

<p><strong>Response da requisição de cancelamento</strong></p>

<p><img src="https://desenvolvedores.cielo.com.br/api-portal/sites/default/files/Imagem27.png" alt="Imagem27" /></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="nl">"merchantID"</span><span class="p">:</span><span class="w"> </span><span class="err">número</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">EC</span><span class="w"> </span><span class="err">(estabelecimento</span><span class="w"> </span><span class="err">comercial)</span><span class="w">
      </span><span class="nl">"authorizationCode"</span><span class="p">:</span><span class="w"> </span><span class="err">Código</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">autorização</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">venda</span><span class="w">
      </span><span class="nl">"refundAmount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w">  </span><span class="err">tipo</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">moeda</span><span class="w"> </span><span class="err">para</span><span class="w"> </span><span class="err">cancelamento</span><span class="w"> </span><span class="err">utilizar</span><span class="w"> </span><span class="err">somente</span><span class="w"> </span><span class="err">BRL.</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">Valor</span><span class="w"> </span><span class="err">para</span><span class="w"> </span><span class="err">cancelar</span><span class="p">,</span><span class="w"> </span><span class="err">pode</span><span class="w"> </span><span class="err">ser</span><span class="w"> </span><span class="err">o</span><span class="w"> </span><span class="err">valor</span><span class="w"> </span><span class="err">parcial</span><span class="w"> </span><span class="err">ou</span><span class="w"> </span><span class="err">total</span><span class="w">
      </span><span class="p">}</span><span class="err">,</span><span class="w">
      </span><span class="nl">"saleAmount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w">  </span><span class="err">tipo</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">moeda</span><span class="w"> </span><span class="err">para</span><span class="w"> </span><span class="err">cancelamento</span><span class="w"> </span><span class="err">utilizar</span><span class="w"> </span><span class="err">somente</span><span class="w"> </span><span class="err">BRL.</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">Valor</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">venda</span><span class="w">
      </span><span class="p">}</span><span class="err">,</span><span class="w">
      </span><span class="nl">"transactionDate"</span><span class="p">:</span><span class="w"> </span><span class="err">formato</span><span class="w"> </span><span class="err">DD-MM-YYYY</span><span class="w"> </span><span class="err">HH</span><span class="mi">24</span><span class="err">:MI:SS</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">venda</span><span class="w">
      </span><span class="nl">"controlID"</span><span class="p">:</span><span class="w"> </span><span class="err">identificador</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">cancelamento</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="err">Status</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">solicitação</span><span class="w"> 
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="err">,</span><span class="w">
  </span><span class="nl">"refundID"</span><span class="p">:</span><span class="w"> </span><span class="err">Identificador</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">lote</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">cancelamento</span><span class="w">
  </span><span class="nl">"refundDate"</span><span class="p">:</span><span class="w"> </span><span class="err">Data</span><span class="w"> </span><span class="err">da</span><span class="w"> </span><span class="err">solicitação</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">cancelamento,</span><span class="w"> </span><span class="err">formato</span><span class="w"> </span><span class="err">exemplo:</span><span class="w"> </span><span class="mi">2019-12-27</span><span class="err">T</span><span class="mi">19</span><span class="err">:</span><span class="mi">38</span><span class="err">:</span><span class="mf">30.547</span><span class="err">Z</span><span class="w">
</span></code></pre></div></div>

<h1 id="consultar-cancelamento">Consultar Cancelamento</h1>

</div>


            <div class="footer-conteudo">
  <div id="footer-conteudo-img" class="col-lg-1 col-md-1">
    <img
      src="https://developercielo.github.io/assets/images/icon-doubt.svg"
      width="55px"
      height="53px"
      alt="Precisa de ajuda?"
    />
  </div>

  <div id="footer-conteudo-texto" class="col-lg-11 col-md-11">
    <h2>Precisa de ajuda?</h2>
    <p>Se você não conseguiu encontrar sua resposta acima, <a href="https://devcielo.zendesk.com/hc/pt-br#suporte">entre em contato conosco</a>.</p>
  </div>
</div>

        </div>

        <div class="sidebar">
  <div class="sidebar-sticky">
    <div class="sidebar-about">
      <a
        title="Comutar a coluna da esquerda"
        class="hamburger"
      >
        <i class="fa fa-bars hamb-menu" aria-hidden="true"></i>
      </a>
      <a href="https://desenvolvedores.cielo.com.br" target="_blank">
        <img
          src="https://developercielo.github.io/assets/images/logo.png"
          alt="Documentações e tutoriais"
          style="width: 60%; margin-left: 20%"
        />
      </a>
      <div></div>
    </div>

    <div id="toc"></div>

    <div class="fixed-footer">
      

      <div class="toc-contact">
        <div class="contact">
          <a
            title="Contato"
            href="https://devcielo.zendesk.com/"
          >
            <i class="fa fa-envelope-o" aria-hidden="true"></i>
            <span>Contato</span>
          </a>
        </div>
        <div class="github">
          <a title="GitHub" href="https://github.com/developercielo">
            <i class="fa fa-github" aria-hidden="true"></i>
            <span>GitHub</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


        <script src="https://developercielo.github.io/assets/bundles/js/bundle.min.js"></script>
        <script>
            
            var selectors = 'h1,h2,h3,h4,h5,h6';
            
        </script>

        
        <script src="https://developercielo.github.io/assets/bundles/js/search.min.js"></script>
        

        
        <script>
            let langs = '';
            let langsArray = [];

            
            langs += "<a data-language-name='json'>JSON</a>";
            langsArray.push('json');
            

            var toggleCode = 'Comutar';
        </script>

        <script src='https://developercielo.github.io/assets/bundles/js/language_buttons.min.js'></script>
        

        <!-- Hotjar Tracking Code for https://developercielo.github.io/ -->
<script>
  (function (h, o, t, j, a, r) {
    h.hj =
      h.hj ||
      function () {
        (h.hj.q = h.hj.q || []).push(arguments);
      };
    h._hjSettings = { hjid: 674586, hjsv: 6 };
    a = o.getElementsByTagName("head")[0];
    r = o.createElement("script");
    r.async = 1;
    r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
    a.appendChild(r);
  })(window, document, "https://static.hotjar.com/c/hotjar-", ".js?sv=");
</script>

    </body>
</html>
